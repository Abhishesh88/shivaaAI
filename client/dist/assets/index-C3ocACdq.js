(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var q=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function nm(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var im={exports:{}},rc={},om={exports:{}},H={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _s=Symbol.for("react.element"),oR=Symbol.for("react.portal"),sR=Symbol.for("react.fragment"),aR=Symbol.for("react.strict_mode"),cR=Symbol.for("react.profiler"),uR=Symbol.for("react.provider"),lR=Symbol.for("react.context"),pR=Symbol.for("react.forward_ref"),dR=Symbol.for("react.suspense"),hR=Symbol.for("react.memo"),vR=Symbol.for("react.lazy"),ch=Symbol.iterator;function fR(t){return t===null||typeof t!="object"?null:(t=ch&&t[ch]||t["@@iterator"],typeof t=="function"?t:null)}var sm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},am=Object.assign,cm={};function Bn(t,e,r){this.props=t,this.context=e,this.refs=cm,this.updater=r||sm}Bn.prototype.isReactComponent={};Bn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Bn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function um(){}um.prototype=Bn.prototype;function bp(t,e,r){this.props=t,this.context=e,this.refs=cm,this.updater=r||sm}var Dp=bp.prototype=new um;Dp.constructor=bp;am(Dp,Bn.prototype);Dp.isPureReactComponent=!0;var uh=Array.isArray,lm=Object.prototype.hasOwnProperty,Np={current:null},pm={key:!0,ref:!0,__self:!0,__source:!0};function dm(t,e,r){var n,i={},s=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)lm.call(e,n)&&!pm.hasOwnProperty(n)&&(i[n]=e[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:_s,type:t,key:s,ref:a,props:i,_owner:Np.current}}function gR(t,e){return{$$typeof:_s,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function zp(t){return typeof t=="object"&&t!==null&&t.$$typeof===_s}function mR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var lh=/\/+/g;function ku(t,e){return typeof t=="object"&&t!==null&&t.key!=null?mR(""+t.key):e.toString(36)}function da(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case _s:case oR:a=!0}}if(a)return a=t,i=i(a),t=n===""?"."+ku(a,0):n,uh(i)?(r="",t!=null&&(r=t.replace(lh,"$&/")+"/"),da(i,e,r,"",function(u){return u})):i!=null&&(zp(i)&&(i=gR(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(lh,"$&/")+"/")+t)),e.push(i)),1;if(a=0,n=n===""?".":n+":",uh(t))for(var o=0;o<t.length;o++){s=t[o];var c=n+ku(s,o);a+=da(s,e,r,c,i)}else if(c=fR(t),typeof c=="function")for(t=c.call(t),o=0;!(s=t.next()).done;)s=s.value,c=n+ku(s,o++),a+=da(s,e,r,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Ks(t,e,r){if(t==null)return t;var n=[],i=0;return da(t,n,"","",function(s){return e.call(r,s,i++)}),n}function yR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Fe={current:null},ha={transition:null},SR={ReactCurrentDispatcher:Fe,ReactCurrentBatchConfig:ha,ReactCurrentOwner:Np};H.Children={map:Ks,forEach:function(t,e,r){Ks(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Ks(t,function(){e++}),e},toArray:function(t){return Ks(t,function(e){return e})||[]},only:function(t){if(!zp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};H.Component=Bn;H.Fragment=sR;H.Profiler=cR;H.PureComponent=bp;H.StrictMode=aR;H.Suspense=dR;H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SR;H.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=am({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=Np.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)lm.call(e,c)&&!pm.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:_s,type:t.type,key:i,ref:s,props:n,_owner:a}};H.createContext=function(t){return t={$$typeof:lR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:uR,_context:t},t.Consumer=t};H.createElement=dm;H.createFactory=function(t){var e=dm.bind(null,t);return e.type=t,e};H.createRef=function(){return{current:null}};H.forwardRef=function(t){return{$$typeof:pR,render:t}};H.isValidElement=zp;H.lazy=function(t){return{$$typeof:vR,_payload:{_status:-1,_result:t},_init:yR}};H.memo=function(t,e){return{$$typeof:hR,type:t,compare:e===void 0?null:e}};H.startTransition=function(t){var e=ha.transition;ha.transition={};try{t()}finally{ha.transition=e}};H.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};H.useCallback=function(t,e){return Fe.current.useCallback(t,e)};H.useContext=function(t){return Fe.current.useContext(t)};H.useDebugValue=function(){};H.useDeferredValue=function(t){return Fe.current.useDeferredValue(t)};H.useEffect=function(t,e){return Fe.current.useEffect(t,e)};H.useId=function(){return Fe.current.useId()};H.useImperativeHandle=function(t,e,r){return Fe.current.useImperativeHandle(t,e,r)};H.useInsertionEffect=function(t,e){return Fe.current.useInsertionEffect(t,e)};H.useLayoutEffect=function(t,e){return Fe.current.useLayoutEffect(t,e)};H.useMemo=function(t,e){return Fe.current.useMemo(t,e)};H.useReducer=function(t,e,r){return Fe.current.useReducer(t,e,r)};H.useRef=function(t){return Fe.current.useRef(t)};H.useState=function(t){return Fe.current.useState(t)};H.useSyncExternalStore=function(t,e,r){return Fe.current.useSyncExternalStore(t,e,r)};H.useTransition=function(){return Fe.current.useTransition()};H.version="18.2.0";om.exports=H;var ve=om.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CR=ve,PR=Symbol.for("react.element"),RR=Symbol.for("react.fragment"),ER=Object.prototype.hasOwnProperty,wR=CR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,AR={key:!0,ref:!0,__self:!0,__source:!0};function hm(t,e,r){var n,i={},s=null,a=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)ER.call(e,n)&&!AR.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:PR,type:t,key:s,ref:a,props:i,_owner:wR.current}}rc.Fragment=RR;rc.jsx=hm;rc.jsxs=hm;im.exports=rc;var j=im.exports,Tl={},vm={exports:{}},et={},fm={exports:{}},gm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(_,L){var B=_.length;_.push(L);e:for(;0<B;){var Y=B-1>>>1,ae=_[Y];if(0<i(ae,L))_[Y]=L,_[B]=ae,B=Y;else break e}}function r(_){return _.length===0?null:_[0]}function n(_){if(_.length===0)return null;var L=_[0],B=_.pop();if(B!==L){_[0]=B;e:for(var Y=0,ae=_.length,nn=ae>>>1;Y<nn;){var Mt=2*(Y+1)-1,Gn=_[Mt],bt=Mt+1,on=_[bt];if(0>i(Gn,B))bt<ae&&0>i(on,Gn)?(_[Y]=on,_[bt]=B,Y=bt):(_[Y]=Gn,_[Mt]=B,Y=Mt);else if(bt<ae&&0>i(on,B))_[Y]=on,_[bt]=B,Y=bt;else break e}}return L}function i(_,L){var B=_.sortIndex-L.sortIndex;return B!==0?B:_.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var c=[],u=[],l=1,p=null,d=3,h=!1,v=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(_){for(var L=r(u);L!==null;){if(L.callback===null)n(u);else if(L.startTime<=_)n(u),L.sortIndex=L.expirationTime,e(c,L);else break;L=r(u)}}function C(_){if(g=!1,S(_),!v)if(r(c)!==null)v=!0,Jn(P);else{var L=r(u);L!==null&&Qn(C,L.startTime-_)}}function P(_,L){v=!1,g&&(g=!1,f(w),w=-1),h=!0;var B=d;try{for(S(L),p=r(c);p!==null&&(!(p.expirationTime>L)||_&&!J());){var Y=p.callback;if(typeof Y=="function"){p.callback=null,d=p.priorityLevel;var ae=Y(p.expirationTime<=L);L=t.unstable_now(),typeof ae=="function"?p.callback=ae:p===r(c)&&n(c),S(L)}else n(c);p=r(c)}if(p!==null)var nn=!0;else{var Mt=r(u);Mt!==null&&Qn(C,Mt.startTime-L),nn=!1}return nn}finally{p=null,d=B,h=!1}}var R=!1,A=null,w=-1,M=5,b=-1;function J(){return!(t.unstable_now()-b<M)}function Rt(){if(A!==null){var _=t.unstable_now();b=_;var L=!0;try{L=A(!0,_)}finally{L?pe():(R=!1,A=null)}}else R=!1}var pe;if(typeof m=="function")pe=function(){m(Rt)};else if(typeof MessageChannel<"u"){var $n=new MessageChannel,_u=$n.port2;$n.port1.onmessage=Rt,pe=function(){_u.postMessage(null)}}else pe=function(){y(Rt,0)};function Jn(_){A=_,R||(R=!0,pe())}function Qn(_,L){w=y(function(){_(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(_){_.callback=null},t.unstable_continueExecution=function(){v||h||(v=!0,Jn(P))},t.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<_?Math.floor(1e3/_):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(_){switch(d){case 1:case 2:case 3:var L=3;break;default:L=d}var B=d;d=L;try{return _()}finally{d=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(_,L){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var B=d;d=_;try{return L()}finally{d=B}},t.unstable_scheduleCallback=function(_,L,B){var Y=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?Y+B:Y):B=Y,_){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=B+ae,_={id:l++,callback:L,priorityLevel:_,startTime:B,expirationTime:ae,sortIndex:-1},B>Y?(_.sortIndex=B,e(u,_),r(c)===null&&_===r(u)&&(g?(f(w),w=-1):g=!0,Qn(C,B-Y))):(_.sortIndex=ae,e(c,_),v||h||(v=!0,Jn(P))),_},t.unstable_shouldYield=J,t.unstable_wrapCallback=function(_){var L=d;return function(){var B=d;d=L;try{return _.apply(this,arguments)}finally{d=B}}}})(gm);fm.exports=gm;var IR=fm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mm=ve,Ye=IR;function T(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ym=new Set,as={};function en(t,e){Tn(t,e),Tn(t+"Capture",e)}function Tn(t,e){for(as[t]=e,t=0;t<e.length;t++)ym.add(e[t])}var Vt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_l=Object.prototype.hasOwnProperty,TR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ph={},dh={};function _R(t){return _l.call(dh,t)?!0:_l.call(ph,t)?!1:TR.test(t)?dh[t]=!0:(ph[t]=!0,!1)}function OR(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function kR(t,e,r,n){if(e===null||typeof e>"u"||OR(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qe(t,e,r,n,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var we={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){we[t]=new qe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];we[e]=new qe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){we[t]=new qe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){we[t]=new qe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){we[t]=new qe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){we[t]=new qe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){we[t]=new qe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){we[t]=new qe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){we[t]=new qe(t,5,!1,t.toLowerCase(),null,!1,!1)});var jp=/[\-:]([a-z])/g;function Lp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(jp,Lp);we[e]=new qe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(jp,Lp);we[e]=new qe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(jp,Lp);we[e]=new qe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){we[t]=new qe(t,1,!1,t.toLowerCase(),null,!1,!1)});we.xlinkHref=new qe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){we[t]=new qe(t,1,!1,t.toLowerCase(),null,!0,!0)});function xp(t,e,r,n){var i=we.hasOwnProperty(e)?we[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(kR(e,r,i,n)&&(r=null),n||i===null?_R(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Qt=mm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$s=Symbol.for("react.element"),un=Symbol.for("react.portal"),ln=Symbol.for("react.fragment"),Bp=Symbol.for("react.strict_mode"),Ol=Symbol.for("react.profiler"),Sm=Symbol.for("react.provider"),Cm=Symbol.for("react.context"),Fp=Symbol.for("react.forward_ref"),kl=Symbol.for("react.suspense"),Ml=Symbol.for("react.suspense_list"),qp=Symbol.for("react.memo"),Yt=Symbol.for("react.lazy"),Pm=Symbol.for("react.offscreen"),hh=Symbol.iterator;function Xn(t){return t===null||typeof t!="object"?null:(t=hh&&t[hh]||t["@@iterator"],typeof t=="function"?t:null)}var re=Object.assign,Mu;function Ko(t){if(Mu===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Mu=e&&e[1]||""}return`
`+Mu+t}var bu=!1;function Du(t,e){if(!t||bu)return"";bu=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=n.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var c=`
`+i[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=o);break}}}finally{bu=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Ko(t):""}function MR(t){switch(t.tag){case 5:return Ko(t.type);case 16:return Ko("Lazy");case 13:return Ko("Suspense");case 19:return Ko("SuspenseList");case 0:case 2:case 15:return t=Du(t.type,!1),t;case 11:return t=Du(t.type.render,!1),t;case 1:return t=Du(t.type,!0),t;default:return""}}function bl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ln:return"Fragment";case un:return"Portal";case Ol:return"Profiler";case Bp:return"StrictMode";case kl:return"Suspense";case Ml:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Cm:return(t.displayName||"Context")+".Consumer";case Sm:return(t._context.displayName||"Context")+".Provider";case Fp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qp:return e=t.displayName||null,e!==null?e:bl(t.type)||"Memo";case Yt:e=t._payload,t=t._init;try{return bl(t(e))}catch{}}return null}function bR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bl(e);case 8:return e===Bp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function mr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Rm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function DR(t){var e=Rm(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Js(t){t._valueTracker||(t._valueTracker=DR(t))}function Em(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Rm(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Oa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Dl(t,e){var r=e.checked;return re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function vh(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=mr(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wm(t,e){e=e.checked,e!=null&&xp(t,"checked",e,!1)}function Nl(t,e){wm(t,e);var r=mr(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zl(t,e.type,r):e.hasOwnProperty("defaultValue")&&zl(t,e.type,mr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function fh(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function zl(t,e,r){(e!=="number"||Oa(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var $o=Array.isArray;function Pn(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+mr(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function jl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(T(91));return re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function gh(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(T(92));if($o(r)){if(1<r.length)throw Error(T(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:mr(r)}}function Am(t,e){var r=mr(e.value),n=mr(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function mh(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Im(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ll(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Im(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Qs,Tm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Qs=Qs||document.createElement("div"),Qs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Qs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function cs(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Xo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},NR=["Webkit","ms","Moz","O"];Object.keys(Xo).forEach(function(t){NR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Xo[e]=Xo[t]})});function _m(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Xo.hasOwnProperty(t)&&Xo[t]?(""+e).trim():e+"px"}function Om(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=_m(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var zR=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xl(t,e){if(e){if(zR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(T(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(T(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(T(61))}if(e.style!=null&&typeof e.style!="object")throw Error(T(62))}}function Bl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fl=null;function Up(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ql=null,Rn=null,En=null;function yh(t){if(t=Ms(t)){if(typeof ql!="function")throw Error(T(280));var e=t.stateNode;e&&(e=ac(e),ql(t.stateNode,t.type,e))}}function km(t){Rn?En?En.push(t):En=[t]:Rn=t}function Mm(){if(Rn){var t=Rn,e=En;if(En=Rn=null,yh(t),e)for(t=0;t<e.length;t++)yh(e[t])}}function bm(t,e){return t(e)}function Dm(){}var Nu=!1;function Nm(t,e,r){if(Nu)return t(e,r);Nu=!0;try{return bm(t,e,r)}finally{Nu=!1,(Rn!==null||En!==null)&&(Dm(),Mm())}}function us(t,e){var r=t.stateNode;if(r===null)return null;var n=ac(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(T(231,e,typeof r));return r}var Ul=!1;if(Vt)try{var Zn={};Object.defineProperty(Zn,"passive",{get:function(){Ul=!0}}),window.addEventListener("test",Zn,Zn),window.removeEventListener("test",Zn,Zn)}catch{Ul=!1}function jR(t,e,r,n,i,s,a,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(l){this.onError(l)}}var Zo=!1,ka=null,Ma=!1,Wl=null,LR={onError:function(t){Zo=!0,ka=t}};function xR(t,e,r,n,i,s,a,o,c){Zo=!1,ka=null,jR.apply(LR,arguments)}function BR(t,e,r,n,i,s,a,o,c){if(xR.apply(this,arguments),Zo){if(Zo){var u=ka;Zo=!1,ka=null}else throw Error(T(198));Ma||(Ma=!0,Wl=u)}}function tn(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function zm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Sh(t){if(tn(t)!==t)throw Error(T(188))}function FR(t){var e=t.alternate;if(!e){if(e=tn(t),e===null)throw Error(T(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return Sh(i),t;if(s===n)return Sh(i),e;s=s.sibling}throw Error(T(188))}if(r.return!==n.return)r=i,n=s;else{for(var a=!1,o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a)throw Error(T(189))}}if(r.alternate!==n)throw Error(T(190))}if(r.tag!==3)throw Error(T(188));return r.stateNode.current===r?t:e}function jm(t){return t=FR(t),t!==null?Lm(t):null}function Lm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Lm(t);if(e!==null)return e;t=t.sibling}return null}var xm=Ye.unstable_scheduleCallback,Ch=Ye.unstable_cancelCallback,qR=Ye.unstable_shouldYield,UR=Ye.unstable_requestPaint,se=Ye.unstable_now,WR=Ye.unstable_getCurrentPriorityLevel,Wp=Ye.unstable_ImmediatePriority,Bm=Ye.unstable_UserBlockingPriority,ba=Ye.unstable_NormalPriority,HR=Ye.unstable_LowPriority,Fm=Ye.unstable_IdlePriority,nc=null,_t=null;function VR(t){if(_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(nc,t,void 0,(t.current.flags&128)===128)}catch{}}var gt=Math.clz32?Math.clz32:JR,KR=Math.log,$R=Math.LN2;function JR(t){return t>>>=0,t===0?32:31-(KR(t)/$R|0)|0}var Gs=64,Xs=4194304;function Jo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Da(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,a=r&268435455;if(a!==0){var o=a&~i;o!==0?n=Jo(o):(s&=a,s!==0&&(n=Jo(s)))}else a=r&~i,a!==0?n=Jo(a):s!==0&&(n=Jo(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-gt(e),i=1<<r,n|=t[r],e&=~i;return n}function QR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GR(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-gt(s),o=1<<a,c=i[a];c===-1?(!(o&r)||o&n)&&(i[a]=QR(o,e)):c<=e&&(t.expiredLanes|=o),s&=~o}}function Hl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function qm(){var t=Gs;return Gs<<=1,!(Gs&4194240)&&(Gs=64),t}function zu(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Os(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-gt(e),t[e]=r}function XR(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-gt(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function Hp(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-gt(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var $=0;function Um(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Wm,Vp,Hm,Vm,Km,Vl=!1,Zs=[],cr=null,ur=null,lr=null,ls=new Map,ps=new Map,nr=[],ZR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ph(t,e){switch(t){case"focusin":case"focusout":cr=null;break;case"dragenter":case"dragleave":ur=null;break;case"mouseover":case"mouseout":lr=null;break;case"pointerover":case"pointerout":ls.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ps.delete(e.pointerId)}}function Yn(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ms(e),e!==null&&Vp(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function YR(t,e,r,n,i){switch(e){case"focusin":return cr=Yn(cr,t,e,r,n,i),!0;case"dragenter":return ur=Yn(ur,t,e,r,n,i),!0;case"mouseover":return lr=Yn(lr,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return ls.set(s,Yn(ls.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,ps.set(s,Yn(ps.get(s)||null,t,e,r,n,i)),!0}return!1}function $m(t){var e=Ur(t.target);if(e!==null){var r=tn(e);if(r!==null){if(e=r.tag,e===13){if(e=zm(r),e!==null){t.blockedOn=e,Km(t.priority,function(){Hm(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function va(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Kl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Fl=n,r.target.dispatchEvent(n),Fl=null}else return e=Ms(r),e!==null&&Vp(e),t.blockedOn=r,!1;e.shift()}return!0}function Rh(t,e,r){va(t)&&r.delete(e)}function eE(){Vl=!1,cr!==null&&va(cr)&&(cr=null),ur!==null&&va(ur)&&(ur=null),lr!==null&&va(lr)&&(lr=null),ls.forEach(Rh),ps.forEach(Rh)}function ei(t,e){t.blockedOn===e&&(t.blockedOn=null,Vl||(Vl=!0,Ye.unstable_scheduleCallback(Ye.unstable_NormalPriority,eE)))}function ds(t){function e(i){return ei(i,t)}if(0<Zs.length){ei(Zs[0],t);for(var r=1;r<Zs.length;r++){var n=Zs[r];n.blockedOn===t&&(n.blockedOn=null)}}for(cr!==null&&ei(cr,t),ur!==null&&ei(ur,t),lr!==null&&ei(lr,t),ls.forEach(e),ps.forEach(e),r=0;r<nr.length;r++)n=nr[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<nr.length&&(r=nr[0],r.blockedOn===null);)$m(r),r.blockedOn===null&&nr.shift()}var wn=Qt.ReactCurrentBatchConfig,Na=!0;function tE(t,e,r,n){var i=$,s=wn.transition;wn.transition=null;try{$=1,Kp(t,e,r,n)}finally{$=i,wn.transition=s}}function rE(t,e,r,n){var i=$,s=wn.transition;wn.transition=null;try{$=4,Kp(t,e,r,n)}finally{$=i,wn.transition=s}}function Kp(t,e,r,n){if(Na){var i=Kl(t,e,r,n);if(i===null)Vu(t,e,n,za,r),Ph(t,n);else if(YR(i,t,e,r,n))n.stopPropagation();else if(Ph(t,n),e&4&&-1<ZR.indexOf(t)){for(;i!==null;){var s=Ms(i);if(s!==null&&Wm(s),s=Kl(t,e,r,n),s===null&&Vu(t,e,n,za,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else Vu(t,e,n,null,r)}}var za=null;function Kl(t,e,r,n){if(za=null,t=Up(n),t=Ur(t),t!==null)if(e=tn(t),e===null)t=null;else if(r=e.tag,r===13){if(t=zm(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return za=t,null}function Jm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(WR()){case Wp:return 1;case Bm:return 4;case ba:case HR:return 16;case Fm:return 536870912;default:return 16}default:return 16}}var or=null,$p=null,fa=null;function Qm(){if(fa)return fa;var t,e=$p,r=e.length,n,i="value"in or?or.value:or.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===i[s-n];n++);return fa=i.slice(t,1<n?1-n:void 0)}function ga(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ys(){return!0}function Eh(){return!1}function tt(t){function e(r,n,i,s,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ys:Eh,this.isPropagationStopped=Eh,this}return re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ys)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ys)},persist:function(){},isPersistent:Ys}),e}var Fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jp=tt(Fn),ks=re({},Fn,{view:0,detail:0}),nE=tt(ks),ju,Lu,ti,ic=re({},ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ti&&(ti&&t.type==="mousemove"?(ju=t.screenX-ti.screenX,Lu=t.screenY-ti.screenY):Lu=ju=0,ti=t),ju)},movementY:function(t){return"movementY"in t?t.movementY:Lu}}),wh=tt(ic),iE=re({},ic,{dataTransfer:0}),oE=tt(iE),sE=re({},ks,{relatedTarget:0}),xu=tt(sE),aE=re({},Fn,{animationName:0,elapsedTime:0,pseudoElement:0}),cE=tt(aE),uE=re({},Fn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lE=tt(uE),pE=re({},Fn,{data:0}),Ah=tt(pE),dE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=vE[t])?!!e[t]:!1}function Qp(){return fE}var gE=re({},ks,{key:function(t){if(t.key){var e=dE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ga(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qp,charCode:function(t){return t.type==="keypress"?ga(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ga(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),mE=tt(gE),yE=re({},ic,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ih=tt(yE),SE=re({},ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qp}),CE=tt(SE),PE=re({},Fn,{propertyName:0,elapsedTime:0,pseudoElement:0}),RE=tt(PE),EE=re({},ic,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wE=tt(EE),AE=[9,13,27,32],Gp=Vt&&"CompositionEvent"in window,Yo=null;Vt&&"documentMode"in document&&(Yo=document.documentMode);var IE=Vt&&"TextEvent"in window&&!Yo,Gm=Vt&&(!Gp||Yo&&8<Yo&&11>=Yo),Th=" ",_h=!1;function Xm(t,e){switch(t){case"keyup":return AE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var pn=!1;function TE(t,e){switch(t){case"compositionend":return Zm(e);case"keypress":return e.which!==32?null:(_h=!0,Th);case"textInput":return t=e.data,t===Th&&_h?null:t;default:return null}}function _E(t,e){if(pn)return t==="compositionend"||!Gp&&Xm(t,e)?(t=Qm(),fa=$p=or=null,pn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Gm&&e.locale!=="ko"?null:e.data;default:return null}}var OE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!OE[t.type]:e==="textarea"}function Ym(t,e,r,n){km(n),e=ja(e,"onChange"),0<e.length&&(r=new Jp("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var es=null,hs=null;function kE(t){ly(t,0)}function oc(t){var e=vn(t);if(Em(e))return t}function ME(t,e){if(t==="change")return e}var ey=!1;if(Vt){var Bu;if(Vt){var Fu="oninput"in document;if(!Fu){var kh=document.createElement("div");kh.setAttribute("oninput","return;"),Fu=typeof kh.oninput=="function"}Bu=Fu}else Bu=!1;ey=Bu&&(!document.documentMode||9<document.documentMode)}function Mh(){es&&(es.detachEvent("onpropertychange",ty),hs=es=null)}function ty(t){if(t.propertyName==="value"&&oc(hs)){var e=[];Ym(e,hs,t,Up(t)),Nm(kE,e)}}function bE(t,e,r){t==="focusin"?(Mh(),es=e,hs=r,es.attachEvent("onpropertychange",ty)):t==="focusout"&&Mh()}function DE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return oc(hs)}function NE(t,e){if(t==="click")return oc(e)}function zE(t,e){if(t==="input"||t==="change")return oc(e)}function jE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yt=typeof Object.is=="function"?Object.is:jE;function vs(t,e){if(yt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!_l.call(e,i)||!yt(t[i],e[i]))return!1}return!0}function bh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Dh(t,e){var r=bh(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=bh(r)}}function ry(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ry(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ny(){for(var t=window,e=Oa();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Oa(t.document)}return e}function Xp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function LE(t){var e=ny(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&ry(r.ownerDocument.documentElement,r)){if(n!==null&&Xp(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=Dh(r,s);var a=Dh(r,n);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var xE=Vt&&"documentMode"in document&&11>=document.documentMode,dn=null,$l=null,ts=null,Jl=!1;function Nh(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Jl||dn==null||dn!==Oa(n)||(n=dn,"selectionStart"in n&&Xp(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ts&&vs(ts,n)||(ts=n,n=ja($l,"onSelect"),0<n.length&&(e=new Jp("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=dn)))}function ea(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var hn={animationend:ea("Animation","AnimationEnd"),animationiteration:ea("Animation","AnimationIteration"),animationstart:ea("Animation","AnimationStart"),transitionend:ea("Transition","TransitionEnd")},qu={},iy={};Vt&&(iy=document.createElement("div").style,"AnimationEvent"in window||(delete hn.animationend.animation,delete hn.animationiteration.animation,delete hn.animationstart.animation),"TransitionEvent"in window||delete hn.transitionend.transition);function sc(t){if(qu[t])return qu[t];if(!hn[t])return t;var e=hn[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in iy)return qu[t]=e[r];return t}var oy=sc("animationend"),sy=sc("animationiteration"),ay=sc("animationstart"),cy=sc("transitionend"),uy=new Map,zh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(t,e){uy.set(t,e),en(e,[t])}for(var Uu=0;Uu<zh.length;Uu++){var Wu=zh[Uu],BE=Wu.toLowerCase(),FE=Wu[0].toUpperCase()+Wu.slice(1);Sr(BE,"on"+FE)}Sr(oy,"onAnimationEnd");Sr(sy,"onAnimationIteration");Sr(ay,"onAnimationStart");Sr("dblclick","onDoubleClick");Sr("focusin","onFocus");Sr("focusout","onBlur");Sr(cy,"onTransitionEnd");Tn("onMouseEnter",["mouseout","mouseover"]);Tn("onMouseLeave",["mouseout","mouseover"]);Tn("onPointerEnter",["pointerout","pointerover"]);Tn("onPointerLeave",["pointerout","pointerover"]);en("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));en("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));en("onBeforeInput",["compositionend","keypress","textInput","paste"]);en("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));en("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));en("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qo));function jh(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,BR(n,e,void 0,t),t.currentTarget=null}function ly(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==s&&i.isPropagationStopped())break e;jh(i,o,u),s=c}else for(a=0;a<n.length;a++){if(o=n[a],c=o.instance,u=o.currentTarget,o=o.listener,c!==s&&i.isPropagationStopped())break e;jh(i,o,u),s=c}}}if(Ma)throw t=Wl,Ma=!1,Wl=null,t}function G(t,e){var r=e[Yl];r===void 0&&(r=e[Yl]=new Set);var n=t+"__bubble";r.has(n)||(py(e,t,2,!1),r.add(n))}function Hu(t,e,r){var n=0;e&&(n|=4),py(r,t,n,e)}var ta="_reactListening"+Math.random().toString(36).slice(2);function fs(t){if(!t[ta]){t[ta]=!0,ym.forEach(function(r){r!=="selectionchange"&&(qE.has(r)||Hu(r,!1,t),Hu(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ta]||(e[ta]=!0,Hu("selectionchange",!1,e))}}function py(t,e,r,n){switch(Jm(e)){case 1:var i=tE;break;case 4:i=rE;break;default:i=Kp}r=i.bind(null,e,r,t),i=void 0,!Ul||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Vu(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Ur(o),a===null)return;if(c=a.tag,c===5||c===6){n=s=a;continue e}o=o.parentNode}}n=n.return}Nm(function(){var u=s,l=Up(r),p=[];e:{var d=uy.get(t);if(d!==void 0){var h=Jp,v=t;switch(t){case"keypress":if(ga(r)===0)break e;case"keydown":case"keyup":h=mE;break;case"focusin":v="focus",h=xu;break;case"focusout":v="blur",h=xu;break;case"beforeblur":case"afterblur":h=xu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=wh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=oE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=CE;break;case oy:case sy:case ay:h=cE;break;case cy:h=RE;break;case"scroll":h=nE;break;case"wheel":h=wE;break;case"copy":case"cut":case"paste":h=lE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Ih}var g=(e&4)!==0,y=!g&&t==="scroll",f=g?d!==null?d+"Capture":null:d;g=[];for(var m=u,S;m!==null;){S=m;var C=S.stateNode;if(S.tag===5&&C!==null&&(S=C,f!==null&&(C=us(m,f),C!=null&&g.push(gs(m,C,S)))),y)break;m=m.return}0<g.length&&(d=new h(d,v,null,r,l),p.push({event:d,listeners:g}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",d&&r!==Fl&&(v=r.relatedTarget||r.fromElement)&&(Ur(v)||v[Kt]))break e;if((h||d)&&(d=l.window===l?l:(d=l.ownerDocument)?d.defaultView||d.parentWindow:window,h?(v=r.relatedTarget||r.toElement,h=u,v=v?Ur(v):null,v!==null&&(y=tn(v),v!==y||v.tag!==5&&v.tag!==6)&&(v=null)):(h=null,v=u),h!==v)){if(g=wh,C="onMouseLeave",f="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(g=Ih,C="onPointerLeave",f="onPointerEnter",m="pointer"),y=h==null?d:vn(h),S=v==null?d:vn(v),d=new g(C,m+"leave",h,r,l),d.target=y,d.relatedTarget=S,C=null,Ur(l)===u&&(g=new g(f,m+"enter",v,r,l),g.target=S,g.relatedTarget=y,C=g),y=C,h&&v)t:{for(g=h,f=v,m=0,S=g;S;S=sn(S))m++;for(S=0,C=f;C;C=sn(C))S++;for(;0<m-S;)g=sn(g),m--;for(;0<S-m;)f=sn(f),S--;for(;m--;){if(g===f||f!==null&&g===f.alternate)break t;g=sn(g),f=sn(f)}g=null}else g=null;h!==null&&Lh(p,d,h,g,!1),v!==null&&y!==null&&Lh(p,y,v,g,!0)}}e:{if(d=u?vn(u):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var P=ME;else if(Oh(d))if(ey)P=zE;else{P=DE;var R=bE}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(P=NE);if(P&&(P=P(t,u))){Ym(p,P,r,l);break e}R&&R(t,d,u),t==="focusout"&&(R=d._wrapperState)&&R.controlled&&d.type==="number"&&zl(d,"number",d.value)}switch(R=u?vn(u):window,t){case"focusin":(Oh(R)||R.contentEditable==="true")&&(dn=R,$l=u,ts=null);break;case"focusout":ts=$l=dn=null;break;case"mousedown":Jl=!0;break;case"contextmenu":case"mouseup":case"dragend":Jl=!1,Nh(p,r,l);break;case"selectionchange":if(xE)break;case"keydown":case"keyup":Nh(p,r,l)}var A;if(Gp)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else pn?Xm(t,r)&&(w="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(w="onCompositionStart");w&&(Gm&&r.locale!=="ko"&&(pn||w!=="onCompositionStart"?w==="onCompositionEnd"&&pn&&(A=Qm()):(or=l,$p="value"in or?or.value:or.textContent,pn=!0)),R=ja(u,w),0<R.length&&(w=new Ah(w,t,null,r,l),p.push({event:w,listeners:R}),A?w.data=A:(A=Zm(r),A!==null&&(w.data=A)))),(A=IE?TE(t,r):_E(t,r))&&(u=ja(u,"onBeforeInput"),0<u.length&&(l=new Ah("onBeforeInput","beforeinput",null,r,l),p.push({event:l,listeners:u}),l.data=A))}ly(p,e)})}function gs(t,e,r){return{instance:t,listener:e,currentTarget:r}}function ja(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=us(t,r),s!=null&&n.unshift(gs(t,s,i)),s=us(t,e),s!=null&&n.push(gs(t,s,i))),t=t.return}return n}function sn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Lh(t,e,r,n,i){for(var s=e._reactName,a=[];r!==null&&r!==n;){var o=r,c=o.alternate,u=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&u!==null&&(o=u,i?(c=us(r,s),c!=null&&a.unshift(gs(r,c,o))):i||(c=us(r,s),c!=null&&a.push(gs(r,c,o)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var UE=/\r\n?/g,WE=/\u0000|\uFFFD/g;function xh(t){return(typeof t=="string"?t:""+t).replace(UE,`
`).replace(WE,"")}function ra(t,e,r){if(e=xh(e),xh(t)!==e&&r)throw Error(T(425))}function La(){}var Ql=null,Gl=null;function Xl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Zl=typeof setTimeout=="function"?setTimeout:void 0,HE=typeof clearTimeout=="function"?clearTimeout:void 0,Bh=typeof Promise=="function"?Promise:void 0,VE=typeof queueMicrotask=="function"?queueMicrotask:typeof Bh<"u"?function(t){return Bh.resolve(null).then(t).catch(KE)}:Zl;function KE(t){setTimeout(function(){throw t})}function Ku(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),ds(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);ds(e)}function pr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Fh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var qn=Math.random().toString(36).slice(2),At="__reactFiber$"+qn,ms="__reactProps$"+qn,Kt="__reactContainer$"+qn,Yl="__reactEvents$"+qn,$E="__reactListeners$"+qn,JE="__reactHandles$"+qn;function Ur(t){var e=t[At];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Kt]||r[At]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Fh(t);t!==null;){if(r=t[At])return r;t=Fh(t)}return e}t=r,r=t.parentNode}return null}function Ms(t){return t=t[At]||t[Kt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(T(33))}function ac(t){return t[ms]||null}var ep=[],fn=-1;function Cr(t){return{current:t}}function X(t){0>fn||(t.current=ep[fn],ep[fn]=null,fn--)}function Q(t,e){fn++,ep[fn]=t.current,t.current=e}var yr={},je=Cr(yr),Ve=Cr(!1),$r=yr;function _n(t,e){var r=t.type.contextTypes;if(!r)return yr;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ke(t){return t=t.childContextTypes,t!=null}function xa(){X(Ve),X(je)}function qh(t,e,r){if(je.current!==yr)throw Error(T(168));Q(je,e),Q(Ve,r)}function dy(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(T(108,bR(t)||"Unknown",i));return re({},r,n)}function Ba(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||yr,$r=je.current,Q(je,t),Q(Ve,Ve.current),!0}function Uh(t,e,r){var n=t.stateNode;if(!n)throw Error(T(169));r?(t=dy(t,e,$r),n.__reactInternalMemoizedMergedChildContext=t,X(Ve),X(je),Q(je,t)):X(Ve),Q(Ve,r)}var xt=null,cc=!1,$u=!1;function hy(t){xt===null?xt=[t]:xt.push(t)}function QE(t){cc=!0,hy(t)}function Pr(){if(!$u&&xt!==null){$u=!0;var t=0,e=$;try{var r=xt;for($=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}xt=null,cc=!1}catch(i){throw xt!==null&&(xt=xt.slice(t+1)),xm(Wp,Pr),i}finally{$=e,$u=!1}}return null}var gn=[],mn=0,Fa=null,qa=0,it=[],ot=0,Jr=null,Ft=1,qt="";function Fr(t,e){gn[mn++]=qa,gn[mn++]=Fa,Fa=t,qa=e}function vy(t,e,r){it[ot++]=Ft,it[ot++]=qt,it[ot++]=Jr,Jr=t;var n=Ft;t=qt;var i=32-gt(n)-1;n&=~(1<<i),r+=1;var s=32-gt(e)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,Ft=1<<32-gt(e)+i|r<<i|n,qt=s+t}else Ft=1<<s|r<<i|n,qt=t}function Zp(t){t.return!==null&&(Fr(t,1),vy(t,1,0))}function Yp(t){for(;t===Fa;)Fa=gn[--mn],gn[mn]=null,qa=gn[--mn],gn[mn]=null;for(;t===Jr;)Jr=it[--ot],it[ot]=null,qt=it[--ot],it[ot]=null,Ft=it[--ot],it[ot]=null}var Ze=null,Xe=null,Z=!1,ft=null;function fy(t,e){var r=st(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Wh(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ze=t,Xe=pr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ze=t,Xe=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Jr!==null?{id:Ft,overflow:qt}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=st(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Ze=t,Xe=null,!0):!1;default:return!1}}function tp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function rp(t){if(Z){var e=Xe;if(e){var r=e;if(!Wh(t,e)){if(tp(t))throw Error(T(418));e=pr(r.nextSibling);var n=Ze;e&&Wh(t,e)?fy(n,r):(t.flags=t.flags&-4097|2,Z=!1,Ze=t)}}else{if(tp(t))throw Error(T(418));t.flags=t.flags&-4097|2,Z=!1,Ze=t}}}function Hh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ze=t}function na(t){if(t!==Ze)return!1;if(!Z)return Hh(t),Z=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Xl(t.type,t.memoizedProps)),e&&(e=Xe)){if(tp(t))throw gy(),Error(T(418));for(;e;)fy(t,e),e=pr(e.nextSibling)}if(Hh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(T(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Xe=pr(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Xe=null}}else Xe=Ze?pr(t.stateNode.nextSibling):null;return!0}function gy(){for(var t=Xe;t;)t=pr(t.nextSibling)}function On(){Xe=Ze=null,Z=!1}function ed(t){ft===null?ft=[t]:ft.push(t)}var GE=Qt.ReactCurrentBatchConfig;function ht(t,e){if(t&&t.defaultProps){e=re({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var Ua=Cr(null),Wa=null,yn=null,td=null;function rd(){td=yn=Wa=null}function nd(t){var e=Ua.current;X(Ua),t._currentValue=e}function np(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function An(t,e){Wa=t,td=yn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(He=!0),t.firstContext=null)}function ut(t){var e=t._currentValue;if(td!==t)if(t={context:t,memoizedValue:e,next:null},yn===null){if(Wa===null)throw Error(T(308));yn=t,Wa.dependencies={lanes:0,firstContext:t}}else yn=yn.next=t;return e}var Wr=null;function id(t){Wr===null?Wr=[t]:Wr.push(t)}function my(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,id(e)):(r.next=i.next,i.next=r),e.interleaved=r,$t(t,n)}function $t(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var er=!1;function od(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ut(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function dr(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,K&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,$t(t,r)}return i=n.interleaved,i===null?(e.next=e,id(n)):(e.next=i.next,i.next=e),n.interleaved=e,$t(t,r)}function ma(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Hp(t,r)}}function Vh(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Ha(t,e,r,n){var i=t.updateQueue;er=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,u=c.next;c.next=null,a===null?s=u:a.next=u,a=c;var l=t.alternate;l!==null&&(l=l.updateQueue,o=l.lastBaseUpdate,o!==a&&(o===null?l.firstBaseUpdate=u:o.next=u,l.lastBaseUpdate=c))}if(s!==null){var p=i.baseState;a=0,l=u=c=null,o=s;do{var d=o.lane,h=o.eventTime;if((n&d)===d){l!==null&&(l=l.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=t,g=o;switch(d=e,h=r,g.tag){case 1:if(v=g.payload,typeof v=="function"){p=v.call(h,p,d);break e}p=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=g.payload,d=typeof v=="function"?v.call(h,p,d):v,d==null)break e;p=re({},p,d);break e;case 2:er=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[o]:d.push(o))}else h={eventTime:h,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},l===null?(u=l=h,c=p):l=l.next=h,a|=d;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;d=o,o=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(l===null&&(c=p),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=l,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Gr|=a,t.lanes=a,t.memoizedState=p}}function Kh(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(T(191,i));i.call(n)}}}var Sy=new mm.Component().refs;function ip(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:re({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var uc={isMounted:function(t){return(t=t._reactInternals)?tn(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Be(),i=vr(t),s=Ut(n,i);s.payload=e,r!=null&&(s.callback=r),e=dr(t,s,i),e!==null&&(mt(e,t,i,n),ma(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Be(),i=vr(t),s=Ut(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=dr(t,s,i),e!==null&&(mt(e,t,i,n),ma(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Be(),n=vr(t),i=Ut(r,n);i.tag=2,e!=null&&(i.callback=e),e=dr(t,i,n),e!==null&&(mt(e,t,n,r),ma(e,t,n))}};function $h(t,e,r,n,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,a):e.prototype&&e.prototype.isPureReactComponent?!vs(r,n)||!vs(i,s):!0}function Cy(t,e,r){var n=!1,i=yr,s=e.contextType;return typeof s=="object"&&s!==null?s=ut(s):(i=Ke(e)?$r:je.current,n=e.contextTypes,s=(n=n!=null)?_n(t,i):yr),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=uc,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Jh(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&uc.enqueueReplaceState(e,e.state,null)}function op(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=Sy,od(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ut(s):(s=Ke(e)?$r:je.current,i.context=_n(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ip(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&uc.enqueueReplaceState(i,i.state,null),Ha(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ri(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(T(309));var n=r.stateNode}if(!n)throw Error(T(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;o===Sy&&(o=i.refs={}),a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(T(284));if(!r._owner)throw Error(T(290,t))}return t}function ia(t,e){throw t=Object.prototype.toString.call(e),Error(T(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Qh(t){var e=t._init;return e(t._payload)}function Py(t){function e(f,m){if(t){var S=f.deletions;S===null?(f.deletions=[m],f.flags|=16):S.push(m)}}function r(f,m){if(!t)return null;for(;m!==null;)e(f,m),m=m.sibling;return null}function n(f,m){for(f=new Map;m!==null;)m.key!==null?f.set(m.key,m):f.set(m.index,m),m=m.sibling;return f}function i(f,m){return f=fr(f,m),f.index=0,f.sibling=null,f}function s(f,m,S){return f.index=S,t?(S=f.alternate,S!==null?(S=S.index,S<m?(f.flags|=2,m):S):(f.flags|=2,m)):(f.flags|=1048576,m)}function a(f){return t&&f.alternate===null&&(f.flags|=2),f}function o(f,m,S,C){return m===null||m.tag!==6?(m=el(S,f.mode,C),m.return=f,m):(m=i(m,S),m.return=f,m)}function c(f,m,S,C){var P=S.type;return P===ln?l(f,m,S.props.children,C,S.key):m!==null&&(m.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Yt&&Qh(P)===m.type)?(C=i(m,S.props),C.ref=ri(f,m,S),C.return=f,C):(C=Ea(S.type,S.key,S.props,null,f.mode,C),C.ref=ri(f,m,S),C.return=f,C)}function u(f,m,S,C){return m===null||m.tag!==4||m.stateNode.containerInfo!==S.containerInfo||m.stateNode.implementation!==S.implementation?(m=tl(S,f.mode,C),m.return=f,m):(m=i(m,S.children||[]),m.return=f,m)}function l(f,m,S,C,P){return m===null||m.tag!==7?(m=Kr(S,f.mode,C,P),m.return=f,m):(m=i(m,S),m.return=f,m)}function p(f,m,S){if(typeof m=="string"&&m!==""||typeof m=="number")return m=el(""+m,f.mode,S),m.return=f,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case $s:return S=Ea(m.type,m.key,m.props,null,f.mode,S),S.ref=ri(f,null,m),S.return=f,S;case un:return m=tl(m,f.mode,S),m.return=f,m;case Yt:var C=m._init;return p(f,C(m._payload),S)}if($o(m)||Xn(m))return m=Kr(m,f.mode,S,null),m.return=f,m;ia(f,m)}return null}function d(f,m,S,C){var P=m!==null?m.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return P!==null?null:o(f,m,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case $s:return S.key===P?c(f,m,S,C):null;case un:return S.key===P?u(f,m,S,C):null;case Yt:return P=S._init,d(f,m,P(S._payload),C)}if($o(S)||Xn(S))return P!==null?null:l(f,m,S,C,null);ia(f,S)}return null}function h(f,m,S,C,P){if(typeof C=="string"&&C!==""||typeof C=="number")return f=f.get(S)||null,o(m,f,""+C,P);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case $s:return f=f.get(C.key===null?S:C.key)||null,c(m,f,C,P);case un:return f=f.get(C.key===null?S:C.key)||null,u(m,f,C,P);case Yt:var R=C._init;return h(f,m,S,R(C._payload),P)}if($o(C)||Xn(C))return f=f.get(S)||null,l(m,f,C,P,null);ia(m,C)}return null}function v(f,m,S,C){for(var P=null,R=null,A=m,w=m=0,M=null;A!==null&&w<S.length;w++){A.index>w?(M=A,A=null):M=A.sibling;var b=d(f,A,S[w],C);if(b===null){A===null&&(A=M);break}t&&A&&b.alternate===null&&e(f,A),m=s(b,m,w),R===null?P=b:R.sibling=b,R=b,A=M}if(w===S.length)return r(f,A),Z&&Fr(f,w),P;if(A===null){for(;w<S.length;w++)A=p(f,S[w],C),A!==null&&(m=s(A,m,w),R===null?P=A:R.sibling=A,R=A);return Z&&Fr(f,w),P}for(A=n(f,A);w<S.length;w++)M=h(A,f,w,S[w],C),M!==null&&(t&&M.alternate!==null&&A.delete(M.key===null?w:M.key),m=s(M,m,w),R===null?P=M:R.sibling=M,R=M);return t&&A.forEach(function(J){return e(f,J)}),Z&&Fr(f,w),P}function g(f,m,S,C){var P=Xn(S);if(typeof P!="function")throw Error(T(150));if(S=P.call(S),S==null)throw Error(T(151));for(var R=P=null,A=m,w=m=0,M=null,b=S.next();A!==null&&!b.done;w++,b=S.next()){A.index>w?(M=A,A=null):M=A.sibling;var J=d(f,A,b.value,C);if(J===null){A===null&&(A=M);break}t&&A&&J.alternate===null&&e(f,A),m=s(J,m,w),R===null?P=J:R.sibling=J,R=J,A=M}if(b.done)return r(f,A),Z&&Fr(f,w),P;if(A===null){for(;!b.done;w++,b=S.next())b=p(f,b.value,C),b!==null&&(m=s(b,m,w),R===null?P=b:R.sibling=b,R=b);return Z&&Fr(f,w),P}for(A=n(f,A);!b.done;w++,b=S.next())b=h(A,f,w,b.value,C),b!==null&&(t&&b.alternate!==null&&A.delete(b.key===null?w:b.key),m=s(b,m,w),R===null?P=b:R.sibling=b,R=b);return t&&A.forEach(function(Rt){return e(f,Rt)}),Z&&Fr(f,w),P}function y(f,m,S,C){if(typeof S=="object"&&S!==null&&S.type===ln&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case $s:e:{for(var P=S.key,R=m;R!==null;){if(R.key===P){if(P=S.type,P===ln){if(R.tag===7){r(f,R.sibling),m=i(R,S.props.children),m.return=f,f=m;break e}}else if(R.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Yt&&Qh(P)===R.type){r(f,R.sibling),m=i(R,S.props),m.ref=ri(f,R,S),m.return=f,f=m;break e}r(f,R);break}else e(f,R);R=R.sibling}S.type===ln?(m=Kr(S.props.children,f.mode,C,S.key),m.return=f,f=m):(C=Ea(S.type,S.key,S.props,null,f.mode,C),C.ref=ri(f,m,S),C.return=f,f=C)}return a(f);case un:e:{for(R=S.key;m!==null;){if(m.key===R)if(m.tag===4&&m.stateNode.containerInfo===S.containerInfo&&m.stateNode.implementation===S.implementation){r(f,m.sibling),m=i(m,S.children||[]),m.return=f,f=m;break e}else{r(f,m);break}else e(f,m);m=m.sibling}m=tl(S,f.mode,C),m.return=f,f=m}return a(f);case Yt:return R=S._init,y(f,m,R(S._payload),C)}if($o(S))return v(f,m,S,C);if(Xn(S))return g(f,m,S,C);ia(f,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,m!==null&&m.tag===6?(r(f,m.sibling),m=i(m,S),m.return=f,f=m):(r(f,m),m=el(S,f.mode,C),m.return=f,f=m),a(f)):r(f,m)}return y}var kn=Py(!0),Ry=Py(!1),bs={},Ot=Cr(bs),ys=Cr(bs),Ss=Cr(bs);function Hr(t){if(t===bs)throw Error(T(174));return t}function sd(t,e){switch(Q(Ss,e),Q(ys,t),Q(Ot,bs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ll(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ll(e,t)}X(Ot),Q(Ot,e)}function Mn(){X(Ot),X(ys),X(Ss)}function Ey(t){Hr(Ss.current);var e=Hr(Ot.current),r=Ll(e,t.type);e!==r&&(Q(ys,t),Q(Ot,r))}function ad(t){ys.current===t&&(X(Ot),X(ys))}var ee=Cr(0);function Va(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ju=[];function cd(){for(var t=0;t<Ju.length;t++)Ju[t]._workInProgressVersionPrimary=null;Ju.length=0}var ya=Qt.ReactCurrentDispatcher,Qu=Qt.ReactCurrentBatchConfig,Qr=0,te=null,de=null,fe=null,Ka=!1,rs=!1,Cs=0,XE=0;function Te(){throw Error(T(321))}function ud(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!yt(t[r],e[r]))return!1;return!0}function ld(t,e,r,n,i,s){if(Qr=s,te=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ya.current=t===null||t.memoizedState===null?tw:rw,t=r(n,i),rs){s=0;do{if(rs=!1,Cs=0,25<=s)throw Error(T(301));s+=1,fe=de=null,e.updateQueue=null,ya.current=nw,t=r(n,i)}while(rs)}if(ya.current=$a,e=de!==null&&de.next!==null,Qr=0,fe=de=te=null,Ka=!1,e)throw Error(T(300));return t}function pd(){var t=Cs!==0;return Cs=0,t}function wt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fe===null?te.memoizedState=fe=t:fe=fe.next=t,fe}function lt(){if(de===null){var t=te.alternate;t=t!==null?t.memoizedState:null}else t=de.next;var e=fe===null?te.memoizedState:fe.next;if(e!==null)fe=e,de=t;else{if(t===null)throw Error(T(310));de=t,t={memoizedState:de.memoizedState,baseState:de.baseState,baseQueue:de.baseQueue,queue:de.queue,next:null},fe===null?te.memoizedState=fe=t:fe=fe.next=t}return fe}function Ps(t,e){return typeof e=="function"?e(t):e}function Gu(t){var e=lt(),r=e.queue;if(r===null)throw Error(T(311));r.lastRenderedReducer=t;var n=de,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var o=a=null,c=null,u=s;do{var l=u.lane;if((Qr&l)===l)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var p={lane:l,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=p,a=n):c=c.next=p,te.lanes|=l,Gr|=l}u=u.next}while(u!==null&&u!==s);c===null?a=n:c.next=o,yt(n,e.memoizedState)||(He=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,te.lanes|=s,Gr|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Xu(t){var e=lt(),r=e.queue;if(r===null)throw Error(T(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);yt(s,e.memoizedState)||(He=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function wy(){}function Ay(t,e){var r=te,n=lt(),i=e(),s=!yt(n.memoizedState,i);if(s&&(n.memoizedState=i,He=!0),n=n.queue,dd(_y.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||fe!==null&&fe.memoizedState.tag&1){if(r.flags|=2048,Rs(9,Ty.bind(null,r,n,i,e),void 0,null),ge===null)throw Error(T(349));Qr&30||Iy(r,e,i)}return i}function Iy(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=te.updateQueue,e===null?(e={lastEffect:null,stores:null},te.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Ty(t,e,r,n){e.value=r,e.getSnapshot=n,Oy(e)&&ky(t)}function _y(t,e,r){return r(function(){Oy(e)&&ky(t)})}function Oy(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!yt(t,r)}catch{return!0}}function ky(t){var e=$t(t,1);e!==null&&mt(e,t,1,-1)}function Gh(t){var e=wt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:t},e.queue=t,t=t.dispatch=ew.bind(null,te,t),[e.memoizedState,t]}function Rs(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=te.updateQueue,e===null?(e={lastEffect:null,stores:null},te.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function My(){return lt().memoizedState}function Sa(t,e,r,n){var i=wt();te.flags|=t,i.memoizedState=Rs(1|e,r,void 0,n===void 0?null:n)}function lc(t,e,r,n){var i=lt();n=n===void 0?null:n;var s=void 0;if(de!==null){var a=de.memoizedState;if(s=a.destroy,n!==null&&ud(n,a.deps)){i.memoizedState=Rs(e,r,s,n);return}}te.flags|=t,i.memoizedState=Rs(1|e,r,s,n)}function Xh(t,e){return Sa(8390656,8,t,e)}function dd(t,e){return lc(2048,8,t,e)}function by(t,e){return lc(4,2,t,e)}function Dy(t,e){return lc(4,4,t,e)}function Ny(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function zy(t,e,r){return r=r!=null?r.concat([t]):null,lc(4,4,Ny.bind(null,e,t),r)}function hd(){}function jy(t,e){var r=lt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&ud(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Ly(t,e){var r=lt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&ud(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function xy(t,e,r){return Qr&21?(yt(r,e)||(r=qm(),te.lanes|=r,Gr|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,He=!0),t.memoizedState=r)}function ZE(t,e){var r=$;$=r!==0&&4>r?r:4,t(!0);var n=Qu.transition;Qu.transition={};try{t(!1),e()}finally{$=r,Qu.transition=n}}function By(){return lt().memoizedState}function YE(t,e,r){var n=vr(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Fy(t))qy(e,r);else if(r=my(t,e,r,n),r!==null){var i=Be();mt(r,t,n,i),Uy(r,e,n)}}function ew(t,e,r){var n=vr(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Fy(t))qy(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,r);if(i.hasEagerState=!0,i.eagerState=o,yt(o,a)){var c=e.interleaved;c===null?(i.next=i,id(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}r=my(t,e,i,n),r!==null&&(i=Be(),mt(r,t,n,i),Uy(r,e,n))}}function Fy(t){var e=t.alternate;return t===te||e!==null&&e===te}function qy(t,e){rs=Ka=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Uy(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Hp(t,r)}}var $a={readContext:ut,useCallback:Te,useContext:Te,useEffect:Te,useImperativeHandle:Te,useInsertionEffect:Te,useLayoutEffect:Te,useMemo:Te,useReducer:Te,useRef:Te,useState:Te,useDebugValue:Te,useDeferredValue:Te,useTransition:Te,useMutableSource:Te,useSyncExternalStore:Te,useId:Te,unstable_isNewReconciler:!1},tw={readContext:ut,useCallback:function(t,e){return wt().memoizedState=[t,e===void 0?null:e],t},useContext:ut,useEffect:Xh,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Sa(4194308,4,Ny.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Sa(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sa(4,2,t,e)},useMemo:function(t,e){var r=wt();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=wt();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=YE.bind(null,te,t),[n.memoizedState,t]},useRef:function(t){var e=wt();return t={current:t},e.memoizedState=t},useState:Gh,useDebugValue:hd,useDeferredValue:function(t){return wt().memoizedState=t},useTransition:function(){var t=Gh(!1),e=t[0];return t=ZE.bind(null,t[1]),wt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=te,i=wt();if(Z){if(r===void 0)throw Error(T(407));r=r()}else{if(r=e(),ge===null)throw Error(T(349));Qr&30||Iy(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,Xh(_y.bind(null,n,s,t),[t]),n.flags|=2048,Rs(9,Ty.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=wt(),e=ge.identifierPrefix;if(Z){var r=qt,n=Ft;r=(n&~(1<<32-gt(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Cs++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=XE++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},rw={readContext:ut,useCallback:jy,useContext:ut,useEffect:dd,useImperativeHandle:zy,useInsertionEffect:by,useLayoutEffect:Dy,useMemo:Ly,useReducer:Gu,useRef:My,useState:function(){return Gu(Ps)},useDebugValue:hd,useDeferredValue:function(t){var e=lt();return xy(e,de.memoizedState,t)},useTransition:function(){var t=Gu(Ps)[0],e=lt().memoizedState;return[t,e]},useMutableSource:wy,useSyncExternalStore:Ay,useId:By,unstable_isNewReconciler:!1},nw={readContext:ut,useCallback:jy,useContext:ut,useEffect:dd,useImperativeHandle:zy,useInsertionEffect:by,useLayoutEffect:Dy,useMemo:Ly,useReducer:Xu,useRef:My,useState:function(){return Xu(Ps)},useDebugValue:hd,useDeferredValue:function(t){var e=lt();return de===null?e.memoizedState=t:xy(e,de.memoizedState,t)},useTransition:function(){var t=Xu(Ps)[0],e=lt().memoizedState;return[t,e]},useMutableSource:wy,useSyncExternalStore:Ay,useId:By,unstable_isNewReconciler:!1};function bn(t,e){try{var r="",n=e;do r+=MR(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Zu(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function sp(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var iw=typeof WeakMap=="function"?WeakMap:Map;function Wy(t,e,r){r=Ut(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Qa||(Qa=!0,gp=n),sp(t,e)},r}function Hy(t,e,r){r=Ut(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){sp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){sp(t,e),typeof n!="function"&&(hr===null?hr=new Set([this]):hr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function Zh(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new iw;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=yw.bind(null,t,e,r),e.then(t,t))}function Yh(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ev(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Ut(-1,1),e.tag=2,dr(r,e,1))),r.lanes|=1),t)}var ow=Qt.ReactCurrentOwner,He=!1;function xe(t,e,r,n){e.child=t===null?Ry(e,null,r,n):kn(e,t.child,r,n)}function tv(t,e,r,n,i){r=r.render;var s=e.ref;return An(e,i),n=ld(t,e,r,n,s,i),r=pd(),t!==null&&!He?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Jt(t,e,i)):(Z&&r&&Zp(e),e.flags|=1,xe(t,e,n,i),e.child)}function rv(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!Pd(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,Vy(t,e,s,n,i)):(t=Ea(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:vs,r(a,n)&&t.ref===e.ref)return Jt(t,e,i)}return e.flags|=1,t=fr(s,n),t.ref=e.ref,t.return=e,e.child=t}function Vy(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(vs(s,n)&&t.ref===e.ref)if(He=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(He=!0);else return e.lanes=t.lanes,Jt(t,e,i)}return ap(t,e,r,n,i)}function Ky(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Q(Cn,Ge),Ge|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Q(Cn,Ge),Ge|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Q(Cn,Ge),Ge|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Q(Cn,Ge),Ge|=n;return xe(t,e,i,r),e.child}function $y(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function ap(t,e,r,n,i){var s=Ke(r)?$r:je.current;return s=_n(e,s),An(e,i),r=ld(t,e,r,n,s,i),n=pd(),t!==null&&!He?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Jt(t,e,i)):(Z&&n&&Zp(e),e.flags|=1,xe(t,e,r,i),e.child)}function nv(t,e,r,n,i){if(Ke(r)){var s=!0;Ba(e)}else s=!1;if(An(e,i),e.stateNode===null)Ca(t,e),Cy(e,r,n),op(e,r,n,i),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=ut(u):(u=Ke(r)?$r:je.current,u=_n(e,u));var l=r.getDerivedStateFromProps,p=typeof l=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||c!==u)&&Jh(e,a,n,u),er=!1;var d=e.memoizedState;a.state=d,Ha(e,n,a,i),c=e.memoizedState,o!==n||d!==c||Ve.current||er?(typeof l=="function"&&(ip(e,r,l,n),c=e.memoizedState),(o=er||$h(e,r,o,n,d,c,u))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),a.props=n,a.state=c,a.context=u,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,yy(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:ht(e.type,o),a.props=u,p=e.pendingProps,d=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=ut(c):(c=Ke(r)?$r:je.current,c=_n(e,c));var h=r.getDerivedStateFromProps;(l=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==p||d!==c)&&Jh(e,a,n,c),er=!1,d=e.memoizedState,a.state=d,Ha(e,n,a,i);var v=e.memoizedState;o!==p||d!==v||Ve.current||er?(typeof h=="function"&&(ip(e,r,h,n),v=e.memoizedState),(u=er||$h(e,r,u,n,d,v,c)||!1)?(l||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,v,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,v,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),a.props=n,a.state=v,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),n=!1)}return cp(t,e,r,n,s,i)}function cp(t,e,r,n,i,s){$y(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&Uh(e,r,!1),Jt(t,e,s);n=e.stateNode,ow.current=e;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=kn(e,t.child,null,s),e.child=kn(e,null,o,s)):xe(t,e,o,s),e.memoizedState=n.state,i&&Uh(e,r,!0),e.child}function Jy(t){var e=t.stateNode;e.pendingContext?qh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&qh(t,e.context,!1),sd(t,e.containerInfo)}function iv(t,e,r,n,i){return On(),ed(i),e.flags|=256,xe(t,e,r,n),e.child}var up={dehydrated:null,treeContext:null,retryLane:0};function lp(t){return{baseLanes:t,cachePool:null,transitions:null}}function Qy(t,e,r){var n=e.pendingProps,i=ee.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Q(ee,i&1),t===null)return rp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,s?(n=e.mode,s=e.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=hc(a,n,0,null),t=Kr(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=lp(r),e.memoizedState=up,t):vd(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return sw(t,e,a,n,o,i,r);if(s){s=n.fallback,a=e.mode,i=t.child,o=i.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=fr(i,c),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=fr(o,s):(s=Kr(s,a,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,a=t.child.memoizedState,a=a===null?lp(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~r,e.memoizedState=up,n}return s=t.child,t=s.sibling,n=fr(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function vd(t,e){return e=hc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function oa(t,e,r,n){return n!==null&&ed(n),kn(e,t.child,null,r),t=vd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function sw(t,e,r,n,i,s,a){if(r)return e.flags&256?(e.flags&=-257,n=Zu(Error(T(422))),oa(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=hc({mode:"visible",children:n.children},i,0,null),s=Kr(s,i,a,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&kn(e,t.child,null,a),e.child.memoizedState=lp(a),e.memoizedState=up,s);if(!(e.mode&1))return oa(t,e,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error(T(419)),n=Zu(s,n,void 0),oa(t,e,a,n)}if(o=(a&t.childLanes)!==0,He||o){if(n=ge,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,$t(t,i),mt(n,t,i,-1))}return Cd(),n=Zu(Error(T(421))),oa(t,e,a,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Sw.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Xe=pr(i.nextSibling),Ze=e,Z=!0,ft=null,t!==null&&(it[ot++]=Ft,it[ot++]=qt,it[ot++]=Jr,Ft=t.id,qt=t.overflow,Jr=e),e=vd(e,n.children),e.flags|=4096,e)}function ov(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),np(t.return,e,r)}function Yu(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function Gy(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(xe(t,e,n.children,r),n=ee.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ov(t,r,e);else if(t.tag===19)ov(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Q(ee,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Va(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Yu(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Va(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Yu(e,!0,r,null,s);break;case"together":Yu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ca(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Jt(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Gr|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(T(153));if(e.child!==null){for(t=e.child,r=fr(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=fr(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function aw(t,e,r){switch(e.tag){case 3:Jy(e),On();break;case 5:Ey(e);break;case 1:Ke(e.type)&&Ba(e);break;case 4:sd(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Q(Ua,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Q(ee,ee.current&1),e.flags|=128,null):r&e.child.childLanes?Qy(t,e,r):(Q(ee,ee.current&1),t=Jt(t,e,r),t!==null?t.sibling:null);Q(ee,ee.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Gy(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Q(ee,ee.current),n)break;return null;case 22:case 23:return e.lanes=0,Ky(t,e,r)}return Jt(t,e,r)}var Xy,pp,Zy,Yy;Xy=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};pp=function(){};Zy=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Hr(Ot.current);var s=null;switch(r){case"input":i=Dl(t,i),n=Dl(t,n),s=[];break;case"select":i=re({},i,{value:void 0}),n=re({},n,{value:void 0}),s=[];break;case"textarea":i=jl(t,i),n=jl(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=La)}xl(r,n);var a;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(as.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var c=n[u];if(o=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(s||(s=[]),s.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(as.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&G("scroll",t),s||o===c||(s=[])):(s=s||[]).push(u,c))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Yy=function(t,e,r,n){r!==n&&(e.flags|=4)};function ni(t,e){if(!Z)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function _e(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function cw(t,e,r){var n=e.pendingProps;switch(Yp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _e(e),null;case 1:return Ke(e.type)&&xa(),_e(e),null;case 3:return n=e.stateNode,Mn(),X(Ve),X(je),cd(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(na(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ft!==null&&(Sp(ft),ft=null))),pp(t,e),_e(e),null;case 5:ad(e);var i=Hr(Ss.current);if(r=e.type,t!==null&&e.stateNode!=null)Zy(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(T(166));return _e(e),null}if(t=Hr(Ot.current),na(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[At]=e,n[ms]=s,t=(e.mode&1)!==0,r){case"dialog":G("cancel",n),G("close",n);break;case"iframe":case"object":case"embed":G("load",n);break;case"video":case"audio":for(i=0;i<Qo.length;i++)G(Qo[i],n);break;case"source":G("error",n);break;case"img":case"image":case"link":G("error",n),G("load",n);break;case"details":G("toggle",n);break;case"input":vh(n,s),G("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},G("invalid",n);break;case"textarea":gh(n,s),G("invalid",n)}xl(r,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&ra(n.textContent,o,t),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&ra(n.textContent,o,t),i=["children",""+o]):as.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&G("scroll",n)}switch(r){case"input":Js(n),fh(n,s,!0);break;case"textarea":Js(n),mh(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=La)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Im(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[At]=e,t[ms]=n,Xy(t,e,!1,!1),e.stateNode=t;e:{switch(a=Bl(r,n),r){case"dialog":G("cancel",t),G("close",t),i=n;break;case"iframe":case"object":case"embed":G("load",t),i=n;break;case"video":case"audio":for(i=0;i<Qo.length;i++)G(Qo[i],t);i=n;break;case"source":G("error",t),i=n;break;case"img":case"image":case"link":G("error",t),G("load",t),i=n;break;case"details":G("toggle",t),i=n;break;case"input":vh(t,n),i=Dl(t,n),G("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=re({},n,{value:void 0}),G("invalid",t);break;case"textarea":gh(t,n),i=jl(t,n),G("invalid",t);break;default:i=n}xl(r,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var c=o[s];s==="style"?Om(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Tm(t,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&cs(t,c):typeof c=="number"&&cs(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(as.hasOwnProperty(s)?c!=null&&s==="onScroll"&&G("scroll",t):c!=null&&xp(t,s,c,a))}switch(r){case"input":Js(t),fh(t,n,!1);break;case"textarea":Js(t),mh(t);break;case"option":n.value!=null&&t.setAttribute("value",""+mr(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Pn(t,!!n.multiple,s,!1):n.defaultValue!=null&&Pn(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=La)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _e(e),null;case 6:if(t&&e.stateNode!=null)Yy(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(T(166));if(r=Hr(Ss.current),Hr(Ot.current),na(e)){if(n=e.stateNode,r=e.memoizedProps,n[At]=e,(s=n.nodeValue!==r)&&(t=Ze,t!==null))switch(t.tag){case 3:ra(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ra(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[At]=e,e.stateNode=n}return _e(e),null;case 13:if(X(ee),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Z&&Xe!==null&&e.mode&1&&!(e.flags&128))gy(),On(),e.flags|=98560,s=!1;else if(s=na(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(T(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(T(317));s[At]=e}else On(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_e(e),s=!1}else ft!==null&&(Sp(ft),ft=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||ee.current&1?he===0&&(he=3):Cd())),e.updateQueue!==null&&(e.flags|=4),_e(e),null);case 4:return Mn(),pp(t,e),t===null&&fs(e.stateNode.containerInfo),_e(e),null;case 10:return nd(e.type._context),_e(e),null;case 17:return Ke(e.type)&&xa(),_e(e),null;case 19:if(X(ee),s=e.memoizedState,s===null)return _e(e),null;if(n=(e.flags&128)!==0,a=s.rendering,a===null)if(n)ni(s,!1);else{if(he!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Va(t),a!==null){for(e.flags|=128,ni(s,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Q(ee,ee.current&1|2),e.child}t=t.sibling}s.tail!==null&&se()>Dn&&(e.flags|=128,n=!0,ni(s,!1),e.lanes=4194304)}else{if(!n)if(t=Va(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),ni(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Z)return _e(e),null}else 2*se()-s.renderingStartTime>Dn&&r!==1073741824&&(e.flags|=128,n=!0,ni(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(r=s.last,r!==null?r.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=se(),e.sibling=null,r=ee.current,Q(ee,n?r&1|2:r&1),e):(_e(e),null);case 22:case 23:return Sd(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Ge&1073741824&&(_e(e),e.subtreeFlags&6&&(e.flags|=8192)):_e(e),null;case 24:return null;case 25:return null}throw Error(T(156,e.tag))}function uw(t,e){switch(Yp(e),e.tag){case 1:return Ke(e.type)&&xa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Mn(),X(Ve),X(je),cd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ad(e),null;case 13:if(X(ee),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(T(340));On()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return X(ee),null;case 4:return Mn(),null;case 10:return nd(e.type._context),null;case 22:case 23:return Sd(),null;case 24:return null;default:return null}}var sa=!1,ze=!1,lw=typeof WeakSet=="function"?WeakSet:Set,O=null;function Sn(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ie(t,e,n)}else r.current=null}function dp(t,e,r){try{r()}catch(n){ie(t,e,n)}}var sv=!1;function pw(t,e){if(Ql=Na,t=ny(),Xp(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,o=-1,c=-1,u=0,l=0,p=t,d=null;t:for(;;){for(var h;p!==r||i!==0&&p.nodeType!==3||(o=a+i),p!==s||n!==0&&p.nodeType!==3||(c=a+n),p.nodeType===3&&(a+=p.nodeValue.length),(h=p.firstChild)!==null;)d=p,p=h;for(;;){if(p===t)break t;if(d===r&&++u===i&&(o=a),d===s&&++l===n&&(c=a),(h=p.nextSibling)!==null)break;p=d,d=p.parentNode}p=h}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Gl={focusedElem:t,selectionRange:r},Na=!1,O=e;O!==null;)if(e=O,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,O=t;else for(;O!==null;){e=O;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var g=v.memoizedProps,y=v.memoizedState,f=e.stateNode,m=f.getSnapshotBeforeUpdate(e.elementType===e.type?g:ht(e.type,g),y);f.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(C){ie(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,O=t;break}O=e.return}return v=sv,sv=!1,v}function ns(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&dp(e,r,s)}i=i.next}while(i!==n)}}function pc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function hp(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function eS(t){var e=t.alternate;e!==null&&(t.alternate=null,eS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[At],delete e[ms],delete e[Yl],delete e[$E],delete e[JE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tS(t){return t.tag===5||t.tag===3||t.tag===4}function av(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vp(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=La));else if(n!==4&&(t=t.child,t!==null))for(vp(t,e,r),t=t.sibling;t!==null;)vp(t,e,r),t=t.sibling}function fp(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(fp(t,e,r),t=t.sibling;t!==null;)fp(t,e,r),t=t.sibling}var Ce=null,vt=!1;function Xt(t,e,r){for(r=r.child;r!==null;)rS(t,e,r),r=r.sibling}function rS(t,e,r){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(nc,r)}catch{}switch(r.tag){case 5:ze||Sn(r,e);case 6:var n=Ce,i=vt;Ce=null,Xt(t,e,r),Ce=n,vt=i,Ce!==null&&(vt?(t=Ce,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Ce.removeChild(r.stateNode));break;case 18:Ce!==null&&(vt?(t=Ce,r=r.stateNode,t.nodeType===8?Ku(t.parentNode,r):t.nodeType===1&&Ku(t,r),ds(t)):Ku(Ce,r.stateNode));break;case 4:n=Ce,i=vt,Ce=r.stateNode.containerInfo,vt=!0,Xt(t,e,r),Ce=n,vt=i;break;case 0:case 11:case 14:case 15:if(!ze&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&dp(r,e,a),i=i.next}while(i!==n)}Xt(t,e,r);break;case 1:if(!ze&&(Sn(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){ie(r,e,o)}Xt(t,e,r);break;case 21:Xt(t,e,r);break;case 22:r.mode&1?(ze=(n=ze)||r.memoizedState!==null,Xt(t,e,r),ze=n):Xt(t,e,r);break;default:Xt(t,e,r)}}function cv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new lw),e.forEach(function(n){var i=Cw.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function dt(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Ce=o.stateNode,vt=!1;break e;case 3:Ce=o.stateNode.containerInfo,vt=!0;break e;case 4:Ce=o.stateNode.containerInfo,vt=!0;break e}o=o.return}if(Ce===null)throw Error(T(160));rS(s,a,i),Ce=null,vt=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){ie(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)nS(e,t),e=e.sibling}function nS(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(dt(e,t),Et(t),n&4){try{ns(3,t,t.return),pc(3,t)}catch(g){ie(t,t.return,g)}try{ns(5,t,t.return)}catch(g){ie(t,t.return,g)}}break;case 1:dt(e,t),Et(t),n&512&&r!==null&&Sn(r,r.return);break;case 5:if(dt(e,t),Et(t),n&512&&r!==null&&Sn(r,r.return),t.flags&32){var i=t.stateNode;try{cs(i,"")}catch(g){ie(t,t.return,g)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=r!==null?r.memoizedProps:s,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&wm(i,s),Bl(o,a);var u=Bl(o,s);for(a=0;a<c.length;a+=2){var l=c[a],p=c[a+1];l==="style"?Om(i,p):l==="dangerouslySetInnerHTML"?Tm(i,p):l==="children"?cs(i,p):xp(i,l,p,u)}switch(o){case"input":Nl(i,s);break;case"textarea":Am(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Pn(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?Pn(i,!!s.multiple,s.defaultValue,!0):Pn(i,!!s.multiple,s.multiple?[]:"",!1))}i[ms]=s}catch(g){ie(t,t.return,g)}}break;case 6:if(dt(e,t),Et(t),n&4){if(t.stateNode===null)throw Error(T(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){ie(t,t.return,g)}}break;case 3:if(dt(e,t),Et(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ds(e.containerInfo)}catch(g){ie(t,t.return,g)}break;case 4:dt(e,t),Et(t);break;case 13:dt(e,t),Et(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(md=se())),n&4&&cv(t);break;case 22:if(l=r!==null&&r.memoizedState!==null,t.mode&1?(ze=(u=ze)||l,dt(e,t),ze=u):dt(e,t),Et(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!l&&t.mode&1)for(O=t,l=t.child;l!==null;){for(p=O=l;O!==null;){switch(d=O,h=d.child,d.tag){case 0:case 11:case 14:case 15:ns(4,d,d.return);break;case 1:Sn(d,d.return);var v=d.stateNode;if(typeof v.componentWillUnmount=="function"){n=d,r=d.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(g){ie(n,r,g)}}break;case 5:Sn(d,d.return);break;case 22:if(d.memoizedState!==null){lv(p);continue}}h!==null?(h.return=d,O=h):lv(p)}l=l.sibling}e:for(l=null,p=t;;){if(p.tag===5){if(l===null){l=p;try{i=p.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=p.stateNode,c=p.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=_m("display",a))}catch(g){ie(t,t.return,g)}}}else if(p.tag===6){if(l===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(g){ie(t,t.return,g)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;l===p&&(l=null),p=p.return}l===p&&(l=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:dt(e,t),Et(t),n&4&&cv(t);break;case 21:break;default:dt(e,t),Et(t)}}function Et(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(tS(r)){var n=r;break e}r=r.return}throw Error(T(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(cs(i,""),n.flags&=-33);var s=av(t);fp(t,s,i);break;case 3:case 4:var a=n.stateNode.containerInfo,o=av(t);vp(t,o,a);break;default:throw Error(T(161))}}catch(c){ie(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function dw(t,e,r){O=t,iS(t)}function iS(t,e,r){for(var n=(t.mode&1)!==0;O!==null;){var i=O,s=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||sa;if(!a){var o=i.alternate,c=o!==null&&o.memoizedState!==null||ze;o=sa;var u=ze;if(sa=a,(ze=c)&&!u)for(O=i;O!==null;)a=O,c=a.child,a.tag===22&&a.memoizedState!==null?pv(i):c!==null?(c.return=a,O=c):pv(i);for(;s!==null;)O=s,iS(s),s=s.sibling;O=i,sa=o,ze=u}uv(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,O=s):uv(t)}}function uv(t){for(;O!==null;){var e=O;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ze||pc(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!ze)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:ht(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Kh(e,s,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Kh(e,a,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var l=u.memoizedState;if(l!==null){var p=l.dehydrated;p!==null&&ds(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}ze||e.flags&512&&hp(e)}catch(d){ie(e,e.return,d)}}if(e===t){O=null;break}if(r=e.sibling,r!==null){r.return=e.return,O=r;break}O=e.return}}function lv(t){for(;O!==null;){var e=O;if(e===t){O=null;break}var r=e.sibling;if(r!==null){r.return=e.return,O=r;break}O=e.return}}function pv(t){for(;O!==null;){var e=O;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{pc(4,e)}catch(c){ie(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(c){ie(e,i,c)}}var s=e.return;try{hp(e)}catch(c){ie(e,s,c)}break;case 5:var a=e.return;try{hp(e)}catch(c){ie(e,a,c)}}}catch(c){ie(e,e.return,c)}if(e===t){O=null;break}var o=e.sibling;if(o!==null){o.return=e.return,O=o;break}O=e.return}}var hw=Math.ceil,Ja=Qt.ReactCurrentDispatcher,fd=Qt.ReactCurrentOwner,at=Qt.ReactCurrentBatchConfig,K=0,ge=null,ue=null,Re=0,Ge=0,Cn=Cr(0),he=0,Es=null,Gr=0,dc=0,gd=0,is=null,We=null,md=0,Dn=1/0,Lt=null,Qa=!1,gp=null,hr=null,aa=!1,sr=null,Ga=0,os=0,mp=null,Pa=-1,Ra=0;function Be(){return K&6?se():Pa!==-1?Pa:Pa=se()}function vr(t){return t.mode&1?K&2&&Re!==0?Re&-Re:GE.transition!==null?(Ra===0&&(Ra=qm()),Ra):(t=$,t!==0||(t=window.event,t=t===void 0?16:Jm(t.type)),t):1}function mt(t,e,r,n){if(50<os)throw os=0,mp=null,Error(T(185));Os(t,r,n),(!(K&2)||t!==ge)&&(t===ge&&(!(K&2)&&(dc|=r),he===4&&ir(t,Re)),$e(t,n),r===1&&K===0&&!(e.mode&1)&&(Dn=se()+500,cc&&Pr()))}function $e(t,e){var r=t.callbackNode;GR(t,e);var n=Da(t,t===ge?Re:0);if(n===0)r!==null&&Ch(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Ch(r),e===1)t.tag===0?QE(dv.bind(null,t)):hy(dv.bind(null,t)),VE(function(){!(K&6)&&Pr()}),r=null;else{switch(Um(n)){case 1:r=Wp;break;case 4:r=Bm;break;case 16:r=ba;break;case 536870912:r=Fm;break;default:r=ba}r=dS(r,oS.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function oS(t,e){if(Pa=-1,Ra=0,K&6)throw Error(T(327));var r=t.callbackNode;if(In()&&t.callbackNode!==r)return null;var n=Da(t,t===ge?Re:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Xa(t,n);else{e=n;var i=K;K|=2;var s=aS();(ge!==t||Re!==e)&&(Lt=null,Dn=se()+500,Vr(t,e));do try{gw();break}catch(o){sS(t,o)}while(!0);rd(),Ja.current=s,K=i,ue!==null?e=0:(ge=null,Re=0,e=he)}if(e!==0){if(e===2&&(i=Hl(t),i!==0&&(n=i,e=yp(t,i))),e===1)throw r=Es,Vr(t,0),ir(t,n),$e(t,se()),r;if(e===6)ir(t,n);else{if(i=t.current.alternate,!(n&30)&&!vw(i)&&(e=Xa(t,n),e===2&&(s=Hl(t),s!==0&&(n=s,e=yp(t,s))),e===1))throw r=Es,Vr(t,0),ir(t,n),$e(t,se()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(T(345));case 2:qr(t,We,Lt);break;case 3:if(ir(t,n),(n&130023424)===n&&(e=md+500-se(),10<e)){if(Da(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Be(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Zl(qr.bind(null,t,We,Lt),e);break}qr(t,We,Lt);break;case 4:if(ir(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var a=31-gt(n);s=1<<a,a=e[a],a>i&&(i=a),n&=~s}if(n=i,n=se()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*hw(n/1960))-n,10<n){t.timeoutHandle=Zl(qr.bind(null,t,We,Lt),n);break}qr(t,We,Lt);break;case 5:qr(t,We,Lt);break;default:throw Error(T(329))}}}return $e(t,se()),t.callbackNode===r?oS.bind(null,t):null}function yp(t,e){var r=is;return t.current.memoizedState.isDehydrated&&(Vr(t,e).flags|=256),t=Xa(t,e),t!==2&&(e=We,We=r,e!==null&&Sp(e)),t}function Sp(t){We===null?We=t:We.push.apply(We,t)}function vw(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!yt(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ir(t,e){for(e&=~gd,e&=~dc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-gt(e),n=1<<r;t[r]=-1,e&=~n}}function dv(t){if(K&6)throw Error(T(327));In();var e=Da(t,0);if(!(e&1))return $e(t,se()),null;var r=Xa(t,e);if(t.tag!==0&&r===2){var n=Hl(t);n!==0&&(e=n,r=yp(t,n))}if(r===1)throw r=Es,Vr(t,0),ir(t,e),$e(t,se()),r;if(r===6)throw Error(T(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,qr(t,We,Lt),$e(t,se()),null}function yd(t,e){var r=K;K|=1;try{return t(e)}finally{K=r,K===0&&(Dn=se()+500,cc&&Pr())}}function Xr(t){sr!==null&&sr.tag===0&&!(K&6)&&In();var e=K;K|=1;var r=at.transition,n=$;try{if(at.transition=null,$=1,t)return t()}finally{$=n,at.transition=r,K=e,!(K&6)&&Pr()}}function Sd(){Ge=Cn.current,X(Cn)}function Vr(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,HE(r)),ue!==null)for(r=ue.return;r!==null;){var n=r;switch(Yp(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&xa();break;case 3:Mn(),X(Ve),X(je),cd();break;case 5:ad(n);break;case 4:Mn();break;case 13:X(ee);break;case 19:X(ee);break;case 10:nd(n.type._context);break;case 22:case 23:Sd()}r=r.return}if(ge=t,ue=t=fr(t.current,null),Re=Ge=e,he=0,Es=null,gd=dc=Gr=0,We=is=null,Wr!==null){for(e=0;e<Wr.length;e++)if(r=Wr[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var a=s.next;s.next=i,n.next=a}r.pending=n}Wr=null}return t}function sS(t,e){do{var r=ue;try{if(rd(),ya.current=$a,Ka){for(var n=te.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Ka=!1}if(Qr=0,fe=de=te=null,rs=!1,Cs=0,fd.current=null,r===null||r.return===null){he=1,Es=e,ue=null;break}e:{var s=t,a=r.return,o=r,c=e;if(e=Re,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,l=o,p=l.tag;if(!(l.mode&1)&&(p===0||p===11||p===15)){var d=l.alternate;d?(l.updateQueue=d.updateQueue,l.memoizedState=d.memoizedState,l.lanes=d.lanes):(l.updateQueue=null,l.memoizedState=null)}var h=Yh(a);if(h!==null){h.flags&=-257,ev(h,a,o,s,e),h.mode&1&&Zh(s,u,e),e=h,c=u;var v=e.updateQueue;if(v===null){var g=new Set;g.add(c),e.updateQueue=g}else v.add(c);break e}else{if(!(e&1)){Zh(s,u,e),Cd();break e}c=Error(T(426))}}else if(Z&&o.mode&1){var y=Yh(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),ev(y,a,o,s,e),ed(bn(c,o));break e}}s=c=bn(c,o),he!==4&&(he=2),is===null?is=[s]:is.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var f=Wy(s,c,e);Vh(s,f);break e;case 1:o=c;var m=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(hr===null||!hr.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=Hy(s,o,e);Vh(s,C);break e}}s=s.return}while(s!==null)}uS(r)}catch(P){e=P,ue===r&&r!==null&&(ue=r=r.return);continue}break}while(!0)}function aS(){var t=Ja.current;return Ja.current=$a,t===null?$a:t}function Cd(){(he===0||he===3||he===2)&&(he=4),ge===null||!(Gr&268435455)&&!(dc&268435455)||ir(ge,Re)}function Xa(t,e){var r=K;K|=2;var n=aS();(ge!==t||Re!==e)&&(Lt=null,Vr(t,e));do try{fw();break}catch(i){sS(t,i)}while(!0);if(rd(),K=r,Ja.current=n,ue!==null)throw Error(T(261));return ge=null,Re=0,he}function fw(){for(;ue!==null;)cS(ue)}function gw(){for(;ue!==null&&!qR();)cS(ue)}function cS(t){var e=pS(t.alternate,t,Ge);t.memoizedProps=t.pendingProps,e===null?uS(t):ue=e,fd.current=null}function uS(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=uw(r,e),r!==null){r.flags&=32767,ue=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{he=6,ue=null;return}}else if(r=cw(r,e,Ge),r!==null){ue=r;return}if(e=e.sibling,e!==null){ue=e;return}ue=e=t}while(e!==null);he===0&&(he=5)}function qr(t,e,r){var n=$,i=at.transition;try{at.transition=null,$=1,mw(t,e,r,n)}finally{at.transition=i,$=n}return null}function mw(t,e,r,n){do In();while(sr!==null);if(K&6)throw Error(T(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(T(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(XR(t,s),t===ge&&(ue=ge=null,Re=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||aa||(aa=!0,dS(ba,function(){return In(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=at.transition,at.transition=null;var a=$;$=1;var o=K;K|=4,fd.current=null,pw(t,r),nS(r,t),LE(Gl),Na=!!Ql,Gl=Ql=null,t.current=r,dw(r),UR(),K=o,$=a,at.transition=s}else t.current=r;if(aa&&(aa=!1,sr=t,Ga=i),s=t.pendingLanes,s===0&&(hr=null),VR(r.stateNode),$e(t,se()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Qa)throw Qa=!1,t=gp,gp=null,t;return Ga&1&&t.tag!==0&&In(),s=t.pendingLanes,s&1?t===mp?os++:(os=0,mp=t):os=0,Pr(),null}function In(){if(sr!==null){var t=Um(Ga),e=at.transition,r=$;try{if(at.transition=null,$=16>t?16:t,sr===null)var n=!1;else{if(t=sr,sr=null,Ga=0,K&6)throw Error(T(331));var i=K;for(K|=4,O=t.current;O!==null;){var s=O,a=s.child;if(O.flags&16){var o=s.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(O=u;O!==null;){var l=O;switch(l.tag){case 0:case 11:case 15:ns(8,l,s)}var p=l.child;if(p!==null)p.return=l,O=p;else for(;O!==null;){l=O;var d=l.sibling,h=l.return;if(eS(l),l===u){O=null;break}if(d!==null){d.return=h,O=d;break}O=h}}}var v=s.alternate;if(v!==null){var g=v.child;if(g!==null){v.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}O=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,O=a;else e:for(;O!==null;){if(s=O,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ns(9,s,s.return)}var f=s.sibling;if(f!==null){f.return=s.return,O=f;break e}O=s.return}}var m=t.current;for(O=m;O!==null;){a=O;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,O=S;else e:for(a=m;O!==null;){if(o=O,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:pc(9,o)}}catch(P){ie(o,o.return,P)}if(o===a){O=null;break e}var C=o.sibling;if(C!==null){C.return=o.return,O=C;break e}O=o.return}}if(K=i,Pr(),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(nc,t)}catch{}n=!0}return n}finally{$=r,at.transition=e}}return!1}function hv(t,e,r){e=bn(r,e),e=Wy(t,e,1),t=dr(t,e,1),e=Be(),t!==null&&(Os(t,1,e),$e(t,e))}function ie(t,e,r){if(t.tag===3)hv(t,t,r);else for(;e!==null;){if(e.tag===3){hv(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(hr===null||!hr.has(n))){t=bn(r,t),t=Hy(e,t,1),e=dr(e,t,1),t=Be(),e!==null&&(Os(e,1,t),$e(e,t));break}}e=e.return}}function yw(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Be(),t.pingedLanes|=t.suspendedLanes&r,ge===t&&(Re&r)===r&&(he===4||he===3&&(Re&130023424)===Re&&500>se()-md?Vr(t,0):gd|=r),$e(t,e)}function lS(t,e){e===0&&(t.mode&1?(e=Xs,Xs<<=1,!(Xs&130023424)&&(Xs=4194304)):e=1);var r=Be();t=$t(t,e),t!==null&&(Os(t,e,r),$e(t,r))}function Sw(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),lS(t,r)}function Cw(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(T(314))}n!==null&&n.delete(e),lS(t,r)}var pS;pS=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ve.current)He=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return He=!1,aw(t,e,r);He=!!(t.flags&131072)}else He=!1,Z&&e.flags&1048576&&vy(e,qa,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Ca(t,e),t=e.pendingProps;var i=_n(e,je.current);An(e,r),i=ld(null,e,n,t,i,r);var s=pd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ke(n)?(s=!0,Ba(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,od(e),i.updater=uc,e.stateNode=i,i._reactInternals=e,op(e,n,t,r),e=cp(null,e,n,!0,s,r)):(e.tag=0,Z&&s&&Zp(e),xe(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Ca(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=Rw(n),t=ht(n,t),i){case 0:e=ap(null,e,n,t,r);break e;case 1:e=nv(null,e,n,t,r);break e;case 11:e=tv(null,e,n,t,r);break e;case 14:e=rv(null,e,n,ht(n.type,t),r);break e}throw Error(T(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ht(n,i),ap(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ht(n,i),nv(t,e,n,i,r);case 3:e:{if(Jy(e),t===null)throw Error(T(387));n=e.pendingProps,s=e.memoizedState,i=s.element,yy(t,e),Ha(e,n,null,r);var a=e.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=bn(Error(T(423)),e),e=iv(t,e,n,r,i);break e}else if(n!==i){i=bn(Error(T(424)),e),e=iv(t,e,n,r,i);break e}else for(Xe=pr(e.stateNode.containerInfo.firstChild),Ze=e,Z=!0,ft=null,r=Ry(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(On(),n===i){e=Jt(t,e,r);break e}xe(t,e,n,r)}e=e.child}return e;case 5:return Ey(e),t===null&&rp(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,Xl(n,i)?a=null:s!==null&&Xl(n,s)&&(e.flags|=32),$y(t,e),xe(t,e,a,r),e.child;case 6:return t===null&&rp(e),null;case 13:return Qy(t,e,r);case 4:return sd(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=kn(e,null,n,r):xe(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ht(n,i),tv(t,e,n,i,r);case 7:return xe(t,e,e.pendingProps,r),e.child;case 8:return xe(t,e,e.pendingProps.children,r),e.child;case 12:return xe(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Q(Ua,n._currentValue),n._currentValue=a,s!==null)if(yt(s.value,a)){if(s.children===i.children&&!Ve.current){e=Jt(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=Ut(-1,r&-r),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var l=u.pending;l===null?c.next=c:(c.next=l.next,l.next=c),u.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),np(s.return,r,e),o.lanes|=r;break}c=c.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(T(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),np(a,r,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}xe(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,An(e,r),i=ut(i),n=n(i),e.flags|=1,xe(t,e,n,r),e.child;case 14:return n=e.type,i=ht(n,e.pendingProps),i=ht(n.type,i),rv(t,e,n,i,r);case 15:return Vy(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ht(n,i),Ca(t,e),e.tag=1,Ke(n)?(t=!0,Ba(e)):t=!1,An(e,r),Cy(e,n,i),op(e,n,i,r),cp(null,e,n,!0,t,r);case 19:return Gy(t,e,r);case 22:return Ky(t,e,r)}throw Error(T(156,e.tag))};function dS(t,e){return xm(t,e)}function Pw(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function st(t,e,r,n){return new Pw(t,e,r,n)}function Pd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Rw(t){if(typeof t=="function")return Pd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Fp)return 11;if(t===qp)return 14}return 2}function fr(t,e){var r=t.alternate;return r===null?(r=st(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ea(t,e,r,n,i,s){var a=2;if(n=t,typeof t=="function")Pd(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ln:return Kr(r.children,i,s,e);case Bp:a=8,i|=8;break;case Ol:return t=st(12,r,e,i|2),t.elementType=Ol,t.lanes=s,t;case kl:return t=st(13,r,e,i),t.elementType=kl,t.lanes=s,t;case Ml:return t=st(19,r,e,i),t.elementType=Ml,t.lanes=s,t;case Pm:return hc(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Sm:a=10;break e;case Cm:a=9;break e;case Fp:a=11;break e;case qp:a=14;break e;case Yt:a=16,n=null;break e}throw Error(T(130,t==null?t:typeof t,""))}return e=st(a,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function Kr(t,e,r,n){return t=st(7,t,n,e),t.lanes=r,t}function hc(t,e,r,n){return t=st(22,t,n,e),t.elementType=Pm,t.lanes=r,t.stateNode={isHidden:!1},t}function el(t,e,r){return t=st(6,t,null,e),t.lanes=r,t}function tl(t,e,r){return e=st(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ew(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zu(0),this.expirationTimes=zu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zu(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Rd(t,e,r,n,i,s,a,o,c){return t=new Ew(t,e,r,o,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=st(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},od(s),t}function ww(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:un,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function hS(t){if(!t)return yr;t=t._reactInternals;e:{if(tn(t)!==t||t.tag!==1)throw Error(T(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ke(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(T(171))}if(t.tag===1){var r=t.type;if(Ke(r))return dy(t,r,e)}return e}function vS(t,e,r,n,i,s,a,o,c){return t=Rd(r,n,!0,t,i,s,a,o,c),t.context=hS(null),r=t.current,n=Be(),i=vr(r),s=Ut(n,i),s.callback=e??null,dr(r,s,i),t.current.lanes=i,Os(t,i,n),$e(t,n),t}function vc(t,e,r,n){var i=e.current,s=Be(),a=vr(i);return r=hS(r),e.context===null?e.context=r:e.pendingContext=r,e=Ut(s,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=dr(i,e,a),t!==null&&(mt(t,i,a,s),ma(t,i,a)),a}function Za(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function vv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Ed(t,e){vv(t,e),(t=t.alternate)&&vv(t,e)}function Aw(){return null}var fS=typeof reportError=="function"?reportError:function(t){console.error(t)};function wd(t){this._internalRoot=t}fc.prototype.render=wd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(T(409));vc(t,e,null,null)};fc.prototype.unmount=wd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xr(function(){vc(null,t,null,null)}),e[Kt]=null}};function fc(t){this._internalRoot=t}fc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Vm();t={blockedOn:null,target:t,priority:e};for(var r=0;r<nr.length&&e!==0&&e<nr[r].priority;r++);nr.splice(r,0,t),r===0&&$m(t)}};function Ad(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function fv(){}function Iw(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var u=Za(a);s.call(u)}}var a=vS(e,n,t,0,null,!1,!1,"",fv);return t._reactRootContainer=a,t[Kt]=a.current,fs(t.nodeType===8?t.parentNode:t),Xr(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var u=Za(c);o.call(u)}}var c=Rd(t,0,!1,null,null,!1,!1,"",fv);return t._reactRootContainer=c,t[Kt]=c.current,fs(t.nodeType===8?t.parentNode:t),Xr(function(){vc(e,c,r,n)}),c}function mc(t,e,r,n,i){var s=r._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var c=Za(a);o.call(c)}}vc(e,a,t,i)}else a=Iw(r,e,t,i,n);return Za(a)}Wm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Jo(e.pendingLanes);r!==0&&(Hp(e,r|1),$e(e,se()),!(K&6)&&(Dn=se()+500,Pr()))}break;case 13:Xr(function(){var n=$t(t,1);if(n!==null){var i=Be();mt(n,t,1,i)}}),Ed(t,1)}};Vp=function(t){if(t.tag===13){var e=$t(t,134217728);if(e!==null){var r=Be();mt(e,t,134217728,r)}Ed(t,134217728)}};Hm=function(t){if(t.tag===13){var e=vr(t),r=$t(t,e);if(r!==null){var n=Be();mt(r,t,e,n)}Ed(t,e)}};Vm=function(){return $};Km=function(t,e){var r=$;try{return $=t,e()}finally{$=r}};ql=function(t,e,r){switch(e){case"input":if(Nl(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=ac(n);if(!i)throw Error(T(90));Em(n),Nl(n,i)}}}break;case"textarea":Am(t,r);break;case"select":e=r.value,e!=null&&Pn(t,!!r.multiple,e,!1)}};bm=yd;Dm=Xr;var Tw={usingClientEntryPoint:!1,Events:[Ms,vn,ac,km,Mm,yd]},ii={findFiberByHostInstance:Ur,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},_w={bundleType:ii.bundleType,version:ii.version,rendererPackageName:ii.rendererPackageName,rendererConfig:ii.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=jm(t),t===null?null:t.stateNode},findFiberByHostInstance:ii.findFiberByHostInstance||Aw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ca=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ca.isDisabled&&ca.supportsFiber)try{nc=ca.inject(_w),_t=ca}catch{}}et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tw;et.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ad(e))throw Error(T(200));return ww(t,e,null,r)};et.createRoot=function(t,e){if(!Ad(t))throw Error(T(299));var r=!1,n="",i=fS;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Rd(t,1,!1,null,null,r,!1,n,i),t[Kt]=e.current,fs(t.nodeType===8?t.parentNode:t),new wd(e)};et.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(T(188)):(t=Object.keys(t).join(","),Error(T(268,t)));return t=jm(e),t=t===null?null:t.stateNode,t};et.flushSync=function(t){return Xr(t)};et.hydrate=function(t,e,r){if(!gc(e))throw Error(T(200));return mc(null,t,e,!0,r)};et.hydrateRoot=function(t,e,r){if(!Ad(t))throw Error(T(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",a=fS;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=vS(e,null,t,1,r??null,i,!1,s,a),t[Kt]=e.current,fs(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new fc(e)};et.render=function(t,e,r){if(!gc(e))throw Error(T(200));return mc(null,t,e,!1,r)};et.unmountComponentAtNode=function(t){if(!gc(t))throw Error(T(40));return t._reactRootContainer?(Xr(function(){mc(null,null,t,!1,function(){t._reactRootContainer=null,t[Kt]=null})}),!0):!1};et.unstable_batchedUpdates=yd;et.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!gc(r))throw Error(T(200));if(t==null||t._reactInternals===void 0)throw Error(T(38));return mc(t,e,r,!1,n)};et.version="18.2.0-next-9e3b772b8-20220608";function gS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gS)}catch(t){console.error(t)}}gS(),vm.exports=et;var Ow=vm.exports,gv=Ow;Tl.createRoot=gv.createRoot,Tl.hydrateRoot=gv.hydrateRoot;let ua;const kw=new Uint8Array(16);function mS(){if(!ua&&(ua=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ua))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ua(kw)}const Mw=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function yc(t){return typeof t=="string"&&Mw.test(t)}const Se=[];for(let t=0;t<256;++t)Se.push((t+256).toString(16).slice(1));function Sc(t,e=0){return Se[t[e+0]]+Se[t[e+1]]+Se[t[e+2]]+Se[t[e+3]]+"-"+Se[t[e+4]]+Se[t[e+5]]+"-"+Se[t[e+6]]+Se[t[e+7]]+"-"+Se[t[e+8]]+Se[t[e+9]]+"-"+Se[t[e+10]]+Se[t[e+11]]+Se[t[e+12]]+Se[t[e+13]]+Se[t[e+14]]+Se[t[e+15]]}function bw(t,e=0){const r=Sc(t,e);if(!yc(r))throw TypeError("Stringified UUID is invalid");return r}let mv,rl,nl=0,il=0;function Dw(t,e,r){let n=e&&r||0;const i=e||new Array(16);t=t||{};let s=t.node||mv,a=t.clockseq!==void 0?t.clockseq:rl;if(s==null||a==null){const d=t.random||(t.rng||mS)();s==null&&(s=mv=[d[0]|1,d[1],d[2],d[3],d[4],d[5]]),a==null&&(a=rl=(d[6]<<8|d[7])&16383)}let o=t.msecs!==void 0?t.msecs:Date.now(),c=t.nsecs!==void 0?t.nsecs:il+1;const u=o-nl+(c-il)/1e4;if(u<0&&t.clockseq===void 0&&(a=a+1&16383),(u<0||o>nl)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");nl=o,il=c,rl=a,o+=122192928e5;const l=((o&268435455)*1e4+c)%4294967296;i[n++]=l>>>24&255,i[n++]=l>>>16&255,i[n++]=l>>>8&255,i[n++]=l&255;const p=o/4294967296*1e4&268435455;i[n++]=p>>>8&255,i[n++]=p&255,i[n++]=p>>>24&15|16,i[n++]=p>>>16&255,i[n++]=a>>>8|128,i[n++]=a&255;for(let d=0;d<6;++d)i[n+d]=s[d];return e||Sc(i)}function yS(t){if(!yc(t))throw TypeError("Invalid UUID");let e;const r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}function Nw(t){t=unescape(encodeURIComponent(t));const e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}const zw="6ba7b810-9dad-11d1-80b4-00c04fd430c8",jw="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function SS(t,e,r){function n(i,s,a,o){var c;if(typeof i=="string"&&(i=Nw(i)),typeof s=="string"&&(s=yS(s)),((c=s)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(s),u.set(i,s.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,a){o=o||0;for(let l=0;l<16;++l)a[o+l]=u[l];return a}return Sc(u)}try{n.name=t}catch{}return n.DNS=zw,n.URL=jw,n}function Lw(t){if(typeof t=="string"){const e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return xw(Bw(Fw(t),t.length*8))}function xw(t){const e=[],r=t.length*32,n="0123456789abcdef";for(let i=0;i<r;i+=8){const s=t[i>>5]>>>i%32&255,a=parseInt(n.charAt(s>>>4&15)+n.charAt(s&15),16);e.push(a)}return e}function CS(t){return(t+64>>>9<<4)+14+1}function Bw(t,e){t[e>>5]|=128<<e%32,t[CS(e)-1]=e;let r=1732584193,n=-271733879,i=-1732584194,s=271733878;for(let a=0;a<t.length;a+=16){const o=r,c=n,u=i,l=s;r=Oe(r,n,i,s,t[a],7,-680876936),s=Oe(s,r,n,i,t[a+1],12,-389564586),i=Oe(i,s,r,n,t[a+2],17,606105819),n=Oe(n,i,s,r,t[a+3],22,-1044525330),r=Oe(r,n,i,s,t[a+4],7,-176418897),s=Oe(s,r,n,i,t[a+5],12,1200080426),i=Oe(i,s,r,n,t[a+6],17,-1473231341),n=Oe(n,i,s,r,t[a+7],22,-45705983),r=Oe(r,n,i,s,t[a+8],7,1770035416),s=Oe(s,r,n,i,t[a+9],12,-1958414417),i=Oe(i,s,r,n,t[a+10],17,-42063),n=Oe(n,i,s,r,t[a+11],22,-1990404162),r=Oe(r,n,i,s,t[a+12],7,1804603682),s=Oe(s,r,n,i,t[a+13],12,-40341101),i=Oe(i,s,r,n,t[a+14],17,-1502002290),n=Oe(n,i,s,r,t[a+15],22,1236535329),r=ke(r,n,i,s,t[a+1],5,-165796510),s=ke(s,r,n,i,t[a+6],9,-1069501632),i=ke(i,s,r,n,t[a+11],14,643717713),n=ke(n,i,s,r,t[a],20,-373897302),r=ke(r,n,i,s,t[a+5],5,-701558691),s=ke(s,r,n,i,t[a+10],9,38016083),i=ke(i,s,r,n,t[a+15],14,-660478335),n=ke(n,i,s,r,t[a+4],20,-405537848),r=ke(r,n,i,s,t[a+9],5,568446438),s=ke(s,r,n,i,t[a+14],9,-1019803690),i=ke(i,s,r,n,t[a+3],14,-187363961),n=ke(n,i,s,r,t[a+8],20,1163531501),r=ke(r,n,i,s,t[a+13],5,-1444681467),s=ke(s,r,n,i,t[a+2],9,-51403784),i=ke(i,s,r,n,t[a+7],14,1735328473),n=ke(n,i,s,r,t[a+12],20,-1926607734),r=Me(r,n,i,s,t[a+5],4,-378558),s=Me(s,r,n,i,t[a+8],11,-2022574463),i=Me(i,s,r,n,t[a+11],16,1839030562),n=Me(n,i,s,r,t[a+14],23,-35309556),r=Me(r,n,i,s,t[a+1],4,-1530992060),s=Me(s,r,n,i,t[a+4],11,1272893353),i=Me(i,s,r,n,t[a+7],16,-155497632),n=Me(n,i,s,r,t[a+10],23,-1094730640),r=Me(r,n,i,s,t[a+13],4,681279174),s=Me(s,r,n,i,t[a],11,-358537222),i=Me(i,s,r,n,t[a+3],16,-722521979),n=Me(n,i,s,r,t[a+6],23,76029189),r=Me(r,n,i,s,t[a+9],4,-640364487),s=Me(s,r,n,i,t[a+12],11,-421815835),i=Me(i,s,r,n,t[a+15],16,530742520),n=Me(n,i,s,r,t[a+2],23,-995338651),r=be(r,n,i,s,t[a],6,-198630844),s=be(s,r,n,i,t[a+7],10,1126891415),i=be(i,s,r,n,t[a+14],15,-1416354905),n=be(n,i,s,r,t[a+5],21,-57434055),r=be(r,n,i,s,t[a+12],6,1700485571),s=be(s,r,n,i,t[a+3],10,-1894986606),i=be(i,s,r,n,t[a+10],15,-1051523),n=be(n,i,s,r,t[a+1],21,-2054922799),r=be(r,n,i,s,t[a+8],6,1873313359),s=be(s,r,n,i,t[a+15],10,-30611744),i=be(i,s,r,n,t[a+6],15,-1560198380),n=be(n,i,s,r,t[a+13],21,1309151649),r=be(r,n,i,s,t[a+4],6,-145523070),s=be(s,r,n,i,t[a+11],10,-1120210379),i=be(i,s,r,n,t[a+2],15,718787259),n=be(n,i,s,r,t[a+9],21,-343485551),r=ar(r,o),n=ar(n,c),i=ar(i,u),s=ar(s,l)}return[r,n,i,s]}function Fw(t){if(t.length===0)return[];const e=t.length*8,r=new Uint32Array(CS(e));for(let n=0;n<e;n+=8)r[n>>5]|=(t[n/8]&255)<<n%32;return r}function ar(t,e){const r=(t&65535)+(e&65535);return(t>>16)+(e>>16)+(r>>16)<<16|r&65535}function qw(t,e){return t<<e|t>>>32-e}function Cc(t,e,r,n,i,s){return ar(qw(ar(ar(e,t),ar(n,s)),i),r)}function Oe(t,e,r,n,i,s,a){return Cc(e&r|~e&n,t,e,i,s,a)}function ke(t,e,r,n,i,s,a){return Cc(e&n|r&~n,t,e,i,s,a)}function Me(t,e,r,n,i,s,a){return Cc(e^r^n,t,e,i,s,a)}function be(t,e,r,n,i,s,a){return Cc(r^(e|~n),t,e,i,s,a)}const Uw=SS("v3",48,Lw),Ww=Uw,Hw=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),yv={randomUUID:Hw};function Cp(t,e,r){if(yv.randomUUID&&!e&&!t)return yv.randomUUID();t=t||{};const n=t.random||(t.rng||mS)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return Sc(n)}function Vw(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:return e^r^n;case 2:return e&r^e&n^r&n;case 3:return e^r^n}}function ol(t,e){return t<<e|t>>>32-e}function Kw(t){const e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){const a=unescape(encodeURIComponent(t));t=[];for(let o=0;o<a.length;++o)t.push(a.charCodeAt(o))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);const n=t.length/4+2,i=Math.ceil(n/16),s=new Array(i);for(let a=0;a<i;++a){const o=new Uint32Array(16);for(let c=0;c<16;++c)o[c]=t[a*64+c*4]<<24|t[a*64+c*4+1]<<16|t[a*64+c*4+2]<<8|t[a*64+c*4+3];s[a]=o}s[i-1][14]=(t.length-1)*8/Math.pow(2,32),s[i-1][14]=Math.floor(s[i-1][14]),s[i-1][15]=(t.length-1)*8&4294967295;for(let a=0;a<i;++a){const o=new Uint32Array(80);for(let h=0;h<16;++h)o[h]=s[a][h];for(let h=16;h<80;++h)o[h]=ol(o[h-3]^o[h-8]^o[h-14]^o[h-16],1);let c=r[0],u=r[1],l=r[2],p=r[3],d=r[4];for(let h=0;h<80;++h){const v=Math.floor(h/20),g=ol(c,5)+Vw(v,u,l,p)+d+e[v]+o[h]>>>0;d=p,p=l,l=ol(u,30)>>>0,u=c,c=g}r[0]=r[0]+c>>>0,r[1]=r[1]+u>>>0,r[2]=r[2]+l>>>0,r[3]=r[3]+p>>>0,r[4]=r[4]+d>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}const $w=SS("v5",80,Kw),Jw=$w,Qw="00000000-0000-0000-0000-000000000000";function Gw(t){if(!yc(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}const Xw=Object.freeze(Object.defineProperty({__proto__:null,NIL:Qw,parse:yS,stringify:bw,v1:Dw,v3:Ww,v4:Cp,v5:Jw,validate:yc,version:Gw},Symbol.toStringTag,{value:"Module"}));var PS={exports:{}},Zw="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Yw=Zw,eA=Yw;function RS(){}function ES(){}ES.resetWarningCache=RS;var tA=function(){function t(n,i,s,a,o,c){if(c!==eA){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:ES,resetWarningCache:RS};return r.PropTypes=r,r};PS.exports=tA();var rA=PS.exports;const Bt=rm(rA),nA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAB2AAAAdgB+lymcgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAiZSURBVHiczZtrcFXVFcd/69ybm2BIYkISKAoqj0QhQAlFWlSqLRAKdNQiHcKU90BtHXwUGbEfOplObS2IRRjqIBZCyySUdJQZWoaXQwVDWxpAHnGMtYAi75AHCY/k5p7VDycJhLzOvWff0P/Mmrn3nL3X/u9191577bX3FaKNHZpOgDHAYAseVCEDJRm4G+jeWKoWqEKoFJsyGz4FSgmyjxy5GE16EhWtu3WkZZELjAMGe2hHgVJgpy0U8oSUmKLYBHMG2KaJViwLLGWuwkPG9N4CgU9sYb0dyxoelRpDOj1iu6YELF5QWAgke6fkCpWirKwP8haTpdKLosgNoCoxO5hhCW8opHkh4QEVIvyybj+ryBM7EgURGSB2uw5QZYPA6EjqRwHFKLPqJsp/w60YtgG6bdWnsViH48X/n1CDsuD6ZNkUTiX3BshTK/4bLFd4MWxqXQgR3rz6bxa7nRLuDLBZA/Fx5AO5Hrh1JQqunmM2P5ZgZwU7N8BmDSTE8T7KRCPUug5/qznP050ZoWMDqEri++QjzDRKretQeOUIP+poOvg7qp34Hm8KzETNMfIJjEh2JDXWeXapDg5WwqFKCBlsC8hNyuJMNSxur0C7IyClSKeqsNkUk4AF0/rCswOgR6DtMuV18Pbn8OfTEIxoVW8X0yufkcK2XrRpgKRN2t9ncRBIMtF6WiysHglDXS6cRyrhuRLHIIZQHfKRXT1FTtz+wmpVVFX88EexSRIbvEqKHwpGu+88wLBkp06yz3v7jZLkC5KPaqsfvJUBUguZZymjLQUT8rsR0Cfefeeb0Dce3hhhhoOl4FMeSyts7cxbWOTezZpSH6QMSA2fcmuM7Q0rRnnTsfCfsOecCTYAXKyvJ7NqjlQ1PWgxAhqCvChKqiiYkJkDvDOePcAMl0ZJD8Tw/K36m0dAykZNjLU5haEtbXIsfDDZWfa8IKTwna1QVW+CFQAVwSD3l89z8gnNIyCugQVik2zI6TAwwXvnwdExMMGYM0RsUmL9zG/S32wAgVkGh1pzkGMCqXFGpwFiM6+FAfqs15FWiCzLBlNyo9NtiHtcrzfHy3JGwaD73tXh0BgKW0FyW6+Q3nDeSMbOwcVaZ/iahK1MBw437QXGi9kYnBNVcPk69OjmTU/FDUeXaX4CYwH8/d/WdNtmkFn1Dnadgmke88PbTwChtkJWzxiWsUZTLVsYI4oYdTKNkn8UrnpYvq4FYeMx87waRRqUMZYvRJbBJaaFVF+D14qJaDetwOv7ofJadLiJDRJisF9sMqNzPOTgwxOwOh5+OhIslw3ZCqsPwAefR2Xo34SQ6RdlYDTbANh0FL6qgpcegZ6dbIzO18LyYvjHaaJ0bncLlAy/hEiNfktQfApKvoKJGfDtB2BILwj4nHd1DXD8Avz9JGwrg/pQF3TeQarfUhJMprzaQ4wPhqRBchzU1sGJCrgn0Xl35orzLCXOKXPsPDQYXvfbQYIMWq51QDtJKu/omQBTh8K4DEiKc1en+gbs/Az+cgQu1EaLGQB1MnhZdAwQH4A5o+DJLPBH6MkabNhyDPIPeFtOO0CdZC3Vy0CKSa2Z6fCLHPiakYwiXKiBX+2EUnOJkSaUy9Df6CmE+0xpfKQfvJoDgQ4T7uGjIQSv74K9/zGq9qTfUspVzRjg0QGw5HvOem84v49Y8Mp40Ab4KOwz4HZRbgGfmQgtH+wJi8Y7Wm2NjgAsynGmmKFwuMxvhSjzasZuAXh5AliW+V/+dlgWLJoAL230nnNQocxv2Rz3ynnaKEjpHv3ONyE1AX74MPxpn2dVpf56ZV/A2XtEFHz16A5js8DumsClGROGwY7DcCnyxIsN7LOO5slFy6Y00vTSpOGOgwpp1woCOV/3lBo7cjBPyi0AC3ZF4kT8Fjyc2fWdb5JvZjocInKAsLux72CHKIhkP53RC+Ljouf1O5P4OOifHlkuwNdAQbMBDrwmJZbN8XCH0cDed+7Xb5LMeyLKCn+y/9fyMdxyQUJgA8qycLxIrx5d5/nb5ZBC+AlT4Q9NH28GrCHWCPycMI7GkhNuBih3CslJhJsyrwDWNn1p3qcVL5UaUVaFM5Ri/BCy76zE+MMe/iuKl968Z9xiy6I+VlgN/AR1d/VVohDzhwtLwpoCFwJ+Vraof+uXj16XSquBJW496Z3y/reLW76EWLz7t1LdrgEA9qxgvaUUu7l1cfrsnV8FTp/tnGej7P1wBRtv728bu3ZRQjpLLA6iHV+S2rYT7roL+vbpcNhFDV986XBw4QSrxMectiZLu/H/dxfqM6IUdabZZ8HjT0B2tuMTugKqcOgQ7Nnjcg8iTNm9St5r+1UHyHlOlyv8zA2p+x+AcTmQkOimdOS4UgM7t8GXX7grL8rSHb+XV9p933F1lZxnWYcw201j/hjIHgnZoyAQ446gWwTroeRfcLgEGtznAQq+1ZMZeXntT5JOB+2IBRqTJmwB95el47rBoGGQlQ3dE9zWahu1NXD8EJR+DHU33NcT+OtF5QcH3/FyWboRj+epP/4saxTmuqfgaO91L/TLgN59ISWt8xbVhopLcO40nCiD82eI5HR14wWY21nn6ZxOC2oyaT5LUV4Om04jYmIhKQUSkyG2G8Q0TpNgEOquw5VKqK6AYORXZFWFZdvWssRteBS23/7+PH1KYR1d9w8xt7giyvyt6ySsC94RLVyT5mo/n5IPPBZJfeNQ9qqf2VvflZPhVvWwcqs8OYsZwDIgPXI9nlAh8OqWDayNYFMMeDKAg6dm690S4nkVXsDwEVsHuAy8FRPHyqJ3Wsb24cJY7DZ1qna3Y1mgylyEwab03objKqzz32BtUZEYOTeOSvA6ZZoOx2I6yjiEIUR+08UGjiLsspSCogInjWUSUY/ec3M1NSiMwWaQWjwkSgbOVGn993knW1OG8qlAqV/YV1go5dHk9z8VCWIcpbdtjAAAAABJRU5ErkJggg==",iA="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wAARCABVAFUDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD9UKKKSoJForyf9of4/aL+z34JbWtSikv7+5k+zabpNv8A6+9uG+6i1833fw/+MHxatE8RfF74vXfwj0i6+a38K+F5fssscZ52yzZBL/nXTToSq2t1OWviYYdNzf8AkfX3xK1rVvDvw/8AEOp6BZLqOt2djNNZWfUTSqhKrgepFfLH/BPb9of4o/HT/hLj4+gW6sbCVVtdQW0W12yk/NBtX0rk3/Zw+F7Ahv2iPiSR0IOug/8AtGs/R/2Vfg54dglh0v47eP8ATYpZDNJHZ6ssSu56sQsAy1essurKDjKnK/8AhZ4jzjC86kq0bf4kfoZk0tfBWn/s66eZx/wr39pzxtp2t5/cLq2pfaYZW9DH+7316F8Hv2jvGvgj4lWfwp+ONrbQeIL7jRPFViNtnq46bSMALJXnVsLUou0k0/NWZ6mHxtHE/wAOSfo7n1nRSc+1LXCeiFFFFAgqNpFjjZ24A5NP6V8+/tU/tBWXwh8K3ECXKRX08TMzn/ljGeM+5J4FdeFw08XVjTgcGOxkMDQlWqfJdW+iPKLXUbD45/tvaxq9zIL7w78NdI32MfWP7a5BLj6fzSuK17WNZ+L3jjcd1xeXs2y2hY4EaE/KOeAB3Nc9+wX440zxn8Wvirb2LMZNW0eOe3WQYJ2bUZal0++v/DGtJc27NaajZzZHy8oyn0PoR0NfqfDuFhCriI0rOcUlG/5/efh/GeNqyo4WVe6hPWSW/TQ2fHnw11n4b39vaawkP+kKWilt33K2OoyQDkVzEcJklWJV3u52rWh8VPi1q2vW7a34ilkvEso8CO1h+6pIyQBj0ya4Hwl8UtF8X6obbRnuppYk815jAwRD6ZOMGvvMPWqwoxp4qUfavttc/LcTg41qs6+BjJ4dd9/M9h8bfCHxF8PdNtNQ1WKIW9wQoMMm4o2MgGr/AMRLOT41fsq+KPtrmTxH4IUatpl+M+cpjBcAH1IVkrI8XfFLxH460+0stYvVmtrX5lVEALNjALEV0Ph++j8K/szfGHW70eXaSaVJBGzcB5PLcBR7kutfIZ5RrPLOfHW9qpK1vX/I+74XxVKOdqnlrl7Fx1T72Ppz9nX4pQfF/wCEXhnxGtytxfXFlEL3b2uAoEmR7tk16jX5efsN/tOaV4Lax8NeazwGFPtasO4J+ZP90Gv04s7yLULWK5gcSwyqHRlOQwIyCD6V+V5jgXhJqUdYS2f6H71leYrGRcJq047r9S3RUbMY8CivK5We05JOzKmr6lHpemXN3KwSKGNpGJ6AAZNfij+2l8XLrx98QLq1eZjCrmaRQO5HyKfolfrr8ftQOnfCnX5EJBeAxZ/3vlNfhB8SryTUPiBrczkuzXcigewJA/lX12UwVPCTqrdu3y6nxeaSdbMIUntBX+b0Rp/Bf4uaz8DfiNo/i/Q2DXVlJ88MhISeIgh42A9QWFfo/o/xe+AH7RMC62PGlr8PfEMwBvNP1qVbZQ/s0m1H9mVq87/Z3/ZZ8B/Bnwj4Z8bfFXRpPFGva4q3FnpMkIe2s4iNwZ42IDvgjrX3J4k/Z5+FfxKtLO51rwJoOpIsKiGWSwRJFjI4XcoBC+1YzxtXCzWIotxb0uuptLA4XMYywuISnbVp9LnzcvgX4O9/j14N/wDBpZ//AB+mQ/D34MW+fK+O3gyPudup2f8A8fr3Bf2JfgT0Hw10U/8AAX/xpW/Yk+BQ6/DTRB9Vf/Gtf9ZMwvf2z+5HEuEMoUbKirPfV/5nh83h/wCBuhqbzVPjl4bvLOLlobHUrZnb2AWR2P4V8s/tkftg6J8SvDtt8N/hrBJZ+BbOQPcXkiFGv3U5GA3IQHn5uSa/SHTP2Nvgdpd0l1bfDXQGmTp51v5yj8HJFcH+0f8ADf4M+OtT07wR4l8Ixw6pdxKltq2k2yQTWYPypiRcEgf3cEVk8yxOPqJVpSnbX/g2OmllOAyem54eMad9Ov3XPxs8N67c+HdYstQs5Wimt5FcMv1r9r/2L/igPiB8NYYzJ5j2qo0Z9I3HT32sGFfkN+0J8EdV/Z9+KGp+ENTk+0eTia0u9uBc27E7H9jwwPutfdn/AAS61qSS3NqxJTypoR+DI1ehW5cTgqke2qOV3w2Oo1V1fK/R/wDBP0YPzUUtFfDc1j7+ye6PPvjvpp1X4V6/Cg3stu0gH+7zivwi+JlnLonxI1dShLJdtIF/3m3D+df0KahZpqFnPbyAMsiFSDyCDX5FftEfDNPg5+0V4f8AEOoWhm0iz1WD7Xlcq8QkBUn1yvB+lfWZXNTwtSkt46/LqfGZpD2OYU6z0U1y38+h+kfwN1zw/wDG74I+CfEEtja6jDJYQ/JNEsginjXZJgHPRlNeeftGfHDUtD1RvDHh+5Nk0ag3N1Gf3ik8hF9DXm37O3ia3/Zc+OWsfCjV7uOLwL4pl/tfwfqTN+4zJybcNSftIaDc6R8UtTuJkbyb7bLC/QMNoUjPqCK7uG8LQxOYqGI1ildJ9zwuNMZiMHlXtMHpKTSk1vY5XRviZ4r0K/S8tdf1BplbJWWdpFf/AHgxIIrofHHx88WeNzDGL2TSbdUAMNjIU3tjkkjnB9KvfD/4B+KvEkek63bQ2jabI6yAyTc7Q3ORXsP7QXwb1vx3f6NLoFvan7PFIs3mS7Ou3Ffa4rHZNTx9ODhF73lp7tu6PzDBZbxDWyurVjUmtmo6+9fszwbwL8a/FHgjVYpf7Tub+xDAzWd5M0ile+0nO019qaXa6H40t9K8RHT7e5mMKzW1xNCrSRBgDwTyDXwDrvhu+8O6/caPdxj7fC4jeOM7huIBGCK+hfjB8aI/2Z/2edLs8/aPGuoWos9H0tcNNLcv3291Qtk/SvC4rwuFj7KthLKU+3Vdz6vgLFY2rKthsbdxh36M/Pn/AIKQfEe2+IX7S2qR6dtktdDtotKMi/xSqS7n6gvtr6W/4Je+HZYbE3jqVQwSSj6syr/7LXz3+0R8IP8AhAfDfwv8ASn7b8QNWmuNe8QTN80iyzFQFb9fyr9Gv2QPhiPh58MbUtF5Ut4qMoPB8oDCk+5yT+NfPc0aGXzl391eZ95Vg8TmNKmuj5n6I976UUDNFfGaH3GoL3rwj9qH4AWnxm8I3IS2SXUY4yu3p5qdSufXuD2Ne8U3cMHNdeGxE8LVVWG6OHGYSnjaLo1Pv7M/LPQvF2hv4bi+CHx4gkj0W3kMfhvxiAVm05xwqSMeUK8V3kXjzWfhLcWXwx+PMw1fwpefL4Z+I9vl1II+RZmHfGK+ovjv+zD4b+NWlXPmwR2+oSL80m3KSY6bh6+h6ivi3xH4I+Jf7Ofh++8I+KvC0vxR+D1x/rdKlJeWyXP37aYcxkehr6FOnUksRhJWl26p915Hy0vaQi8JmMeZPRS6NefZntjeLPHvwn1TStHGu48PMyNaXMMMT29xCTnKuQeoNd58fPjJrFhqmh2/gzXYnFwjiZLPypyzZUL2bFcN+y34l+Bfjb4RQ/D3SfG11fukkjw6Z4pnWHUrTcciKMcAhOn7vNel6P8ADn4ffs4xz+IvFnimwtmGfIu9Uljg2D/YUn5mr0f7QwVRxr4il+8hfTl0k31Z4TyfMqSlhMJWfsZ297m1gl0R4l4z+Iln8DdQtb/WbR/HHxm10r/ZPhe2UF43IwkkoQfLXJaleWf7O+sL8T/jNer47+OuqIDo3ha2IaPSwT8iqBkIF/vVyGk/Eiz/AOFieKLn9n3QtX8beNddupXuPHviKHzBZRu3+qtIyOAOxavbvgT+wxeQ64/iz4jahPq3iC8bzbqa5k8yeRj2J5Cr9K4ak3iJe3xcuWPbrbsl0R7eHpwwFP6tgoc8+/n3kzk/2afgX4j+MfxEv/iV8QiZtQv5A8zdI41BG23j9hX6D28KWcSQxqEjUBVUDAAFV9J0ez0LT4bOxt1trWJdsccYwAK0K8TG4x4qSUFaEdkfQ5fgHhFKpVfNUlu/0XkJzRS0V5bWp7OgU3bRRTW4IT3prRpIPnUNRRT2dkZL3tGeLfFH9jr4RfGOZrnX/BtnHqMgz/aOm7rS4z6s0ZG7/gWa4Twj/wAE3fgj4X1SO8n0XUPEUqY8tdb1B5o0/wCALtU/iKKK3jWqJWUjP2ULrQ+j9A8M6N4Vs4tO0TSrPSLGP7ltYwLDEv0VQBWvu60UVkryu2aqKjKyWgbqfRRSaRXcKKKKkD//2Q==";function wS({chat:t}){return j.jsxs("div",{className:"messsage_container",children:[t.userMessage?j.jsxs("div",{className:"user message_section flex justify-end",children:[j.jsxs("div",{className:"user_message_container py-2.5 rounded flex pl-3 pr-0 bg-[#a1ffbf]",children:[j.jsx("p",{children:t.userMessage}),j.jsx("p",{className:"triangle w-0 h-0 mt-[2px]"})]}),j.jsx("img",{src:nA,alt:"user icon",className:"h-[35px] w-[35px] ml-3 rounded-full mt-[3px]"})]}):null,t.botMessage?j.jsxs("div",{className:"message_section flex",children:[j.jsx("img",{src:iA,alt:"bot icon",className:"h-[35px] w-[35px] mr-3 rounded-full mt-[3px]"}),j.jsxs("div",{className:"bot_message_container py-2.5 rounded flex bg-[#a1deff] pr-3 pl-0",children:[j.jsx("p",{className:"triangle w-0 h-0 mt-[2px]"}),j.jsx("p",{children:t.botMessage})]})]}):null]})}wS.propTypes={chat:Bt.shape({userMessage:Bt.string,botMessage:Bt.string}).isRequired};function AS({chats:t}){const e=ve.useRef(null);return ve.useEffect(()=>{var r;(r=e.current)==null||r.scrollIntoView({behavior:"smooth"})},[t]),j.jsxs("div",{className:"border-r px-2 py-5 flex flex-col gap-2 overflow-auto lg:w-full border-t-white lg:h-36",children:[t==null?void 0:t.map(r=>j.jsx(wS,{chat:r},r.id)),j.jsx("div",{ref:e})]})}AS.propTypes={chats:Bt.arrayOf(Bt.shape({id:Bt.string.isRequired,userMessage:Bt.string,botMessage:Bt.string})).isRequired};const oA="/assets/Logo-CpEYKan4.png";function IS(t,e){return function(){return t.apply(e,arguments)}}const{toString:sA}=Object.prototype,{getPrototypeOf:Id}=Object,Pc=(t=>e=>{const r=sA.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),kt=t=>(t=t.toLowerCase(),e=>Pc(e)===t),Rc=t=>e=>typeof e===t,{isArray:Un}=Array,ws=Rc("undefined");function aA(t){return t!==null&&!ws(t)&&t.constructor!==null&&!ws(t.constructor)&&ct(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const TS=kt("ArrayBuffer");function cA(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&TS(t.buffer),e}const uA=Rc("string"),ct=Rc("function"),_S=Rc("number"),Ec=t=>t!==null&&typeof t=="object",lA=t=>t===!0||t===!1,wa=t=>{if(Pc(t)!=="object")return!1;const e=Id(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},pA=kt("Date"),dA=kt("File"),hA=kt("Blob"),vA=kt("FileList"),fA=t=>Ec(t)&&ct(t.pipe),gA=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ct(t.append)&&((e=Pc(t))==="formdata"||e==="object"&&ct(t.toString)&&t.toString()==="[object FormData]"))},mA=kt("URLSearchParams"),yA=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ds(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),Un(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{const s=r?Object.getOwnPropertyNames(t):Object.keys(t),a=s.length;let o;for(n=0;n<a;n++)o=s[n],e.call(null,t[o],o,t)}}function OS(t,e){e=e.toLowerCase();const r=Object.keys(t);let n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}const kS=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,MS=t=>!ws(t)&&t!==kS;function Pp(){const{caseless:t}=MS(this)&&this||{},e={},r=(n,i)=>{const s=t&&OS(e,i)||i;wa(e[s])&&wa(n)?e[s]=Pp(e[s],n):wa(n)?e[s]=Pp({},n):Un(n)?e[s]=n.slice():e[s]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&Ds(arguments[n],r);return e}const SA=(t,e,r,{allOwnKeys:n}={})=>(Ds(e,(i,s)=>{r&&ct(i)?t[s]=IS(i,r):t[s]=i},{allOwnKeys:n}),t),CA=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),PA=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},RA=(t,e,r,n)=>{let i,s,a;const o={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)a=i[s],(!n||n(a,t,e))&&!o[a]&&(e[a]=t[a],o[a]=!0);t=r!==!1&&Id(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},EA=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},wA=t=>{if(!t)return null;if(Un(t))return t;let e=t.length;if(!_S(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},AA=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Id(Uint8Array)),IA=(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=n.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},TA=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},_A=kt("HTMLFormElement"),OA=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),Sv=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),kA=kt("RegExp"),bS=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};Ds(r,(i,s)=>{let a;(a=e(i,s,t))!==!1&&(n[s]=a||i)}),Object.defineProperties(t,n)},MA=t=>{bS(t,(e,r)=>{if(ct(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(ct(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},bA=(t,e)=>{const r={},n=i=>{i.forEach(s=>{r[s]=!0})};return Un(t)?n(t):n(String(t).split(e)),r},DA=()=>{},NA=(t,e)=>(t=+t,Number.isFinite(t)?t:e),sl="abcdefghijklmnopqrstuvwxyz",Cv="0123456789",DS={DIGIT:Cv,ALPHA:sl,ALPHA_DIGIT:sl+sl.toUpperCase()+Cv},zA=(t=16,e=DS.ALPHA_DIGIT)=>{let r="";const{length:n}=e;for(;t--;)r+=e[Math.random()*n|0];return r};function jA(t){return!!(t&&ct(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const LA=t=>{const e=new Array(10),r=(n,i)=>{if(Ec(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;const s=Un(n)?[]:{};return Ds(n,(a,o)=>{const c=r(a,i+1);!ws(c)&&(s[o]=c)}),e[i]=void 0,s}}return n};return r(t,0)},xA=kt("AsyncFunction"),BA=t=>t&&(Ec(t)||ct(t))&&ct(t.then)&&ct(t.catch),E={isArray:Un,isArrayBuffer:TS,isBuffer:aA,isFormData:gA,isArrayBufferView:cA,isString:uA,isNumber:_S,isBoolean:lA,isObject:Ec,isPlainObject:wa,isUndefined:ws,isDate:pA,isFile:dA,isBlob:hA,isRegExp:kA,isFunction:ct,isStream:fA,isURLSearchParams:mA,isTypedArray:AA,isFileList:vA,forEach:Ds,merge:Pp,extend:SA,trim:yA,stripBOM:CA,inherits:PA,toFlatObject:RA,kindOf:Pc,kindOfTest:kt,endsWith:EA,toArray:wA,forEachEntry:IA,matchAll:TA,isHTMLForm:_A,hasOwnProperty:Sv,hasOwnProp:Sv,reduceDescriptors:bS,freezeMethods:MA,toObjectSet:bA,toCamelCase:OA,noop:DA,toFiniteNumber:NA,findKey:OS,global:kS,isContextDefined:MS,ALPHABET:DS,generateString:zA,isSpecCompliantForm:jA,toJSONObject:LA,isAsyncFn:xA,isThenable:BA};function V(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}E.inherits(V,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:E.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const NS=V.prototype,zS={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{zS[t]={value:t}});Object.defineProperties(V,zS);Object.defineProperty(NS,"isAxiosError",{value:!0});V.from=(t,e,r,n,i,s)=>{const a=Object.create(NS);return E.toFlatObject(t,a,function(c){return c!==Error.prototype},o=>o!=="isAxiosError"),V.call(a,t.message,e,r,n,i),a.cause=t,a.name=t.name,s&&Object.assign(a,s),a};const FA=null;function Rp(t){return E.isPlainObject(t)||E.isArray(t)}function jS(t){return E.endsWith(t,"[]")?t.slice(0,-2):t}function Pv(t,e,r){return t?t.concat(e).map(function(i,s){return i=jS(i),!r&&s?"["+i+"]":i}).join(r?".":""):e}function qA(t){return E.isArray(t)&&!t.some(Rp)}const UA=E.toFlatObject(E,{},null,function(e){return/^is[A-Z]/.test(e)});function wc(t,e,r){if(!E.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=E.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,y){return!E.isUndefined(y[g])});const n=r.metaTokens,i=r.visitor||l,s=r.dots,a=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&E.isSpecCompliantForm(e);if(!E.isFunction(i))throw new TypeError("visitor must be a function");function u(v){if(v===null)return"";if(E.isDate(v))return v.toISOString();if(!c&&E.isBlob(v))throw new V("Blob is not supported. Use a Buffer instead.");return E.isArrayBuffer(v)||E.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function l(v,g,y){let f=v;if(v&&!y&&typeof v=="object"){if(E.endsWith(g,"{}"))g=n?g:g.slice(0,-2),v=JSON.stringify(v);else if(E.isArray(v)&&qA(v)||(E.isFileList(v)||E.endsWith(g,"[]"))&&(f=E.toArray(v)))return g=jS(g),f.forEach(function(S,C){!(E.isUndefined(S)||S===null)&&e.append(a===!0?Pv([g],C,s):a===null?g:g+"[]",u(S))}),!1}return Rp(v)?!0:(e.append(Pv(y,g,s),u(v)),!1)}const p=[],d=Object.assign(UA,{defaultVisitor:l,convertValue:u,isVisitable:Rp});function h(v,g){if(!E.isUndefined(v)){if(p.indexOf(v)!==-1)throw Error("Circular reference detected in "+g.join("."));p.push(v),E.forEach(v,function(f,m){(!(E.isUndefined(f)||f===null)&&i.call(e,f,E.isString(m)?m.trim():m,g,d))===!0&&h(f,g?g.concat(m):[m])}),p.pop()}}if(!E.isObject(t))throw new TypeError("data must be an object");return h(t),e}function Rv(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Td(t,e){this._pairs=[],t&&wc(t,this,e)}const LS=Td.prototype;LS.append=function(e,r){this._pairs.push([e,r])};LS.toString=function(e){const r=e?function(n){return e.call(this,n,Rv)}:Rv;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function WA(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function xS(t,e,r){if(!e)return t;const n=r&&r.encode||WA,i=r&&r.serialize;let s;if(i?s=i(e,r):s=E.isURLSearchParams(e)?e.toString():new Td(e,r).toString(n),s){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class Ev{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){E.forEach(this.handlers,function(n){n!==null&&e(n)})}}const BS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},HA=typeof URLSearchParams<"u"?URLSearchParams:Td,VA=typeof FormData<"u"?FormData:null,KA=typeof Blob<"u"?Blob:null,$A={isBrowser:!0,classes:{URLSearchParams:HA,FormData:VA,Blob:KA},protocols:["http","https","file","blob","url","data"]},FS=typeof window<"u"&&typeof document<"u",JA=(t=>FS&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),QA=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",GA=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:FS,hasStandardBrowserEnv:JA,hasStandardBrowserWebWorkerEnv:QA},Symbol.toStringTag,{value:"Module"})),It={...GA,...$A};function XA(t,e){return wc(t,new It.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,s){return It.isNode&&E.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function ZA(t){return E.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function YA(t){const e={},r=Object.keys(t);let n;const i=r.length;let s;for(n=0;n<i;n++)s=r[n],e[s]=t[s];return e}function qS(t){function e(r,n,i,s){let a=r[s++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),c=s>=r.length;return a=!a&&E.isArray(i)?i.length:a,c?(E.hasOwnProp(i,a)?i[a]=[i[a],n]:i[a]=n,!o):((!i[a]||!E.isObject(i[a]))&&(i[a]=[]),e(r,n,i[a],s)&&E.isArray(i[a])&&(i[a]=YA(i[a])),!o)}if(E.isFormData(t)&&E.isFunction(t.entries)){const r={};return E.forEachEntry(t,(n,i)=>{e(ZA(n),i,r,0)}),r}return null}function eI(t,e,r){if(E.isString(t))try{return(e||JSON.parse)(t),E.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const _d={transitional:BS,adapter:["xhr","http"],transformRequest:[function(e,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,s=E.isObject(e);if(s&&E.isHTMLForm(e)&&(e=new FormData(e)),E.isFormData(e))return i?JSON.stringify(qS(e)):e;if(E.isArrayBuffer(e)||E.isBuffer(e)||E.isStream(e)||E.isFile(e)||E.isBlob(e))return e;if(E.isArrayBufferView(e))return e.buffer;if(E.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return XA(e,this.formSerializer).toString();if((o=E.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return wc(o?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||i?(r.setContentType("application/json",!1),eI(e)):e}],transformResponse:[function(e){const r=this.transitional||_d.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(e&&E.isString(e)&&(n&&!this.responseType||i)){const a=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?V.from(o,V.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:It.classes.FormData,Blob:It.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};E.forEach(["delete","get","head","post","put","patch"],t=>{_d.headers[t]={}});const Od=_d,tI=E.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),rI=t=>{const e={};let r,n,i;return t&&t.split(`
`).forEach(function(a){i=a.indexOf(":"),r=a.substring(0,i).trim().toLowerCase(),n=a.substring(i+1).trim(),!(!r||e[r]&&tI[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},wv=Symbol("internals");function oi(t){return t&&String(t).trim().toLowerCase()}function Aa(t){return t===!1||t==null?t:E.isArray(t)?t.map(Aa):String(t)}function nI(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const iI=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function al(t,e,r,n,i){if(E.isFunction(n))return n.call(this,e,r);if(i&&(e=r),!!E.isString(e)){if(E.isString(n))return e.indexOf(n)!==-1;if(E.isRegExp(n))return n.test(e)}}function oI(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function sI(t,e){const r=E.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,s,a){return this[n].call(this,e,i,s,a)},configurable:!0})})}class Ac{constructor(e){e&&this.set(e)}set(e,r,n){const i=this;function s(o,c,u){const l=oi(c);if(!l)throw new Error("header name must be a non-empty string");const p=E.findKey(i,l);(!p||i[p]===void 0||u===!0||u===void 0&&i[p]!==!1)&&(i[p||c]=Aa(o))}const a=(o,c)=>E.forEach(o,(u,l)=>s(u,l,c));return E.isPlainObject(e)||e instanceof this.constructor?a(e,r):E.isString(e)&&(e=e.trim())&&!iI(e)?a(rI(e),r):e!=null&&s(r,e,n),this}get(e,r){if(e=oi(e),e){const n=E.findKey(this,e);if(n){const i=this[n];if(!r)return i;if(r===!0)return nI(i);if(E.isFunction(r))return r.call(this,i,n);if(E.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=oi(e),e){const n=E.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||al(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let i=!1;function s(a){if(a=oi(a),a){const o=E.findKey(n,a);o&&(!r||al(n,n[o],o,r))&&(delete n[o],i=!0)}}return E.isArray(e)?e.forEach(s):s(e),i}clear(e){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const s=r[n];(!e||al(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const r=this,n={};return E.forEach(this,(i,s)=>{const a=E.findKey(n,s);if(a){r[a]=Aa(i),delete r[s];return}const o=e?oI(s):String(s).trim();o!==s&&delete r[s],r[o]=Aa(i),n[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return E.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&E.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[wv]=this[wv]={accessors:{}}).accessors,i=this.prototype;function s(a){const o=oi(a);n[o]||(sI(i,a),n[o]=!0)}return E.isArray(e)?e.forEach(s):s(e),this}}Ac.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);E.reduceDescriptors(Ac.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});E.freezeMethods(Ac);const Wt=Ac;function cl(t,e){const r=this||Od,n=e||r,i=Wt.from(n.headers);let s=n.data;return E.forEach(t,function(o){s=o.call(r,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function US(t){return!!(t&&t.__CANCEL__)}function Ns(t,e,r){V.call(this,t??"canceled",V.ERR_CANCELED,e,r),this.name="CanceledError"}E.inherits(Ns,V,{__CANCEL__:!0});function aI(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new V("Request failed with status code "+r.status,[V.ERR_BAD_REQUEST,V.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}const cI=It.hasStandardBrowserEnv?{write(t,e,r,n,i,s){const a=[t+"="+encodeURIComponent(e)];E.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),E.isString(n)&&a.push("path="+n),E.isString(i)&&a.push("domain="+i),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function uI(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function lI(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function WS(t,e){return t&&!uI(e)?lI(t,e):e}const pI=It.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let n;function i(s){let a=s;return e&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(a){const o=E.isString(a)?i(a):a;return o.protocol===n.protocol&&o.host===n.host}}():function(){return function(){return!0}}();function dI(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function hI(t,e){t=t||10;const r=new Array(t),n=new Array(t);let i=0,s=0,a;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),l=n[s];a||(a=u),r[i]=c,n[i]=u;let p=s,d=0;for(;p!==i;)d+=r[p++],p=p%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),u-a<e)return;const h=l&&u-l;return h?Math.round(d*1e3/h):void 0}}function Av(t,e){let r=0;const n=hI(50,250);return i=>{const s=i.loaded,a=i.lengthComputable?i.total:void 0,o=s-r,c=n(o),u=s<=a;r=s;const l={loaded:s,total:a,progress:a?s/a:void 0,bytes:o,rate:c||void 0,estimated:c&&a&&u?(a-s)/c:void 0,event:i};l[e?"download":"upload"]=!0,t(l)}}const vI=typeof XMLHttpRequest<"u",fI=vI&&function(t){return new Promise(function(r,n){let i=t.data;const s=Wt.from(t.headers).normalize();let{responseType:a,withXSRFToken:o}=t,c;function u(){t.cancelToken&&t.cancelToken.unsubscribe(c),t.signal&&t.signal.removeEventListener("abort",c)}let l;if(E.isFormData(i)){if(It.hasStandardBrowserEnv||It.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((l=s.getContentType())!==!1){const[g,...y]=l?l.split(";").map(f=>f.trim()).filter(Boolean):[];s.setContentType([g||"multipart/form-data",...y].join("; "))}}let p=new XMLHttpRequest;if(t.auth){const g=t.auth.username||"",y=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(g+":"+y))}const d=WS(t.baseURL,t.url);p.open(t.method.toUpperCase(),xS(d,t.params,t.paramsSerializer),!0),p.timeout=t.timeout;function h(){if(!p)return;const g=Wt.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),f={data:!a||a==="text"||a==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:g,config:t,request:p};aI(function(S){r(S),u()},function(S){n(S),u()},f),p=null}if("onloadend"in p?p.onloadend=h:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(h)},p.onabort=function(){p&&(n(new V("Request aborted",V.ECONNABORTED,t,p)),p=null)},p.onerror=function(){n(new V("Network Error",V.ERR_NETWORK,t,p)),p=null},p.ontimeout=function(){let y=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const f=t.transitional||BS;t.timeoutErrorMessage&&(y=t.timeoutErrorMessage),n(new V(y,f.clarifyTimeoutError?V.ETIMEDOUT:V.ECONNABORTED,t,p)),p=null},It.hasStandardBrowserEnv&&(o&&E.isFunction(o)&&(o=o(t)),o||o!==!1&&pI(d))){const g=t.xsrfHeaderName&&t.xsrfCookieName&&cI.read(t.xsrfCookieName);g&&s.set(t.xsrfHeaderName,g)}i===void 0&&s.setContentType(null),"setRequestHeader"in p&&E.forEach(s.toJSON(),function(y,f){p.setRequestHeader(f,y)}),E.isUndefined(t.withCredentials)||(p.withCredentials=!!t.withCredentials),a&&a!=="json"&&(p.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&p.addEventListener("progress",Av(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&p.upload&&p.upload.addEventListener("progress",Av(t.onUploadProgress)),(t.cancelToken||t.signal)&&(c=g=>{p&&(n(!g||g.type?new Ns(null,t,p):g),p.abort(),p=null)},t.cancelToken&&t.cancelToken.subscribe(c),t.signal&&(t.signal.aborted?c():t.signal.addEventListener("abort",c)));const v=dI(d);if(v&&It.protocols.indexOf(v)===-1){n(new V("Unsupported protocol "+v+":",V.ERR_BAD_REQUEST,t));return}p.send(i||null)})},Ep={http:FA,xhr:fI};E.forEach(Ep,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Iv=t=>`- ${t}`,gI=t=>E.isFunction(t)||t===null||t===!1,HS={getAdapter:t=>{t=E.isArray(t)?t:[t];const{length:e}=t;let r,n;const i={};for(let s=0;s<e;s++){r=t[s];let a;if(n=r,!gI(r)&&(n=Ep[(a=String(r)).toLowerCase()],n===void 0))throw new V(`Unknown adapter '${a}'`);if(n)break;i[a||"#"+s]=n}if(!n){const s=Object.entries(i).map(([o,c])=>`adapter ${o} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=e?s.length>1?`since :
`+s.map(Iv).join(`
`):" "+Iv(s[0]):"as no adapter specified";throw new V("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:Ep};function ul(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ns(null,t)}function Tv(t){return ul(t),t.headers=Wt.from(t.headers),t.data=cl.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),HS.getAdapter(t.adapter||Od.adapter)(t).then(function(n){return ul(t),n.data=cl.call(t,t.transformResponse,n),n.headers=Wt.from(n.headers),n},function(n){return US(n)||(ul(t),n&&n.response&&(n.response.data=cl.call(t,t.transformResponse,n.response),n.response.headers=Wt.from(n.response.headers))),Promise.reject(n)})}const _v=t=>t instanceof Wt?t.toJSON():t;function Nn(t,e){e=e||{};const r={};function n(u,l,p){return E.isPlainObject(u)&&E.isPlainObject(l)?E.merge.call({caseless:p},u,l):E.isPlainObject(l)?E.merge({},l):E.isArray(l)?l.slice():l}function i(u,l,p){if(E.isUndefined(l)){if(!E.isUndefined(u))return n(void 0,u,p)}else return n(u,l,p)}function s(u,l){if(!E.isUndefined(l))return n(void 0,l)}function a(u,l){if(E.isUndefined(l)){if(!E.isUndefined(u))return n(void 0,u)}else return n(void 0,l)}function o(u,l,p){if(p in e)return n(u,l);if(p in t)return n(void 0,u)}const c={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(u,l)=>i(_v(u),_v(l),!0)};return E.forEach(Object.keys(Object.assign({},t,e)),function(l){const p=c[l]||i,d=p(t[l],e[l],l);E.isUndefined(d)&&p!==o||(r[l]=d)}),r}const VS="1.6.7",kd={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{kd[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const Ov={};kd.transitional=function(e,r,n){function i(s,a){return"[Axios v"+VS+"] Transitional option '"+s+"'"+a+(n?". "+n:"")}return(s,a,o)=>{if(e===!1)throw new V(i(a," has been removed"+(r?" in "+r:"")),V.ERR_DEPRECATED);return r&&!Ov[a]&&(Ov[a]=!0,console.warn(i(a," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,a,o):!0}};function mI(t,e,r){if(typeof t!="object")throw new V("options must be an object",V.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const s=n[i],a=e[s];if(a){const o=t[s],c=o===void 0||a(o,s,t);if(c!==!0)throw new V("option "+s+" must be "+c,V.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new V("Unknown option "+s,V.ERR_BAD_OPTION)}}const wp={assertOptions:mI,validators:kd},Zt=wp.validators;class Ya{constructor(e){this.defaults=e,this.interceptors={request:new Ev,response:new Ev}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Nn(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:s}=r;n!==void 0&&wp.assertOptions(n,{silentJSONParsing:Zt.transitional(Zt.boolean),forcedJSONParsing:Zt.transitional(Zt.boolean),clarifyTimeoutError:Zt.transitional(Zt.boolean)},!1),i!=null&&(E.isFunction(i)?r.paramsSerializer={serialize:i}:wp.assertOptions(i,{encode:Zt.function,serialize:Zt.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a=s&&E.merge(s.common,s[r.method]);s&&E.forEach(["delete","get","head","post","put","patch","common"],v=>{delete s[v]}),r.headers=Wt.concat(a,s);const o=[];let c=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(c=c&&g.synchronous,o.unshift(g.fulfilled,g.rejected))});const u=[];this.interceptors.response.forEach(function(g){u.push(g.fulfilled,g.rejected)});let l,p=0,d;if(!c){const v=[Tv.bind(this),void 0];for(v.unshift.apply(v,o),v.push.apply(v,u),d=v.length,l=Promise.resolve(r);p<d;)l=l.then(v[p++],v[p++]);return l}d=o.length;let h=r;for(p=0;p<d;){const v=o[p++],g=o[p++];try{h=v(h)}catch(y){g.call(this,y);break}}try{l=Tv.call(this,h)}catch(v){return Promise.reject(v)}for(p=0,d=u.length;p<d;)l=l.then(u[p++],u[p++]);return l}getUri(e){e=Nn(this.defaults,e);const r=WS(e.baseURL,e.url);return xS(r,e.params,e.paramsSerializer)}}E.forEach(["delete","get","head","options"],function(e){Ya.prototype[e]=function(r,n){return this.request(Nn(n||{},{method:e,url:r,data:(n||{}).data}))}});E.forEach(["post","put","patch"],function(e){function r(n){return function(s,a,o){return this.request(Nn(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}Ya.prototype[e]=r(),Ya.prototype[e+"Form"]=r(!0)});const Ia=Ya;class Md{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const a=new Promise(o=>{n.subscribe(o),s=o}).then(i);return a.cancel=function(){n.unsubscribe(s)},a},e(function(s,a,o){n.reason||(n.reason=new Ns(s,a,o),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}static source(){let e;return{token:new Md(function(i){e=i}),cancel:e}}}const yI=Md;function SI(t){return function(r){return t.apply(null,r)}}function CI(t){return E.isObject(t)&&t.isAxiosError===!0}const Ap={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ap).forEach(([t,e])=>{Ap[e]=t});const PI=Ap;function KS(t){const e=new Ia(t),r=IS(Ia.prototype.request,e);return E.extend(r,Ia.prototype,e,{allOwnKeys:!0}),E.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return KS(Nn(t,i))},r}const le=KS(Od);le.Axios=Ia;le.CanceledError=Ns;le.CancelToken=yI;le.isCancel=US;le.VERSION=VS;le.toFormData=wc;le.AxiosError=V;le.Cancel=le.CanceledError;le.all=function(e){return Promise.all(e)};le.spread=SI;le.isAxiosError=CI;le.mergeConfig=Nn;le.AxiosHeaders=Wt;le.formToJSON=t=>qS(E.isHTMLForm(t)?new FormData(t):t);le.getAdapter=HS.getAdapter;le.HttpStatusCode=PI;le.default=le;async function RI(){const{data:t}=await le.get("/get_credentials");return t}var Qe={},ll={},Ic={},pl={},ne={},Wn={},pt={};const EI=nm(Xw);Object.defineProperty(pt,"__esModule",{value:!0});pt.createNoDashGuid=pt.createGuid=void 0;const wI=EI,$S=()=>wI.v4();pt.createGuid=$S;const AI=()=>$S().replace(new RegExp("-","g"),"").toUpperCase();pt.createNoDashGuid=AI;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformEvent=t.EventType=void 0;const e=pt;(function(n){n[n.Debug=0]="Debug",n[n.Info=1]="Info",n[n.Warning=2]="Warning",n[n.Error=3]="Error",n[n.None=4]="None"})(t.EventType||(t.EventType={}));class r{constructor(i,s){this.privName=i,this.privEventId=e.createNoDashGuid(),this.privEventTime=new Date().toISOString(),this.privEventType=s,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}t.PlatformEvent=r})(Wn);Object.defineProperty(ne,"__esModule",{value:!0});ne.AudioStreamNodeErrorEvent=ne.AudioStreamNodeDetachedEvent=ne.AudioStreamNodeAttachedEvent=ne.AudioStreamNodeAttachingEvent=ne.AudioStreamNodeEvent=ne.AudioSourceErrorEvent=ne.AudioSourceOffEvent=ne.AudioSourceReadyEvent=ne.AudioSourceInitializingEvent=ne.AudioSourceEvent=void 0;const Ip=Wn;class Hn extends Ip.PlatformEvent{constructor(e,r,n=Ip.EventType.Info){super(e,n),this.privAudioSourceId=r}get audioSourceId(){return this.privAudioSourceId}}ne.AudioSourceEvent=Hn;class II extends Hn{constructor(e){super("AudioSourceInitializingEvent",e)}}ne.AudioSourceInitializingEvent=II;class TI extends Hn{constructor(e){super("AudioSourceReadyEvent",e)}}ne.AudioSourceReadyEvent=TI;class _I extends Hn{constructor(e){super("AudioSourceOffEvent",e)}}ne.AudioSourceOffEvent=_I;class OI extends Hn{constructor(e,r){super("AudioSourceErrorEvent",e,Ip.EventType.Error),this.privError=r}get error(){return this.privError}}ne.AudioSourceErrorEvent=OI;class zs extends Hn{constructor(e,r,n){super(e,r),this.privAudioNodeId=n}get audioNodeId(){return this.privAudioNodeId}}ne.AudioStreamNodeEvent=zs;class kI extends zs{constructor(e,r){super("AudioStreamNodeAttachingEvent",e,r)}}ne.AudioStreamNodeAttachingEvent=kI;class MI extends zs{constructor(e,r){super("AudioStreamNodeAttachedEvent",e,r)}}ne.AudioStreamNodeAttachedEvent=MI;class bI extends zs{constructor(e,r){super("AudioStreamNodeDetachedEvent",e,r)}}ne.AudioStreamNodeDetachedEvent=bI;class DI extends zs{constructor(e,r,n){super("AudioStreamNodeErrorEvent",e,r),this.privError=n}get error(){return this.privError}}ne.AudioStreamNodeErrorEvent=DI;var ce={};Object.defineProperty(ce,"__esModule",{value:!0});ce.ConnectionMessageSentEvent=ce.ConnectionMessageReceivedEvent=ce.ConnectionEstablishErrorEvent=ce.ConnectionErrorEvent=ce.ConnectionClosedEvent=ce.ConnectionEstablishedEvent=ce.ConnectionStartEvent=ce.ConnectionEvent=ce.ServiceEvent=void 0;const Zr=Wn;class NI extends Zr.PlatformEvent{constructor(e,r,n=Zr.EventType.Info){super(e,n),this.privJsonResult=r}get jsonString(){return this.privJsonResult}}ce.ServiceEvent=NI;class Rr extends Zr.PlatformEvent{constructor(e,r,n=Zr.EventType.Info){super(e,n),this.privConnectionId=r}get connectionId(){return this.privConnectionId}}ce.ConnectionEvent=Rr;class zI extends Rr{constructor(e,r,n){super("ConnectionStartEvent",e),this.privUri=r,this.privHeaders=n}get uri(){return this.privUri}get headers(){return this.privHeaders}}ce.ConnectionStartEvent=zI;class jI extends Rr{constructor(e){super("ConnectionEstablishedEvent",e)}}ce.ConnectionEstablishedEvent=jI;class LI extends Rr{constructor(e,r,n){super("ConnectionClosedEvent",e,Zr.EventType.Debug),this.privReason=n,this.privStatusCode=r}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}ce.ConnectionClosedEvent=LI;class xI extends Rr{constructor(e,r,n){super("ConnectionErrorEvent",e,Zr.EventType.Debug),this.privMessage=r,this.privType=n}get message(){return this.privMessage}get type(){return this.privType}}ce.ConnectionErrorEvent=xI;class BI extends Rr{constructor(e,r,n){super("ConnectionEstablishErrorEvent",e,Zr.EventType.Error),this.privStatusCode=r,this.privReason=n}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}ce.ConnectionEstablishErrorEvent=BI;class FI extends Rr{constructor(e,r,n){super("ConnectionMessageReceivedEvent",e),this.privNetworkReceivedTime=r,this.privMessage=n}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}}ce.ConnectionMessageReceivedEvent=FI;class qI extends Rr{constructor(e,r,n){super("ConnectionMessageSentEvent",e),this.privNetworkSentTime=r,this.privMessage=n}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}ce.ConnectionMessageSentEvent=qI;var bd={},Ee={};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.ObjectDisposedError=Ee.InvalidOperationError=Ee.ArgumentNullError=void 0;class UI extends Error{constructor(e){super(e),this.name="ArgumentNull",this.message=e}}Ee.ArgumentNullError=UI;class WI extends Error{constructor(e){super(e),this.name="InvalidOperation",this.message=e}}Ee.InvalidOperationError=WI;class HI extends Error{constructor(e,r){super(r),this.name=e+"ObjectDisposed",this.message=r}}Ee.ObjectDisposedError=HI;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionMessage=t.MessageType=void 0;const e=Ee,r=pt;var n;(function(s){s[s.Text=0]="Text",s[s.Binary=1]="Binary"})(n=t.MessageType||(t.MessageType={}));class i{constructor(a,o,c,u){if(this.privBody=null,a===n.Text&&o&&typeof o!="string")throw new e.InvalidOperationError("Payload must be a string");if(a===n.Binary&&o&&!(o instanceof ArrayBuffer))throw new e.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=a,this.privBody=o,this.privHeaders=c||{},this.privId=u||r.createNoDashGuid(),this.messageType){case n.Binary:this.privSize=this.binaryBody!==null?this.binaryBody.byteLength:0;break;case n.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===n.Binary)throw new e.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===n.Text)throw new e.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}}t.ConnectionMessage=i})(bd);var Tc={};Object.defineProperty(Tc,"__esModule",{value:!0});Tc.ConnectionOpenResponse=void 0;class VI{constructor(e,r){this.privStatusCode=e,this.privReason=r}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}}Tc.ConnectionOpenResponse=VI;var _c={};Object.defineProperty(_c,"__esModule",{value:!0});_c.DeferralMap=void 0;class KI{constructor(){this.privMap={}}add(e,r){this.privMap[e]=r}getId(e){return this.privMap[e]}complete(e,r){try{this.privMap[e].resolve(r)}catch(n){this.privMap[e].reject(n)}finally{this.privMap[e]=void 0}}}_c.DeferralMap=KI;var Yr={};Object.defineProperty(Yr,"__esModule",{value:!0});Yr.SendingAgentContextMessageEvent=Yr.DialogEvent=void 0;const kv=Wn;class JS extends kv.PlatformEvent{constructor(e,r=kv.EventType.Info){super(e,r)}}Yr.DialogEvent=JS;class $I extends JS{constructor(e){super("SendingAgentContextMessageEvent"),this.privAgentConfig=e}get agentConfig(){return this.privAgentConfig}}Yr.SendingAgentContextMessageEvent=$I;var Oc={},js={};Object.defineProperty(js,"__esModule",{value:!0});js.EventSource=void 0;const JI=Ee,QI=pt;class GI{constructor(e){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=e}onEvent(e){if(this.isDisposed())throw new JI.ObjectDisposedError("EventSource");if(this.metadata)for(const r in this.metadata)r&&e.metadata&&(e.metadata[r]||(e.metadata[r]=this.metadata[r]));for(const r in this.privEventListeners)r&&this.privEventListeners[r]&&this.privEventListeners[r](e)}attach(e){const r=QI.createNoDashGuid();return this.privEventListeners[r]=e,{detach:()=>(delete this.privEventListeners[r],Promise.resolve())}}attachListener(e){return this.attach(r=>e.onEvent(r))}attachConsoleListener(e){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach(r=>e.onEvent(r)),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}}js.EventSource=GI;Object.defineProperty(Oc,"__esModule",{value:!0});Oc.Events=void 0;const XI=Ee,ZI=js;class As{static setEventSource(e){if(!e)throw new XI.ArgumentNullError("eventSource");As.privInstance=e}static get instance(){return As.privInstance}}Oc.Events=As;As.privInstance=new ZI.EventSource;var QS={};Object.defineProperty(QS,"__esModule",{value:!0});var GS={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionState=void 0,function(e){e[e.None=0]="None",e[e.Connected=1]="Connected",e[e.Connecting=2]="Connecting",e[e.Disconnected=3]="Disconnected"}(t.ConnectionState||(t.ConnectionState={}))})(GS);var XS={};Object.defineProperty(XS,"__esModule",{value:!0});var ZS={};Object.defineProperty(ZS,"__esModule",{value:!0});var YS={};Object.defineProperty(YS,"__esModule",{value:!0});var eC={};Object.defineProperty(eC,"__esModule",{value:!0});var tC={};Object.defineProperty(tC,"__esModule",{value:!0});var rC={};Object.defineProperty(rC,"__esModule",{value:!0});var nC={};Object.defineProperty(nC,"__esModule",{value:!0});var iC={};Object.defineProperty(iC,"__esModule",{value:!0});var Ls={};Object.defineProperty(Ls,"__esModule",{value:!0});Ls.List=void 0;const YI=Ee;class tr{constructor(e){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],e)for(const r of e)this.privList.push(r)}get(e){return this.throwIfDisposed(),this.privList[e]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(e){this.throwIfDisposed(),this.insertAt(this.privList.length,e)}insertAt(e,r){this.throwIfDisposed(),e===0?this.privList.unshift(r):e===this.privList.length?this.privList.push(r):this.privList.splice(e,0,r),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(e){return this.throwIfDisposed(),this.remove(e,1)[0]}remove(e,r){this.throwIfDisposed();const n=this.privList.splice(e,r);return this.triggerSubscriptions(this.privRemoveSubscriptions),n}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(e){this.throwIfDisposed();const r=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[r]=e,{detach:()=>(delete this.privAddSubscriptions[r],Promise.resolve())}}onRemoved(e){this.throwIfDisposed();const r=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[r]=e,{detach:()=>(delete this.privRemoveSubscriptions[r],Promise.resolve())}}onDisposed(e){this.throwIfDisposed();const r=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[r]=e,{detach:()=>(delete this.privDisposedSubscriptions[r],Promise.resolve())}}join(e){return this.throwIfDisposed(),this.privList.join(e)}toArray(){const e=Array();return this.privList.forEach(r=>{e.push(r)}),e}any(e){return this.throwIfDisposed(),e?this.where(e).length()>0:this.length()>0}all(e){return this.throwIfDisposed(),this.where(e).length()===this.length()}forEach(e){this.throwIfDisposed();for(let r=0;r<this.length();r++)e(this.privList[r],r)}select(e){this.throwIfDisposed();const r=[];for(let n=0;n<this.privList.length;n++)r.push(e(this.privList[n],n));return new tr(r)}where(e){this.throwIfDisposed();const r=new tr;for(let n=0;n<this.privList.length;n++)e(this.privList[n],n)&&r.add(this.privList[n]);return r}orderBy(e){this.throwIfDisposed();const n=this.toArray().sort(e);return new tr(n)}orderByDesc(e){return this.throwIfDisposed(),this.orderBy((r,n)=>e(n,r))}clone(){return this.throwIfDisposed(),new tr(this.toArray())}concat(e){return this.throwIfDisposed(),new tr(this.privList.concat(e.toArray()))}concatArray(e){return this.throwIfDisposed(),new tr(this.privList.concat(e))}isDisposed(){return this.privList==null}dispose(e){this.isDisposed()||(this.privDisposeReason=e,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new YI.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(e){if(e)for(const r in e)r&&e[r]()}}Ls.List=tr;var Dd={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.marshalPromiseToCallbacks=t.Sink=t.Deferred=t.PromiseResultEventSource=t.PromiseResult=t.PromiseState=void 0;var e;(function(o){o[o.None=0]="None",o[o.Resolved=1]="Resolved",o[o.Rejected=2]="Rejected"})(e=t.PromiseState||(t.PromiseState={}));class r{constructor(c){this.throwIfError=()=>{if(this.isError)throw this.error},c.on(u=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=u)},u=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=u)})}get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}}t.PromiseResult=r;class n{constructor(){this.setResult=c=>{this.privOnSetResult(c)},this.setError=c=>{this.privOnSetError(c)},this.on=(c,u)=>{this.privOnSetResult=c,this.privOnSetError=u}}}t.PromiseResultEventSource=n;class i{constructor(){this.resolve=c=>(this.privResolve(c),this),this.reject=c=>(this.privReject(c),this),this.privPromise=new Promise((c,u)=>{this.privResolve=c,this.privReject=u})}get promise(){return this.privPromise}}t.Deferred=i;class s{constructor(){this.privState=e.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new n,this.privPromiseResult=new r(this.privPromiseResultEvents)}get state(){return this.privState}get result(){return this.privPromiseResult}resolve(c){if(this.privState!==e.None)throw new Error("'Cannot resolve a completed promise'");this.privState=e.Resolved,this.privPromiseResultEvents.setResult(c);for(let u=0;u<this.privSuccessHandlers.length;u++)this.executeSuccessCallback(c,this.privSuccessHandlers[u],this.privErrorHandlers[u]);this.detachHandlers()}reject(c){if(this.privState!==e.None)throw new Error("'Cannot reject a completed promise'");this.privState=e.Rejected,this.privPromiseResultEvents.setError(c);for(const u of this.privErrorHandlers)this.executeErrorCallback(c,u);this.detachHandlers()}on(c,u){c==null&&(c=()=>{}),this.privState===e.None?(this.privSuccessHandlers.push(c),this.privErrorHandlers.push(u)):(this.privState===e.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,c,u):this.privState===e.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,u),this.detachHandlers())}executeSuccessCallback(c,u,l){try{u(c)}catch(p){this.executeErrorCallback(`'Unhandled callback error: ${p}'`,l)}}executeErrorCallback(c,u){if(u)try{u(c)}catch(l){throw new Error(`'Unhandled callback error: ${l}. InnerError: ${c}'`)}else throw new Error(`'Unhandled error: ${c}'`)}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}}t.Sink=s;function a(o,c,u){o.then(l=>{try{c&&c(l)}catch(p){if(u)try{if(p instanceof Error){const d=p;u(d.name+": "+d.message)}else u(p)}catch{}}},l=>{if(u)try{if(l instanceof Error){const p=l;u(p.name+": "+p.message)}else u(l)}catch{}})}t.marshalPromiseToCallbacks=a})(Dd);var xs={};Object.defineProperty(xs,"__esModule",{value:!0});xs.Queue=void 0;const dl=Ee,hl=Ls,Mv=Dd;var ss;(function(t){t[t.Dequeue=0]="Dequeue",t[t.Peek=1]="Peek"})(ss||(ss={}));class eT{constructor(e){this.privPromiseStore=new hl.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=e||new hl.List,this.privDetachables=[],this.privSubscribers=new hl.List,this.privDetachables.push(this.privList.onAdded(()=>this.drain()))}enqueue(e){this.throwIfDispose(),this.enqueueFromPromise(new Promise(r=>r(e)))}enqueueFromPromise(e){this.throwIfDispose(),e.then(r=>{this.privList.add(r)},()=>{})}dequeue(){this.throwIfDispose();const e=new Mv.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:ss.Dequeue}),this.drain()),e.promise}peek(){this.throwIfDispose();const e=new Mv.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:ss.Peek}),this.drain()),e.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return this.privSubscribers==null}async drainAndDispose(e,r){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=r,this.privIsDisposing=!0;const n=this.privSubscribers;if(n){for(;n.length()>0;)n.removeFirst().deferral.resolve(void 0);this.privSubscribers===n&&(this.privSubscribers=n)}for(const i of this.privDetachables)await i.detach();if(this.privPromiseStore.length()>0&&e){const i=[];return this.privPromiseStore.toArray().forEach(s=>{i.push(s)}),Promise.all(i).finally(()=>{this.privSubscribers=null,this.privList.forEach(s=>{e(s)}),this.privList=null}).then()}else this.privSubscribers=null,this.privList=null}}async dispose(e){await this.drainAndDispose(null,e)}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const e=this.privSubscribers,r=this.privList;if(e&&r){for(;r.length()>0&&e.length()>0&&!this.privIsDisposing;){const n=e.removeFirst();if(n.type===ss.Peek)n.deferral.resolve(r.first());else{const i=r.removeFirst();n.deferral.resolve(i)}}this.privSubscribers===e&&(this.privSubscribers=e),this.privList===r&&(this.privList=r)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed())throw this.privDisposeReason?new dl.InvalidOperationError(this.privDisposeReason):new dl.ObjectDisposedError("Queue");if(this.privIsDisposing)throw new dl.InvalidOperationError("Queue disposing")}}xs.Queue=eT;var kc={};Object.defineProperty(kc,"__esModule",{value:!0});kc.RawWebsocketMessage=void 0;const la=bd,si=Ee,tT=pt;class rT{constructor(e,r,n){if(this.privPayload=null,!r)throw new si.ArgumentNullError("payload");if(e===la.MessageType.Binary&&Object.getPrototypeOf(r).constructor.name!=="ArrayBuffer")throw new si.InvalidOperationError("Payload must be ArrayBuffer");if(e===la.MessageType.Text&&typeof r!="string")throw new si.InvalidOperationError("Payload must be a string");this.privMessageType=e,this.privPayload=r,this.privId=n||tT.createNoDashGuid()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===la.MessageType.Binary)throw new si.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===la.MessageType.Text)throw new si.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}}kc.RawWebsocketMessage=rT;var Mc={};Object.defineProperty(Mc,"__esModule",{value:!0});Mc.RiffPcmEncoder=void 0;class nT{constructor(e,r){this.privActualSampleRate=e,this.privDesiredSampleRate=r}encode(e){const r=this.downSampleAudioFrame(e,this.privActualSampleRate,this.privDesiredSampleRate);if(!r)return null;const n=r.length*2,i=new ArrayBuffer(n),s=new DataView(i);return this.floatTo16BitPCM(s,0,r),i}setString(e,r,n){for(let i=0;i<n.length;i++)e.setUint8(r+i,n.charCodeAt(i))}floatTo16BitPCM(e,r,n){for(let i=0;i<n.length;i++,r+=2){const s=Math.max(-1,Math.min(1,n[i]));e.setInt16(r,s<0?s*32768:s*32767,!0)}}downSampleAudioFrame(e,r,n){if(!e)return null;if(n===r||n>r)return e;const i=r/n,s=Math.round(e.length/i),a=new Float32Array(s);let o=0,c=0;for(;c<s;){const u=Math.round((c+1)*i);let l=0,p=0;for(;o<u&&o<e.length;)l+=e[o++],p++;a[c++]=l/p}return a}}Mc.RiffPcmEncoder=nT;var bc={};Object.defineProperty(bc,"__esModule",{value:!0});bc.Stream=void 0;const bv=Ee,iT=pt,Dv=xs;class oT{constructor(e){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=e||iT.createNoDashGuid(),this.privReaderQueue=new Dv.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(e){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(e)}catch{}}read(){if(this.privIsReadEnded)throw new bv.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then(async e=>((e===void 0||e.isEnd)&&await this.privReaderQueue.dispose("End of stream reached"),e))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new Dv.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new bv.InvalidOperationError("Stream closed")}}bc.Stream=oT;var Dc={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationStatus=void 0,function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(t.TranslationStatus||(t.TranslationStatus={}))})(Dc);var ai={},Nv;function sT(){if(Nv)return ai;Nv=1,Object.defineProperty(ai,"__esModule",{value:!0}),ai.ChunkedArrayBufferStream=void 0;const t=D();let e=class extends t.Stream{constructor(n,i){super(i),this.privTargetChunkSize=n,this.privNextBufferReadyBytes=0}writeStreamChunk(n){if(n.isEnd||this.privNextBufferReadyBytes===0&&n.buffer.byteLength===this.privTargetChunkSize){super.writeStreamChunk(n);return}let i=0;for(;i<n.buffer.byteLength;){this.privNextBufferToWrite===void 0&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=n.timeReceived);const s=Math.min(n.buffer.byteLength-i,this.privTargetChunkSize-this.privNextBufferReadyBytes),a=new Uint8Array(this.privNextBufferToWrite),o=new Uint8Array(n.buffer.slice(i,s+i));a.set(o,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=s,i+=s,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){this.privNextBufferReadyBytes!==0&&!this.isClosed&&super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}};return ai.ChunkedArrayBufferStream=e,ai}var oC={};Object.defineProperty(oC,"__esModule",{value:!0});var Nc={};Object.defineProperty(Nc,"__esModule",{value:!0});Nc.Timeout=void 0;class De{static load(){const e=new Map([[0,()=>{}]]),r=new Map,i="data:text/javascript;base64,"+btoa(`!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error('There is no interval scheduled with the given id "'.concat(e,'".'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error('The given method "'.concat(e.method,'" is not supported'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);`),s=new Worker(i);return s.addEventListener("message",({data:c})=>{if(De.isCallNotification(c)){const{params:{timerId:u}}=c,l=e.get(u);if(typeof l=="number"){const p=r.get(l);if(p===void 0||p!==u)throw new Error("The timer is in an undefined state.")}else if(typeof l<"u")l(),e.delete(u);else throw new Error("The timer is in an undefined state.")}else if(De.isClearResponse(c)){const{id:u}=c,l=r.get(u);if(l===void 0)throw new Error("The timer is in an undefined state.");r.delete(u),e.delete(l)}else{const{error:{message:u}}=c;throw new Error(u)}}),{clearTimeout:c=>{const u=Math.random();r.set(u,c),e.set(c,u),s.postMessage({id:u,method:"clear",params:{timerId:c}})},setTimeout:(c,u)=>{const l=Math.random();return e.set(l,c),s.postMessage({id:null,method:"set",params:{delay:u,now:performance.now(),timerId:l}}),l}}}static loadWorkerTimers(){return()=>(De.workerTimers!==null||(De.workerTimers=De.load()),De.workerTimers)}static isCallNotification(e){return e.method!==void 0&&e.method==="call"}static isClearResponse(e){return e.error===null&&typeof e.id=="number"}}Nc.Timeout=De;De.workerTimers=null;De.clearTimeout=t=>De.timers().clearTimeout(t);De.setTimeout=(t,e)=>De.timers().setTimeout(t,e);De.timers=De.loadWorkerTimers();var W={};Object.defineProperty(W,"__esModule",{value:!0});W.OCSPCacheUpdateErrorEvent=W.OCSPResponseRetrievedEvent=W.OCSPCacheFetchErrorEvent=W.OCSPVerificationFailedEvent=W.OCSPCacheHitEvent=W.OCSPCacheEntryNeedsRefreshEvent=W.OCSPCacheEntryExpiredEvent=W.OCSPWSUpgradeStartedEvent=W.OCSPStapleReceivedEvent=W.OCSPCacheUpdateCompleteEvent=W.OCSPDiskCacheStoreEvent=W.OCSPMemoryCacheStoreEvent=W.OCSPCacheUpdateNeededEvent=W.OCSPDiskCacheHitEvent=W.OCSPCacheMissEvent=W.OCSPMemoryCacheHitEvent=W.OCSPEvent=void 0;const Ae=Wn;class Ie extends Ae.PlatformEvent{constructor(e,r,n){super(e,r),this.privSignature=n}}W.OCSPEvent=Ie;class aT extends Ie{constructor(e){super("OCSPMemoryCacheHitEvent",Ae.EventType.Debug,e)}}W.OCSPMemoryCacheHitEvent=aT;class cT extends Ie{constructor(e){super("OCSPCacheMissEvent",Ae.EventType.Debug,e)}}W.OCSPCacheMissEvent=cT;class uT extends Ie{constructor(e){super("OCSPDiskCacheHitEvent",Ae.EventType.Debug,e)}}W.OCSPDiskCacheHitEvent=uT;class lT extends Ie{constructor(e){super("OCSPCacheUpdateNeededEvent",Ae.EventType.Debug,e)}}W.OCSPCacheUpdateNeededEvent=lT;class pT extends Ie{constructor(e){super("OCSPMemoryCacheStoreEvent",Ae.EventType.Debug,e)}}W.OCSPMemoryCacheStoreEvent=pT;class dT extends Ie{constructor(e){super("OCSPDiskCacheStoreEvent",Ae.EventType.Debug,e)}}W.OCSPDiskCacheStoreEvent=dT;class hT extends Ie{constructor(e){super("OCSPCacheUpdateCompleteEvent",Ae.EventType.Debug,e)}}W.OCSPCacheUpdateCompleteEvent=hT;class vT extends Ie{constructor(){super("OCSPStapleReceivedEvent",Ae.EventType.Debug,"")}}W.OCSPStapleReceivedEvent=vT;class fT extends Ie{constructor(e){super("OCSPWSUpgradeStartedEvent",Ae.EventType.Debug,e)}}W.OCSPWSUpgradeStartedEvent=fT;class gT extends Ie{constructor(e,r){super("OCSPCacheEntryExpiredEvent",Ae.EventType.Debug,e),this.privExpireTime=r}}W.OCSPCacheEntryExpiredEvent=gT;class mT extends Ie{constructor(e,r,n){super("OCSPCacheEntryNeedsRefreshEvent",Ae.EventType.Debug,e),this.privExpireTime=n,this.privStartTime=r}}W.OCSPCacheEntryNeedsRefreshEvent=mT;class yT extends Ie{constructor(e,r,n){super("OCSPCacheHitEvent",Ae.EventType.Debug,e),this.privExpireTime=n,this.privExpireTimeString=new Date(n).toLocaleDateString(),this.privStartTime=r,this.privStartTimeString=new Date(r).toLocaleTimeString()}}W.OCSPCacheHitEvent=yT;class ST extends Ie{constructor(e,r){super("OCSPVerificationFailedEvent",Ae.EventType.Debug,e),this.privError=r}}W.OCSPVerificationFailedEvent=ST;class CT extends Ie{constructor(e,r){super("OCSPCacheFetchErrorEvent",Ae.EventType.Debug,e),this.privError=r}}W.OCSPCacheFetchErrorEvent=CT;class PT extends Ie{constructor(e){super("OCSPResponseRetrievedEvent",Ae.EventType.Debug,e)}}W.OCSPResponseRetrievedEvent=PT;class RT extends Ie{constructor(e,r){super("OCSPCacheUpdateErrorEvent",Ae.EventType.Debug,e),this.privError=r}}W.OCSPCacheUpdateErrorEvent=RT;var ci={},zv;function ET(){if(zv)return ci;zv=1,Object.defineProperty(ci,"__esModule",{value:!0}),ci.BackgroundEvent=void 0;const t=D();class e extends t.PlatformEvent{constructor(n){super("BackgroundEvent",t.EventType.Error),this.privError=n}get error(){return this.privError}}return ci.BackgroundEvent=e,ci}var jv;function D(){return jv||(jv=1,function(t){var e=q&&q.__createBinding||(Object.create?function(i,s,a,o){o===void 0&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return s[a]}})}:function(i,s,a,o){o===void 0&&(o=a),i[o]=s[a]}),r=q&&q.__exportStar||function(i,s){for(var a in i)a!=="default"&&!s.hasOwnProperty(a)&&e(s,i,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(ne,t),r(ce,t),r(bd,t),r(Tc,t),r(_c,t),r(Yr,t),r(Ee,t),r(Oc,t),r(js,t),r(pt,t),r(QS,t),r(GS,t),r(XS,t),r(ZS,t),r(YS,t),r(eC,t),r(tC,t),r(rC,t),r(nC,t),r(iC,t),r(Ls,t),r(Wn,t),r(Dd,t),r(xs,t),r(kc,t),r(Mc,t),r(bc,t);var n=Dc;Object.defineProperty(t,"TranslationStatus",{enumerable:!0,get:function(){return n.TranslationStatus}}),r(sT(),t),r(oC,t),r(Nc,t),r(W,t),r(ET(),t)}(pl)),pl}var me={};Object.defineProperty(me,"__esModule",{value:!0});me.HeaderNames=void 0;class St{}me.HeaderNames=St;St.AuthKey="Ocp-Apim-Subscription-Key";St.Authorization="Authorization";St.SpIDAuthKey="Apim-Subscription-Id";St.ConnectionId="X-ConnectionId";St.ContentType="Content-Type";St.CustomCommandsAppId="X-CommandsAppId";St.Path="Path";St.RequestId="X-RequestId";St.RequestStreamId="X-StreamId";St.RequestTimestamp="X-Timestamp";var Vn={};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.AuthInfo=void 0;class wT{constructor(e,r){this.privHeaderName=e,this.privToken=r}get headerName(){return this.privHeaderName}get token(){return this.privToken}}Vn.AuthInfo=wT;Object.defineProperty(Ic,"__esModule",{value:!0});Ic.CognitiveSubscriptionKeyAuthentication=void 0;const AT=D(),IT=me,TT=Vn;class _T{constructor(e){if(!e)throw new AT.ArgumentNullError("subscriptionKey");this.privAuthInfo=new TT.AuthInfo(IT.HeaderNames.AuthKey,e)}fetch(e){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(e){return Promise.resolve(this.privAuthInfo)}}Ic.CognitiveSubscriptionKeyAuthentication=_T;var zc={};Object.defineProperty(zc,"__esModule",{value:!0});zc.CognitiveTokenAuthentication=void 0;const Lv=D(),xv=Vn,Bv=me;class Is{constructor(e,r){if(!e)throw new Lv.ArgumentNullError("fetchCallback");if(!r)throw new Lv.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=e,this.privFetchOnExpiryCallback=r}fetch(e){return this.privFetchCallback(e).then(r=>new xv.AuthInfo(Bv.HeaderNames.Authorization,r===void 0?void 0:Is.privTokenPrefix+r))}fetchOnExpiry(e){return this.privFetchOnExpiryCallback(e).then(r=>new xv.AuthInfo(Bv.HeaderNames.Authorization,r===void 0?void 0:Is.privTokenPrefix+r))}}zc.CognitiveTokenAuthentication=Is;Is.privTokenPrefix="Bearer ";var sC={};Object.defineProperty(sC,"__esModule",{value:!0});var aC={};Object.defineProperty(aC,"__esModule",{value:!0});var ui={},vl={},jc={};const OT={},kT=Object.freeze(Object.defineProperty({__proto__:null,default:OT},Symbol.toStringTag,{value:"Module"})),rn=nm(kT);var Nd={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevel=void 0;const e=D();Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return e.EventType}})})(Nd);var N={};Object.defineProperty(N,"__esModule",{value:!0});N.Contracts=void 0;class rr{static throwIfNullOrUndefined(e,r){if(e==null)throw new Error("throwIfNullOrUndefined:"+r)}static throwIfNull(e,r){if(e===null)throw new Error("throwIfNull:"+r)}static throwIfNullOrWhitespace(e,r){if(rr.throwIfNullOrUndefined(e,r),(""+e).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+r)}static throwIfNullOrTooLong(e,r,n){if(rr.throwIfNullOrUndefined(e,r),(""+e).length>n)throw new Error("throwIfNullOrTooLong:"+r+" (more than "+n.toString()+" characters)")}static throwIfNullOrTooShort(e,r,n){if(rr.throwIfNullOrUndefined(e,r),(""+e).length<n)throw new Error("throwIfNullOrTooShort:"+r+" (less than "+n.toString()+" characters)")}static throwIfDisposed(e){if(e)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(e,r){if(rr.throwIfNullOrUndefined(e,r),e.length===0)throw new Error("throwIfArrayEmptyOrWhitespace:"+r);for(const n of e)rr.throwIfNullOrWhitespace(n,r)}static throwIfFileDoesNotExist(e,r){rr.throwIfNullOrWhitespace(e,r)}static throwIfNotUndefined(e,r){if(e!==void 0)throw new Error("throwIfNotUndefined:"+r)}}N.Contracts=rr;var MT=q&&q.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),bT=q&&q.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),DT=q&&q.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&MT(e,t,r);return bT(e,t),e};Object.defineProperty(jc,"__esModule",{value:!0});jc.ConsoleLoggingListener=void 0;const Fv=DT(rn),li=Nd,NT=N;class zT{constructor(e=li.LogLevel.None){this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=e}set logPath(e){NT.Contracts.throwIfNullOrUndefined(Fv.openSync,`
File System access not available`),this.privLogPath=e}set enableConsoleOutput(e){this.privEnableConsoleOutput=e}onEvent(e){if(e.eventType>=this.privLogLevelFilter){const r=this.toString(e);if(this.privLogPath&&Fv.writeFileSync(this.privLogPath,r+`
`,{flag:"a+"}),this.privEnableConsoleOutput)switch(e.eventType){case li.LogLevel.Debug:console.debug(r);break;case li.LogLevel.Info:console.info(r);break;case li.LogLevel.Warning:console.warn(r);break;case li.LogLevel.Error:console.error(r);break;default:console.log(r);break}}}toString(e){const r=[`${e.eventTime}`,`${e.name}`],n=e;for(const i in n)if(i&&e.hasOwnProperty(i)&&i!=="eventTime"&&i!=="eventType"&&i!=="eventId"&&i!=="name"&&i!=="constructor"){const s=n[i];let a="<NULL>";s!=null&&(typeof s=="number"||typeof s=="string"?a=s.toString():a=JSON.stringify(s)),r.push(`${i}: ${a}`)}return r.join(" | ")}}jc.ConsoleLoggingListener=zT;var cC={};Object.defineProperty(cC,"__esModule",{value:!0});var fl={},Er={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AudioStreamFormatImpl=t.AudioStreamFormat=t.AudioFormatTag=void 0;var e;(function(i){i[i.PCM=1]="PCM",i[i.MuLaw=2]="MuLaw",i[i.Siren=3]="Siren",i[i.MP3=4]="MP3",i[i.SILKSkype=5]="SILKSkype",i[i.OGG_OPUS=6]="OGG_OPUS",i[i.WEBM_OPUS=7]="WEBM_OPUS",i[i.ALaw=8]="ALaw",i[i.FLAC=9]="FLAC",i[i.OPUS=10]="OPUS"})(e=t.AudioFormatTag||(t.AudioFormatTag={}));class r{static getDefaultInputFormat(){return n.getDefaultInputFormat()}static getWaveFormat(s,a,o,c){return new n(s,a,o,c)}static getWaveFormatPCM(s,a,o){return new n(s,a,o)}}t.AudioStreamFormat=r;class n extends r{constructor(s=16e3,a=16,o=1,c=e.PCM){super();let u=!0;switch(c){case e.PCM:this.formatTag=1;break;case e.ALaw:this.formatTag=6;break;case e.MuLaw:this.formatTag=7;break;default:u=!1}if(this.bitsPerSample=a,this.samplesPerSec=s,this.channels=o,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),u){this.privHeader=new ArrayBuffer(44);const l=new DataView(this.privHeader);this.setString(l,0,"RIFF"),l.setUint32(4,0,!0),this.setString(l,8,"WAVEfmt "),l.setUint32(16,16,!0),l.setUint16(20,this.formatTag,!0),l.setUint16(22,this.channels,!0),l.setUint32(24,this.samplesPerSec,!0),l.setUint32(28,this.avgBytesPerSec,!0),l.setUint16(32,this.channels*(this.bitsPerSample/8),!0),l.setUint16(34,this.bitsPerSample,!0),this.setString(l,36,"data"),l.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new n}static getAudioContext(s){const a=window.AudioContext||window.webkitAudioContext||!1;if(a)return s!==void 0&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new a({sampleRate:s}):new a;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(s,a,o){for(let c=0;c<o.length;c++)s.setUint8(a+c,o.charCodeAt(c))}}t.AudioStreamFormatImpl=n})(Er);var qv;function jT(){return qv||(qv=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MicAudioSource=t.AudioWorkletSourceURLPropertyName=void 0;const e=k(),r=D(),n=Er;t.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";class i{constructor(a,o,c,u){this.privRecorder=a,this.deviceId=o,this.privStreams={},this.privOutputChunkSize=i.AUDIOFORMAT.avgBytesPerSec/10,this.privId=c||r.createNoDashGuid(),this.privEvents=new r.EventSource,this.privMediaStream=u||null,this.privIsClosing=!1}get format(){return Promise.resolve(i.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new r.Deferred;try{this.createAudioContext()}catch(c){if(c instanceof Error){const u=c;this.privInitializeDeferral.reject(u.name+": "+u.message)}else this.privInitializeDeferral.reject(c);return this.privInitializeDeferral.promise}const a=window.navigator;let o=a.getUserMedia||a.webkitGetUserMedia||a.mozGetUserMedia||a.msGetUserMedia;if(a.mediaDevices&&(o=(c,u,l)=>{a.mediaDevices.getUserMedia(c).then(u).catch(l)}),o){const c=()=>{this.onEvent(new r.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new r.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):o({audio:this.deviceId?{deviceId:this.deviceId}:!0,video:!1},u=>{this.privMediaStream=u,this.onEvent(new r.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()},u=>{const l=`Error occurred during microphone initialization: ${u}`;this.privInitializeDeferral.reject(l),this.onEvent(new r.AudioSourceErrorEvent(this.privId,l))})};this.privContext.state==="suspended"?this.privContext.resume().then(c).catch(u=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${u}`)}):c()}else{const c="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(c),this.onEvent(new r.AudioSourceErrorEvent(c,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(a){return this.onEvent(new r.AudioStreamNodeAttachingEvent(this.privId,a)),this.listen(a).then(o=>(this.onEvent(new r.AudioStreamNodeAttachedEvent(this.privId,a)),{detach:async()=>(o.readEnded(),delete this.privStreams[a],this.onEvent(new r.AudioStreamNodeDetachedEvent(this.privId,a)),this.turnOff()),id:()=>a,read:()=>o.read()}))}detach(a){a&&this.privStreams[a]&&(this.privStreams[a].close(),delete this.privStreams[a],this.onEvent(new r.AudioStreamNodeDetachedEvent(this.privId,a)))}async turnOff(){for(const a in this.privStreams)if(a){const o=this.privStreams[a];o&&o.close()}this.onEvent(new r.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(await this.privInitializeDeferral,this.privInitializeDeferral=null),await this.destroyAudioContext()}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then(a=>({bitspersample:i.AUDIOFORMAT.bitsPerSample,channelcount:i.AUDIOFORMAT.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:a,samplerate:i.AUDIOFORMAT.samplesPerSec,type:e.type.Microphones}))}setProperty(a,o){if(a===t.AudioWorkletSourceURLPropertyName)this.privRecorder.setWorkletUrl(o);else throw new Error("Property '"+a+"' is not supported on Microphone.")}getMicrophoneLabel(){const a="microphone";if(this.privMicrophoneLabel!==void 0)return Promise.resolve(this.privMicrophoneLabel);if(this.privMediaStream===void 0||!this.privMediaStream.active)return Promise.resolve(a);this.privMicrophoneLabel=a;const o=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(o===void 0)return Promise.resolve(this.privMicrophoneLabel);const c=new r.Deferred;return navigator.mediaDevices.enumerateDevices().then(u=>{for(const l of u)if(l.deviceId===o){this.privMicrophoneLabel=l.label;break}c.resolve(this.privMicrophoneLabel)},()=>c.resolve(this.privMicrophoneLabel)),c.promise}async listen(a){await this.turnOn();const o=new r.ChunkedArrayBufferStream(this.privOutputChunkSize,a);this.privStreams[a]=o;try{this.privRecorder.record(this.privContext,this.privMediaStream,o)}catch(u){throw this.onEvent(new r.AudioStreamNodeErrorEvent(this.privId,a,u)),u}return o}onEvent(a){this.privEvents.onEvent(a),r.Events.instance.onEvent(a)}createAudioContext(){this.privContext||(this.privContext=n.AudioStreamFormatImpl.getAudioContext(i.AUDIOFORMAT.samplesPerSec))}async destroyAudioContext(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let a=!1;"close"in this.privContext&&(a=!0),a?this.privIsClosing||(this.privIsClosing=!0,await this.privContext.close(),this.privContext=null,this.privIsClosing=!1):this.privContext!==null&&this.privContext.state==="running"&&await this.privContext.suspend()}}t.MicAudioSource=i,i.AUDIOFORMAT=n.AudioStreamFormat.getDefaultInputFormat()}(fl)),fl}var pi={},Uv;function LT(){if(Uv)return pi;Uv=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.FileAudioSource=void 0;const t=k(),e=D(),r=Er;let n=class{constructor(s,a,o){this.privStreams={},this.privHeaderEnd=44,this.privId=o||e.createNoDashGuid(),this.privEvents=new e.EventSource,this.privSource=s,typeof window<"u"&&typeof Blob<"u"&&this.privSource instanceof Blob?this.privFilename=s.name:this.privFilename=a||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const s=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new e.AudioSourceErrorEvent(s,"")),Promise.reject(s)}this.onEvent(new e.AudioSourceInitializingEvent(this.privId)),this.onEvent(new e.AudioSourceReadyEvent(this.privId))}id(){return this.privId}async attach(s){this.onEvent(new e.AudioStreamNodeAttachingEvent(this.privId,s));const a=await this.upload(s);return this.onEvent(new e.AudioStreamNodeAttachedEvent(this.privId,s)),Promise.resolve({detach:async()=>{a.readEnded(),delete this.privStreams[s],this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,s)),await this.turnOff()},id:()=>s,read:()=>a.read()})}detach(s){s&&this.privStreams[s]&&(this.privStreams[s].close(),delete this.privStreams[s],this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,s)))}turnOff(){for(const s in this.privStreams)if(s){const a=this.privStreams[s];a&&!a.isClosed&&a.close()}return this.onEvent(new e.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then(s=>Promise.resolve({bitspersample:s.bitsPerSample,channelcount:s.channels,connectivity:t.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:s.samplesPerSec,type:t.type.File}))}readHeader(){const a=this.privSource.slice(0,4296),o=new e.Deferred,c=u=>{const l=new DataView(u),p=f=>String.fromCharCode(l.getUint8(f),l.getUint8(f+1),l.getUint8(f+2),l.getUint8(f+3));if(p(0)!=="RIFF"){o.reject("Invalid WAV header in file, RIFF was not found");return}if(p(8)!=="WAVE"||p(12)!=="fmt "){o.reject("Invalid WAV header in file, WAVEfmt was not found");return}const d=l.getInt32(16,!0),h=l.getUint16(22,!0),v=l.getUint32(24,!0),g=l.getUint16(34,!0);let y=36+Math.max(d-16,0);for(;p(y)!=="data";y+=2)if(y>4288){o.reject("Invalid WAV header in file, data block was not found");return}this.privHeaderEnd=y+8,o.resolve(r.AudioStreamFormat.getWaveFormatPCM(v,g,h))};if(typeof window<"u"&&typeof Blob<"u"&&a instanceof Blob){const u=new FileReader;u.onload=l=>{const p=l.target.result;c(p)},u.readAsArrayBuffer(a)}else{const u=a;c(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength))}return o.promise}async upload(s){const a=o=>{const c=`Error occurred while processing '${this.privFilename}'. ${o}`;throw this.onEvent(new e.AudioStreamNodeErrorEvent(this.privId,s,c)),new Error(c)};try{await this.turnOn();const o=await this.privAudioFormatPromise,c=new e.ChunkedArrayBufferStream(o.avgBytesPerSec/10,s);this.privStreams[s]=c;const u=this.privSource.slice(this.privHeaderEnd),l=p=>{c.isClosed||(c.writeStreamChunk({buffer:p,isEnd:!1,timeReceived:Date.now()}),c.close())};if(typeof window<"u"&&typeof Blob<"u"&&u instanceof Blob){const p=new FileReader;p.onerror=d=>a(d.toString()),p.onload=d=>{const h=d.target.result;l(h)},p.readAsArrayBuffer(u)}else{const p=u;l(p.buffer.slice(p.byteOffset,p.byteOffset+p.byteLength))}return c}catch(o){a(o)}}onEvent(s){this.privEvents.onEvent(s),e.Events.instance.onEvent(s)}};return pi.FileAudioSource=n,pi}var Lc={};Object.defineProperty(Lc,"__esModule",{value:!0});Lc.PcmRecorder=void 0;const xT=D();class BT{constructor(e){this.privStopInputOnRelease=e}record(e,r,n){const s=new xT.RiffPcmEncoder(e.sampleRate,16e3),a=e.createMediaStreamSource(r),o=()=>{const u=(()=>{let l=0;try{return e.createScriptProcessor(l,1,1)}catch{l=2048;let d=e.sampleRate;for(;l<16384&&d>=32e3;)l<<=1,d>>=1;return e.createScriptProcessor(l,1,1)}})();u.onaudioprocess=l=>{const p=l.inputBuffer.getChannelData(0);if(n&&!n.isClosed){const d=s.encode(p);d&&n.writeStreamChunk({buffer:d,isEnd:!1,timeReceived:Date.now()})}},a.connect(u),u.connect(e.destination),this.privMediaResources={scriptProcessorNode:u,source:a,stream:r}},c=!!this.privSpeechProcessorScript&&this.privSpeechProcessorScript.toLowerCase()==="ignore";if(e.audioWorklet&&!c){if(!this.privSpeechProcessorScript){const u=`class SP extends AudioWorkletProcessor {
                    constructor(options) {
                      super(options);
                    }
                    process(inputs, outputs) {
                      const input = inputs[0];
                      const output = [];
                      for (let channel = 0; channel < input.length; channel += 1) {
                        output[channel] = input[channel];
                      }
                      this.port.postMessage(output[0]);
                      return true;
                    }
                  }
                  registerProcessor('speech-processor', SP);`,l=new Blob([u],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(l)}e.audioWorklet.addModule(this.privSpeechProcessorScript).then(()=>{const u=new AudioWorkletNode(e,"speech-processor");u.port.onmessage=l=>{const p=l.data;if(n&&!n.isClosed){const d=s.encode(p);d&&n.writeStreamChunk({buffer:d,isEnd:!1,timeReceived:Date.now()})}},a.connect(u),u.connect(e.destination),this.privMediaResources={scriptProcessorNode:u,source:a,stream:r}}).catch(()=>{o()})}else try{o()}catch(u){throw new Error(`Unable to start audio worklet node for PCMRecorder: ${u}`)}}releaseMediaResources(e){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(e.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(r=>r.stop()),this.privMediaResources.source=null))}setWorkletUrl(e){this.privSpeechProcessorScript=e}}Lc.PcmRecorder=BT;var xc={},Bs={},FT=q&&q.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),qT=q&&q.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),uC=q&&q.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&FT(e,t,r);return qT(e,t),e},zd=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Bs,"__esModule",{value:!0});Bs.WebsocketMessageAdapter=void 0;const UT=uC(rn),WT=uC(rn),HT=zd(rn),VT=zd(rn),KT=zd(rn),$T=me,x=D();class Ts{constructor(e,r,n,i,s,a){if(!e)throw new x.ArgumentNullError("uri");if(!n)throw new x.ArgumentNullError("messageFormatter");this.proxyInfo=i,this.privConnectionEvents=new x.EventSource,this.privConnectionId=r,this.privMessageFormatter=n,this.privConnectionState=x.ConnectionState.None,this.privUri=e,this.privHeaders=s,this.privEnableCompression=a,this.privHeaders[$T.HeaderNames.ConnectionId]=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===x.ConnectionState.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new x.Deferred,this.privCertificateValidatedDeferral=new x.Deferred,this.privConnectionState=x.ConnectionState.Connecting;try{if(typeof WebSocket<"u"&&!Ts.forceNpmWebSocket)this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);else{const e={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression};this.privCertificateValidatedDeferral.resolve(),e.agent=this.getAgent();let n=new URL(this.privUri).protocol;(n==null?void 0:n.toLocaleLowerCase())==="wss:"?n="https:":(n==null?void 0:n.toLocaleLowerCase())==="ws:"&&(n="http:"),e.agent.protocol=n,this.privWebsocketClient=new KT.default(this.privUri,e)}this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new x.Queue,this.privDisconnectDeferral=new x.Deferred,this.privSendMessageQueue=new x.Queue,this.processSendQueue().catch(e=>{x.Events.instance.onEvent(new x.BackgroundEvent(e))})}catch(e){return this.privConnectionEstablishDeferral.resolve(new x.ConnectionOpenResponse(500,e)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new x.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then(()=>{this.privConnectionState=x.ConnectionState.Connected,this.onEvent(new x.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new x.ConnectionOpenResponse(200,""))},e=>{this.privConnectionEstablishDeferral.reject(e)})},this.privWebsocketClient.onerror=e=>{this.onEvent(new x.ConnectionErrorEvent(this.privConnectionId,e.message,e.type)),this.privLastErrorReceived=e.message},this.privWebsocketClient.onclose=e=>{this.privConnectionState===x.ConnectionState.Connecting?(this.privConnectionState=x.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new x.ConnectionOpenResponse(e.code,e.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=x.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new x.ConnectionClosedEvent(this.privConnectionId,e.code,e.reason))),this.onClose(e.code,e.reason).catch(r=>{x.Events.instance.onEvent(new x.BackgroundEvent(r))})},this.privWebsocketClient.onmessage=e=>{const r=new Date().toISOString();if(this.privConnectionState===x.ConnectionState.Connected){const n=new x.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(n.promise),e.data instanceof ArrayBuffer){const i=new x.RawWebsocketMessage(x.MessageType.Binary,e.data);this.privMessageFormatter.toConnectionMessage(i).then(s=>{this.onEvent(new x.ConnectionMessageReceivedEvent(this.privConnectionId,r,s)),n.resolve(s)},s=>{n.reject(`Invalid binary message format. Error: ${s}`)})}else{const i=new x.RawWebsocketMessage(x.MessageType.Text,e.data);this.privMessageFormatter.toConnectionMessage(i).then(s=>{this.onEvent(new x.ConnectionMessageReceivedEvent(this.privConnectionId,r,s)),n.resolve(s)},s=>{n.reject(`Invalid text message format. Error: ${s}`)})}}},this.privConnectionEstablishDeferral.promise}send(e){if(this.privConnectionState!==x.ConnectionState.Connected)return Promise.reject(`Cannot send on connection that is in ${x.ConnectionState[this.privConnectionState]} state`);const r=new x.Deferred,n=new x.Deferred;return this.privSendMessageQueue.enqueueFromPromise(n.promise),this.privMessageFormatter.fromConnectionMessage(e).then(i=>{n.resolve({Message:e,RawWebsocketMessage:i,sendStatusDeferral:r})},i=>{n.reject(`Error formatting the message. ${i}`)}),r.promise}read(){return this.privConnectionState!==x.ConnectionState.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue()}close(e){if(this.privWebsocketClient)this.privConnectionState!==x.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,e||"Normal closure by client");else return Promise.resolve();return this.privDisconnectDeferral.promise}get events(){return this.privConnectionEvents}sendRawMessage(e){try{if(!e)return Promise.resolve();if(this.onEvent(new x.ConnectionMessageSentEvent(this.privConnectionId,new Date().toISOString(),e.Message)),this.isWebsocketOpen)this.privWebsocketClient.send(e.RawWebsocketMessage.payload);else return Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+e.Message.id+" "+new Error().stack);return Promise.resolve()}catch(r){return Promise.reject(`websocket send error: ${r}`)}}async onClose(e,r){const n=`Connection closed. ${e}: ${r}`;this.privConnectionState=x.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),await this.privReceivingMessageQueue.drainAndDispose(()=>{},n),await this.privSendMessageQueue.drainAndDispose(i=>{i.sendStatusDeferral.reject(n)},n)}async processSendQueue(){for(;;){const r=await this.privSendMessageQueue.dequeue();if(!r)return;try{await this.sendRawMessage(r),r.sendStatusDeferral.resolve()}catch(n){r.sendStatusDeferral.reject(n)}}}onEvent(e){this.privConnectionEvents.onEvent(e),x.Events.instance.onEvent(e)}getAgent(){const e=new HT.default.Agent(this.createConnection);return this.proxyInfo!==void 0&&this.proxyInfo.HostName!==void 0&&this.proxyInfo.Port>0&&(e.proxyInfo=this.proxyInfo),e}static GetProxyAgent(e){const r={host:e.HostName,port:e.Port};return e.UserName?r.headers={"Proxy-Authentication":"Basic "+new Buffer(`${e.UserName}:${e.Password===void 0?"":e.Password}`).toString("base64")}:r.headers={},r.headers.requestOCSP="true",new VT.default(r)}createConnection(e,r){let n;if(r={...r,requestOCSP:!0,servername:r.host},this.proxyInfo){const s=Ts.GetProxyAgent(this.proxyInfo);n=new Promise((a,o)=>{s.callback(e,r,(c,u)=>{c?o(c):a(u)})})}else r.secureEndpoint?n=Promise.resolve(WT.connect(r)):n=Promise.resolve(UT.connect(r));return n}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}}Bs.WebsocketMessageAdapter=Ts;Ts.forceNpmWebSocket=!1;Object.defineProperty(xc,"__esModule",{value:!0});xc.WebsocketConnection=void 0;const gl=D(),JT=Bs;class QT{constructor(e,r,n,i,s,a=!1,o){if(this.privIsDisposed=!1,!e)throw new gl.ArgumentNullError("uri");if(!i)throw new gl.ArgumentNullError("messageFormatter");this.privMessageFormatter=i;let c="",u=0;if(r){for(const l in r)if(l){c+=u===0&&e.indexOf("?")===-1?"?":"&";const p=encodeURIComponent(l);c+=p;let d=r[l];d&&(d=encodeURIComponent(d),c+=`=${d}`),u++}}if(n){for(const l in n)if(l){c+=u===0&&e.indexOf("?")===-1?"?":"&";const p=encodeURIComponent(n[l]);c+=`${l}=${p}`,u++}}this.privUri=e+c,this.privId=o||gl.createNoDashGuid(),this.privConnectionMessageAdapter=new JT.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,s,n,a)}async dispose(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&await this.privConnectionMessageAdapter.close()}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(e){return this.privConnectionMessageAdapter.send(e)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}}xc.WebsocketConnection=QT;var Bc={};Object.defineProperty(Bc,"__esModule",{value:!0});Bc.ReplayableAudioNode=void 0;class GT{constructor(e,r){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=e,this.privBytesPerSecond=r}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&this.privBuffers.length!==0){const e=this.privReplayOffset-this.privBufferStartOffset;let r=Math.round(e*this.privBytesPerSecond*1e-7);r%2!==0&&r++;let n=0;for(;n<this.privBuffers.length&&r>=this.privBuffers[n].chunk.buffer.byteLength;)r-=this.privBuffers[n++].chunk.buffer.byteLength;if(n<this.privBuffers.length){const i=this.privBuffers[n].chunk.buffer.slice(r);return this.privReplayOffset+=i.byteLength/this.privBytesPerSecond*1e7,n===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:i,isEnd:!1,timeReceived:this.privBuffers[n].chunk.timeReceived})}}return this.privAudioNode.read().then(e=>(e&&e.buffer&&(this.privBuffers.push(new XT(e,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=e.buffer.byteLength),e))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&this.privBuffers.length!==0&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(e){if(this.privBuffers===void 0||this.privBuffers.length===0)return;this.privLastShrinkOffset=e;const r=e-this.privBufferStartOffset;let n=Math.round(r*this.privBytesPerSecond*1e-7),i=0;for(;i<this.privBuffers.length&&n>=this.privBuffers[i].chunk.buffer.byteLength;)n-=this.privBuffers[i++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(e-n/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(i)}findTimeAtOffset(e){if(e<this.privBufferStartOffset||this.privBuffers===void 0)return 0;for(const r of this.privBuffers){const n=r.byteOffset/this.privBytesPerSecond*1e7,i=n+r.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(e>=n&&e<=i)return r.chunk.timeReceived}return 0}}Bc.ReplayableAudioNode=GT;class XT{constructor(e,r,n){this.chunk=e,this.serial=r,this.byteOffset=n}}var di={},ml={},Dt={},Fs={},ZT=q&&q.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),YT=q&&q.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),e1=q&&q.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&ZT(e,t,r);return YT(e,t),e};Object.defineProperty(Fs,"__esModule",{value:!0});Fs.AudioFileWriter=void 0;const hi=e1(rn),yl=N;class t1{constructor(e){yl.Contracts.throwIfNullOrUndefined(hi.openSync,`
File System access not available, please use Push or PullAudioOutputStream`),this.privFd=hi.openSync(e,"w")}set format(e){yl.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=e;let r=0;this.privAudioFormat.hasHeader&&(r=this.privAudioFormat.header.byteLength),this.privFd!==void 0&&(this.privWriteStream=hi.createWriteStream("",{fd:this.privFd,start:r,autoClose:!1}))}write(e){yl.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),this.privWriteStream!==void 0&&this.privWriteStream.write(new Uint8Array(e.slice(0)))}close(){this.privFd!==void 0&&(this.privWriteStream.on("finish",()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),hi.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),hi.closeSync(this.privFd),this.privFd=void 0}),this.privWriteStream.end())}id(){return this.privId}}Fs.AudioFileWriter=t1;var Je={},Wv;function lC(){if(Wv)return Je;Wv=1,Object.defineProperty(Je,"__esModule",{value:!0}),Je.PullAudioInputStreamImpl=Je.PullAudioInputStream=Je.PushAudioInputStreamImpl=Je.PushAudioInputStream=Je.AudioInputStream=void 0;const t=k(),e=D(),r=pt,n=I(),i=Er;let s=class{constructor(){}static createPushStream(p){return a.create(p)}static createPullStream(p,d){return c.create(p,d)}};Je.AudioInputStream=s;class a extends s{static create(p){return new o(p)}}Je.PushAudioInputStream=a;class o extends a{constructor(p){super(),p===void 0?this.privFormat=i.AudioStreamFormatImpl.getDefaultInputFormat():this.privFormat=p,this.privEvents=new e.EventSource,this.privId=r.createNoDashGuid(),this.privStream=new e.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(p){this.privStream.writeStreamChunk({buffer:p,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new e.AudioSourceInitializingEvent(this.privId)),this.onEvent(new e.AudioSourceReadyEvent(this.privId))}async attach(p){this.onEvent(new e.AudioStreamNodeAttachingEvent(this.privId,p)),await this.turnOn();const d=this.privStream;return this.onEvent(new e.AudioStreamNodeAttachedEvent(this.privId,p)),{detach:async()=>(this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,p)),this.turnOff()),id:()=>p,read:()=>d.read()}}detach(p){this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,p))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:t.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:t.type.Stream})}onEvent(p){this.privEvents.onEvent(p),e.Events.instance.onEvent(p)}toBuffer(p){const d=Buffer.alloc(p.byteLength),h=new Uint8Array(p);for(let v=0;v<d.length;++v)d[v]=h[v];return d}}Je.PushAudioInputStreamImpl=o;class c extends s{constructor(){super()}static create(p,d){return new u(p,d)}}Je.PullAudioInputStream=c;class u extends c{constructor(p,d){super(),d===void 0?this.privFormat=n.AudioStreamFormat.getDefaultInputFormat():this.privFormat=d,this.privEvents=new e.EventSource,this.privId=r.createNoDashGuid(),this.privCallback=p,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new e.AudioSourceInitializingEvent(this.privId)),this.onEvent(new e.AudioSourceReadyEvent(this.privId))}async attach(p){return this.onEvent(new e.AudioStreamNodeAttachingEvent(this.privId,p)),await this.turnOn(),this.onEvent(new e.AudioStreamNodeAttachedEvent(this.privId,p)),{detach:()=>(this.privCallback.close(),this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,p)),this.turnOff()),id:()=>p,read:()=>{let d=0,h;for(;d<this.privBufferSize;){const v=new ArrayBuffer(this.privBufferSize-d),g=this.privCallback.read(v);if(h===void 0?h=v:new Int8Array(h).set(new Int8Array(v),d),g===0)break;d+=g}return Promise.resolve({buffer:h.slice(0,d),isEnd:this.privIsClosed||d===0,timeReceived:Date.now()})}}}detach(p){this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,p))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:t.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:t.type.Stream})}onEvent(p){this.privEvents.onEvent(p),e.Events.instance.onEvent(p)}}return Je.PullAudioInputStreamImpl=u,Je}var Pe={},wr={},jd={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisOutputFormat=void 0,function(e){e[e.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",e[e.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",e[e.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",e[e.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",e[e.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",e[e.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",e[e.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",e[e.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",e[e.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",e[e.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",e[e.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",e[e.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",e[e.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",e[e.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",e[e.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",e[e.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",e[e.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",e[e.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",e[e.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",e[e.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",e[e.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",e[e.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",e[e.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",e[e.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",e[e.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",e[e.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",e[e.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",e[e.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",e[e.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",e[e.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",e[e.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",e[e.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",e[e.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",e[e.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",e[e.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",e[e.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",e[e.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm"}(t.SpeechSynthesisOutputFormat||(t.SpeechSynthesisOutputFormat={}))})(jd);Object.defineProperty(wr,"__esModule",{value:!0});wr.AudioOutputFormatImpl=void 0;const U=jd,F=Er;class z extends F.AudioStreamFormatImpl{constructor(e,r,n,i,s,a,o,c,u){super(n,a,r,e),this.formatTag=e,this.avgBytesPerSec=i,this.blockAlign=s,this.priAudioFormatString=o,this.priRequestAudioFormatString=c,this.priHasHeader=u}static fromSpeechSynthesisOutputFormat(e){return e===void 0?z.getDefaultOutputFormat():z.fromSpeechSynthesisOutputFormatString(z.SpeechSynthesisOutputFormatToString[e])}static fromSpeechSynthesisOutputFormatString(e){switch(e){case"raw-8khz-8bit-mono-mulaw":return new z(F.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,e,!1);case"riff-16khz-16kbps-mono-siren":return new z(F.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new z(F.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,e,!1);case"audio-16khz-32kbitrate-mono-mp3":return new z(F.AudioFormatTag.MP3,1,16e3,4096,2,16,e,e,!1);case"audio-16khz-128kbitrate-mono-mp3":return new z(F.AudioFormatTag.MP3,1,16e3,16384,2,16,e,e,!1);case"audio-16khz-64kbitrate-mono-mp3":return new z(F.AudioFormatTag.MP3,1,16e3,8192,2,16,e,e,!1);case"audio-24khz-48kbitrate-mono-mp3":return new z(F.AudioFormatTag.MP3,1,24e3,6144,2,16,e,e,!1);case"audio-24khz-96kbitrate-mono-mp3":return new z(F.AudioFormatTag.MP3,1,24e3,12288,2,16,e,e,!1);case"audio-24khz-160kbitrate-mono-mp3":return new z(F.AudioFormatTag.MP3,1,24e3,20480,2,16,e,e,!1);case"raw-16khz-16bit-mono-truesilk":return new z(F.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,e,e,!1);case"riff-8khz-16bit-mono-pcm":return new z(F.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new z(F.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new z(F.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new z(F.AudioFormatTag.PCM,1,16e3,32e3,2,16,e,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new z(F.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new z(F.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new z(F.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,e,e,!1);case"ogg-24khz-16bit-mono-opus":return new z(F.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,e,e,!1);case"raw-48khz-16bit-mono-pcm":return new z(F.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new z(F.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new z(F.AudioFormatTag.MP3,1,48e3,12288,2,16,e,e,!1);case"audio-48khz-192kbitrate-mono-mp3":return new z(F.AudioFormatTag.MP3,1,48e3,24576,2,16,e,e,!1);case"ogg-48khz-16bit-mono-opus":return new z(F.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,e,e,!1);case"webm-16khz-16bit-mono-opus":return new z(F.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,e,e,!1);case"webm-24khz-16bit-mono-opus":return new z(F.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,e,e,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new z(F.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new z(F.AudioFormatTag.OPUS,1,16e3,4e3,2,16,e,e,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new z(F.AudioFormatTag.OPUS,1,24e3,6e3,2,16,e,e,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new z(F.AudioFormatTag.OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-24khz-16bit-mono-flac":return new z(F.AudioFormatTag.FLAC,1,24e3,24e3,2,16,e,e,!1);case"audio-48khz-16bit-mono-flac":return new z(F.AudioFormatTag.FLAC,1,48e3,3e4,2,16,e,e,!1);case"raw-24khz-16bit-mono-truesilk":return new z(F.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,e,e,!1);case"raw-8khz-8bit-mono-alaw":return new z(F.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,e,!1);case"riff-8khz-8bit-mono-alaw":return new z(F.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new z(F.AudioFormatTag.PCM,1,22050,44100,2,16,e,e,!1);case"riff-22050hz-16bit-mono-pcm":return new z(F.AudioFormatTag.PCM,1,22050,44100,2,16,e,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new z(F.AudioFormatTag.PCM,1,44100,88200,2,16,e,e,!1);case"riff-44100hz-16bit-mono-pcm":return new z(F.AudioFormatTag.PCM,1,44100,88200,2,16,e,"raw-44100hz-16bit-mono-pcm",!0);case"riff-16khz-16bit-mono-pcm":default:return new z(F.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return z.fromSpeechSynthesisOutputFormatString(typeof window<"u"?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(e){if(this.priHasHeader){const r=new DataView(this.privHeader);r.setUint32(4,e+this.privHeader.byteLength-8,!0),r.setUint32(40,e,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(e){if(!this.hasHeader)return e;this.updateHeader(e.byteLength);const r=new Uint8Array(e.byteLength+this.header.byteLength);return r.set(new Uint8Array(this.header),0),r.set(new Uint8Array(e),this.header.byteLength),r.buffer}}wr.AudioOutputFormatImpl=z;z.SpeechSynthesisOutputFormatToString={[U.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[U.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[U.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[U.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[U.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[U.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[U.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[U.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[U.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[U.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[U.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[U.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[U.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[U.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[U.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[U.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[U.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[U.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[U.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[U.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[U.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[U.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[U.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[U.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[U.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[U.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[U.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[U.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[U.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[U.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[U.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[U.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[U.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[U.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[U.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[U.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[U.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm"};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.PushAudioOutputStreamImpl=Pe.PushAudioOutputStream=Pe.PullAudioOutputStreamImpl=Pe.PullAudioOutputStream=Pe.AudioOutputStream=void 0;const Tp=D(),r1=N,n1=wr;class Ld{constructor(){}static createPullStream(){return xd.create()}}Pe.AudioOutputStream=Ld;class xd extends Ld{static create(){return new pC}}Pe.PullAudioOutputStream=xd;class pC extends xd{constructor(){super(),this.privId=Tp.createNoDashGuid(),this.privStream=new Tp.Stream}set format(e){e==null&&(this.privFormat=n1.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=e}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}async read(e){const r=new Int8Array(e);let n=0;if(this.privLastChunkView!==void 0){if(this.privLastChunkView.length>e.byteLength)return r.set(this.privLastChunkView.slice(0,e.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(e.byteLength),Promise.resolve(e.byteLength);r.set(this.privLastChunkView),n=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;n<e.byteLength&&!this.privStream.isReadEnded;){const i=await this.privStream.read();if(i!==void 0&&!i.isEnd){let s;i.buffer.byteLength>e.byteLength-n?(s=i.buffer.slice(0,e.byteLength-n),this.privLastChunkView=new Int8Array(i.buffer.slice(e.byteLength-n))):s=i.buffer,r.set(new Int8Array(s),n),n+=s.byteLength}else this.privStream.readEnded()}return n}write(e){r1.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}Pe.PullAudioOutputStreamImpl=pC;class dC extends Ld{constructor(){super()}static create(e){return new hC(e)}}Pe.PushAudioOutputStream=dC;class hC extends dC{constructor(e){super(),this.privId=Tp.createNoDashGuid(),this.privCallback=e}set format(e){}write(e){this.privCallback.write&&this.privCallback.write(e)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}Pe.PushAudioOutputStreamImpl=hC;var Hv;function fC(){if(Hv)return Dt;Hv=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.AudioOutputConfigImpl=Dt.AudioConfigImpl=Dt.AudioConfig=void 0;const t=ye(),e=N,r=I(),n=Fs,i=lC(),s=Pe;let a=class vC{static fromDefaultMicrophoneInput(){const l=new t.PcmRecorder(!0);return new o(new t.MicAudioSource(l))}static fromMicrophoneInput(l){const p=new t.PcmRecorder(!0);return new o(new t.MicAudioSource(p,l))}static fromWavFileInput(l,p="unnamedBuffer.wav"){return new o(new t.FileAudioSource(l,p))}static fromStreamInput(l){if(l instanceof r.PullAudioInputStreamCallback)return new o(new i.PullAudioInputStreamImpl(l));if(l instanceof r.AudioInputStream)return new o(l);if(typeof MediaStream<"u"&&l instanceof MediaStream){const p=new t.PcmRecorder(!1);return new o(new t.MicAudioSource(p,null,null,l))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new c(new r.SpeakerAudioDestination)}static fromSpeakerOutput(l){if(l===void 0)return vC.fromDefaultSpeakerOutput();if(l instanceof r.SpeakerAudioDestination)return new c(l);throw new Error("Not Supported Type")}static fromAudioFileOutput(l){return new c(new n.AudioFileWriter(l))}static fromStreamOutput(l){if(l instanceof r.PushAudioOutputStreamCallback)return new c(new s.PushAudioOutputStreamImpl(l));if(l instanceof r.PushAudioOutputStream)return new c(l);if(l instanceof r.PullAudioOutputStream)return new c(l);throw new Error("Not Supported Type")}};Dt.AudioConfig=a;class o extends a{constructor(l){super(),this.privSource=l}get format(){return this.privSource.format}close(l,p){this.privSource.turnOff().then(()=>{l&&l()},d=>{p&&p(d)})}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(l){return this.privSource.attach(l)}detach(l){return this.privSource.detach(l)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(l,p){if(e.Contracts.throwIfNull(p,"value"),this.privSource.setProperty!==void 0)this.privSource.setProperty(l,p);else throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(l,p){if(this.privSource.getProperty!==void 0)return this.privSource.getProperty(l,p);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}Dt.AudioConfigImpl=o;class c extends a{constructor(l){super(),this.privDestination=l}set format(l){this.privDestination.format=l}write(l){this.privDestination.write(l)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}}return Dt.AudioOutputConfigImpl=c,Dt}var gC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationReason=void 0,function(e){e[e.Error=0]="Error",e[e.EndOfStream=1]="EndOfStream"}(t.CancellationReason||(t.CancellationReason={}))})(gC);var Fc={};Object.defineProperty(Fc,"__esModule",{value:!0});Fc.PullAudioInputStreamCallback=void 0;class i1{}Fc.PullAudioInputStreamCallback=i1;var qc={};Object.defineProperty(qc,"__esModule",{value:!0});qc.PushAudioOutputStreamCallback=void 0;class o1{}qc.PushAudioOutputStreamCallback=o1;var Uc={};Object.defineProperty(Uc,"__esModule",{value:!0});Uc.KeywordRecognitionModel=void 0;const Vv=N;class s1{constructor(){this.privDisposed=!1}static fromFile(e){throw Vv.Contracts.throwIfFileDoesNotExist(e,"fileName"),new Error("Not yet implemented.")}static fromStream(e){throw Vv.Contracts.throwIfNull(e,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}}Uc.KeywordRecognitionModel=s1;var Wc={};Object.defineProperty(Wc,"__esModule",{value:!0});Wc.SessionEventArgs=void 0;class a1{constructor(e){this.privSessionId=e}get sessionId(){return this.privSessionId}}Wc.SessionEventArgs=a1;var vi={},Kv;function c1(){if(Kv)return vi;Kv=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.RecognitionEventArgs=void 0;const t=I();let e=class extends t.SessionEventArgs{constructor(n,i){super(i),this.privOffset=n}get offset(){return this.privOffset}};return vi.RecognitionEventArgs=e,vi}var mC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.OutputFormat=void 0,function(e){e[e.Simple=0]="Simple",e[e.Detailed=1]="Detailed"}(t.OutputFormat||(t.OutputFormat={}))})(mC);var fi={},$v;function u1(){if($v)return fi;$v=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi.IntentRecognitionEventArgs=void 0;const t=I();let e=class extends t.RecognitionEventArgs{constructor(n,i,s){super(i,s),this.privResult=n}get result(){return this.privResult}};return fi.IntentRecognitionEventArgs=e,fi}var Hc={};Object.defineProperty(Hc,"__esModule",{value:!0});Hc.RecognitionResult=void 0;class l1{constructor(e,r,n,i,s,a,o,c,u,l){this.privResultId=e,this.privReason=r,this.privText=n,this.privDuration=i,this.privOffset=s,this.privLanguage=a,this.privLanguageDetectionConfidence=o,this.privErrorDetails=c,this.privJson=u,this.privProperties=l}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}}Hc.RecognitionResult=l1;var gi={},Jv;function p1(){if(Jv)return gi;Jv=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.SpeechRecognitionResult=void 0;const t=I();let e=class extends t.RecognitionResult{constructor(n,i,s,a,o,c,u,l,p,d,h){super(n,i,s,a,o,c,u,p,d,h),this.privSpeakerId=l}get speakerId(){return this.privSpeakerId}};return gi.SpeechRecognitionResult=e,gi}var mi={},Qv;function d1(){if(Qv)return mi;Qv=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.IntentRecognitionResult=void 0;const t=I();let e=class extends t.SpeechRecognitionResult{constructor(n,i,s,a,o,c,u,l,p,d,h){super(i,s,a,o,c,u,l,void 0,p,d,h),this.privIntentId=n}get intentId(){return this.privIntentId}};return mi.IntentRecognitionResult=e,mi}var zn={};Object.defineProperty(zn,"__esModule",{value:!0});zn.LanguageUnderstandingModelImpl=zn.LanguageUnderstandingModel=void 0;const an=N;class yC{constructor(){}static fromEndpoint(e){an.Contracts.throwIfNull(e,"uri"),an.Contracts.throwIfNullOrWhitespace(e.hostname,"uri");const r=new Ta,n=e.host.indexOf(".");if(n===-1)throw new Error("Could not determine region from endpoint");r.region=e.host.substr(0,n);const i=e.pathname.lastIndexOf("/")+1;if(i===-1)throw new Error("Could not determine appId from endpoint");if(r.appId=e.pathname.substr(i),r.subscriptionKey=e.searchParams.get("subscription-key"),r.subscriptionKey===void 0)throw new Error("Could not determine subscription key from endpoint");return r}static fromAppId(e){an.Contracts.throwIfNullOrWhitespace(e,"appId");const r=new Ta;return r.appId=e,r}static fromSubscription(e,r,n){an.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),an.Contracts.throwIfNullOrWhitespace(r,"appId"),an.Contracts.throwIfNullOrWhitespace(n,"region");const i=new Ta;return i.appId=r,i.region=n,i.subscriptionKey=e,i}}zn.LanguageUnderstandingModel=yC;class Ta extends yC{}zn.LanguageUnderstandingModelImpl=Ta;var Nt={},Gv;function h1(){if(Gv)return Nt;Gv=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.MeetingTranscriptionEventArgs=Nt.ConversationTranscriptionEventArgs=Nt.SpeechRecognitionEventArgs=void 0;const t=I();let e=class extends t.RecognitionEventArgs{constructor(s,a,o){super(a,o),this.privResult=s}get result(){return this.privResult}};Nt.SpeechRecognitionEventArgs=e;class r extends t.RecognitionEventArgs{constructor(s,a,o){super(a,o),this.privResult=s}get result(){return this.privResult}}Nt.ConversationTranscriptionEventArgs=r;class n extends e{}return Nt.MeetingTranscriptionEventArgs=n,Nt}var yi={},Si={},Xv;function qs(){if(Xv)return Si;Xv=1,Object.defineProperty(Si,"__esModule",{value:!0}),Si.CancellationEventArgsBase=void 0;const t=I();let e=class extends t.RecognitionEventArgs{constructor(n,i,s,a,o){super(a,o),this.privReason=n,this.privErrorDetails=i,this.privErrorCode=s}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return Si.CancellationEventArgsBase=e,Si}var Zv;function v1(){if(Zv)return yi;Zv=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.SpeechRecognitionCanceledEventArgs=void 0;const t=qs();let e=class extends t.CancellationEventArgsBase{};return yi.SpeechRecognitionCanceledEventArgs=e,yi}var Ci={},Yv;function f1(){if(Yv)return Ci;Yv=1,Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.TranslationRecognitionEventArgs=void 0;const t=I();let e=class extends t.RecognitionEventArgs{constructor(n,i,s){super(i,s),this.privResult=n}get result(){return this.privResult}};return Ci.TranslationRecognitionEventArgs=e,Ci}var Pi={},ef;function g1(){if(ef)return Pi;ef=1,Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.TranslationSynthesisEventArgs=void 0;const t=I();let e=class extends t.SessionEventArgs{constructor(n,i){super(i),this.privResult=n}get result(){return this.privResult}};return Pi.TranslationSynthesisEventArgs=e,Pi}var Ri={},tf;function CC(){if(tf)return Ri;tf=1,Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.TranslationRecognitionResult=void 0;const t=I();let e=class SC extends t.SpeechRecognitionResult{constructor(n,i,s,a,o,c,u,l,p,d,h){super(i,s,a,o,c,u,l,void 0,p,d,h),this.privTranslations=n}static fromSpeechRecognitionResult(n){return new SC(void 0,n.resultId,n.reason,n.text,n.duration,n.offset,n.language,n.languageDetectionConfidence,n.errorDetails,n.json,n.properties)}get translations(){return this.privTranslations}};return Ri.TranslationRecognitionResult=e,Ri}var Vc={};Object.defineProperty(Vc,"__esModule",{value:!0});Vc.TranslationSynthesisResult=void 0;class m1{constructor(e,r){this.privReason=e,this.privAudio=r}get audio(){return this.privAudio}get reason(){return this.privReason}}Vc.TranslationSynthesisResult=m1;var PC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ResultReason=void 0,function(e){e[e.NoMatch=0]="NoMatch",e[e.Canceled=1]="Canceled",e[e.RecognizingSpeech=2]="RecognizingSpeech",e[e.RecognizedSpeech=3]="RecognizedSpeech",e[e.RecognizedKeyword=4]="RecognizedKeyword",e[e.RecognizingIntent=5]="RecognizingIntent",e[e.RecognizedIntent=6]="RecognizedIntent",e[e.TranslatingSpeech=7]="TranslatingSpeech",e[e.TranslatedSpeech=8]="TranslatedSpeech",e[e.SynthesizingAudio=9]="SynthesizingAudio",e[e.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",e[e.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",e[e.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",e[e.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",e[e.RecognizedSpeakers=14]="RecognizedSpeakers",e[e.RecognizedSpeaker=15]="RecognizedSpeaker",e[e.ResetVoiceProfile=16]="ResetVoiceProfile",e[e.DeletedVoiceProfile=17]="DeletedVoiceProfile",e[e.VoicesListRetrieved=18]="VoicesListRetrieved",e[e.TranslatingParticipantSpeech=19]="TranslatingParticipantSpeech",e[e.TranslatedParticipantSpeech=20]="TranslatedParticipantSpeech",e[e.TranslatedInstantMessage=21]="TranslatedInstantMessage",e[e.TranslatedParticipantInstantMessage=22]="TranslatedParticipantInstantMessage"}(t.ResultReason||(t.ResultReason={}))})(PC);var Ar={},rf;function y1(){if(rf)return Ar;rf=1,Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.SpeechConfigImpl=Ar.SpeechConfig=void 0;const t=k(),e=N,r=I();let n=class{constructor(){}static fromSubscription(a,o){e.Contracts.throwIfNullOrWhitespace(a,"subscriptionKey"),e.Contracts.throwIfNullOrWhitespace(o,"region");const c=new i;return c.setProperty(r.PropertyId.SpeechServiceConnection_Region,o),c.setProperty(r.PropertyId.SpeechServiceConnection_IntentRegion,o),c.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),c}static fromEndpoint(a,o){e.Contracts.throwIfNull(a,"endpoint");const c=new i;return c.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,a.href),o!==void 0&&c.setProperty(r.PropertyId.SpeechServiceConnection_Key,o),c}static fromHost(a,o){e.Contracts.throwIfNull(a,"hostName");const c=new i;return c.setProperty(r.PropertyId.SpeechServiceConnection_Host,a.protocol+"//"+a.hostname+(a.port===""?"":":"+a.port)),o!==void 0&&c.setProperty(r.PropertyId.SpeechServiceConnection_Key,o),c}static fromAuthorizationToken(a,o){e.Contracts.throwIfNull(a,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(o,"region");const c=new i;return c.setProperty(r.PropertyId.SpeechServiceConnection_Region,o),c.setProperty(r.PropertyId.SpeechServiceConnection_IntentRegion,o),c.authorizationToken=a,c}close(){}};Ar.SpeechConfig=n;class i extends n{constructor(){super(),this.privProperties=new r.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=r.OutputFormat.Simple}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,a)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,a)}get outputFormat(){return r.OutputFormat[this.privProperties.getProperty(t.OutputFormatPropertyName,void 0)]}set outputFormat(a){this.privProperties.setProperty(t.OutputFormatPropertyName,r.OutputFormat[a])}get endpointId(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_EndpointId,a)}setProperty(a,o){e.Contracts.throwIfNull(o,"value"),this.privProperties.setProperty(a,o)}getProperty(a,o){return this.privProperties.getProperty(a,o)}setProxy(a,o,c,u){this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyHostName],a),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPort],o),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyUserName],c),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPassword],u)}setServiceProperty(a,o){const c=JSON.parse(this.privProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));c[a]=o,this.privProperties.setProperty(t.ServicePropertiesPropertyName,JSON.stringify(c))}setProfanity(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_ProfanityOption,r.ProfanityOption[a])}enableAudioLogging(){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privProperties.setProperty(t.ForceDictationPropertyName,"true")}clone(){const a=new i;return a.privProperties=this.privProperties.clone(),a}get speechSynthesisLanguage(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage,a)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthVoice,a)}get speechSynthesisOutputFormat(){return r.SpeechSynthesisOutputFormat[this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,r.SpeechSynthesisOutputFormat[a])}}return Ar.SpeechConfigImpl=i,Ar}var Ir={},nf;function S1(){if(nf)return Ir;nf=1,Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.SpeechTranslationConfigImpl=Ir.SpeechTranslationConfig=void 0;const t=k(),e=N,r=I();let n=class extends r.SpeechConfig{constructor(){super()}static fromSubscription(a,o){e.Contracts.throwIfNullOrWhitespace(a,"subscriptionKey"),e.Contracts.throwIfNullOrWhitespace(o,"region");const c=new i;return c.properties.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),c.properties.setProperty(r.PropertyId.SpeechServiceConnection_Region,o),c}static fromAuthorizationToken(a,o){e.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(o,"region");const c=new i;return c.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a),c.properties.setProperty(r.PropertyId.SpeechServiceConnection_Region,o),c}static fromHost(a,o){e.Contracts.throwIfNull(a,"hostName");const c=new i;return c.setProperty(r.PropertyId.SpeechServiceConnection_Host,a.protocol+"//"+a.hostname+(a.port===""?"":":"+a.port)),o!==void 0&&c.setProperty(r.PropertyId.SpeechServiceConnection_Key,o),c}static fromEndpoint(a,o){e.Contracts.throwIfNull(a,"endpoint"),e.Contracts.throwIfNull(o,"subscriptionKey");const c=new i;return c.properties.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,a.href),c.properties.setProperty(r.PropertyId.SpeechServiceConnection_Key,o),c}};Ir.SpeechTranslationConfig=n;class i extends n{constructor(){super(),this.privSpeechProperties=new r.PropertyCollection,this.outputFormat=r.OutputFormat.Simple}set authorizationToken(a){e.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}set speechRecognitionLanguage(a){e.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,a)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return r.OutputFormat[this.privSpeechProperties.getProperty(t.OutputFormatPropertyName,void 0)]}set outputFormat(a){this.privSpeechProperties.setProperty(t.OutputFormatPropertyName,r.OutputFormat[a])}get endpointId(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_EndpointId,a)}addTargetLanguage(a){e.Contracts.throwIfNullOrWhitespace(a,"value");const o=this.targetLanguages;o.includes(a)||(o.push(a),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,o.join(",")))}get targetLanguages(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(a){e.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,a)}get region(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_Region)}setProxy(a,o,c,u){this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyHostName],a),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPort],o),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyUserName],c),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPassword],u)}getProperty(a,o){return this.privSpeechProperties.getProperty(a,o)}setProperty(a,o){this.privSpeechProperties.setProperty(a,o)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(a,o){const c=JSON.parse(this.privSpeechProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));c[a]=o,this.privSpeechProperties.setProperty(t.ServicePropertiesPropertyName,JSON.stringify(c))}setProfanity(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceResponse_ProfanityOption,r.ProfanityOption[a])}enableAudioLogging(){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(t.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage,a)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthVoice,a)}get speechSynthesisOutputFormat(){return r.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,r.SpeechSynthesisOutputFormat[a])}}return Ir.SpeechTranslationConfigImpl=i,Ir}var Ei={},of;function EC(){if(of)return Ei;of=1,Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.PropertyCollection=void 0;const t=I();let e=class RC{constructor(){this.privKeys=[],this.privValues=[]}getProperty(n,i){let s;typeof n=="string"?s=n:s=t.PropertyId[n];for(let a=0;a<this.privKeys.length;a++)if(this.privKeys[a]===s)return this.privValues[a];if(i!==void 0)return String(i)}setProperty(n,i){let s;typeof n=="string"?s=n:s=t.PropertyId[n];for(let a=0;a<this.privKeys.length;a++)if(this.privKeys[a]===s){this.privValues[a]=i;return}this.privKeys.push(s),this.privValues.push(i)}clone(){const n=new RC;for(let i=0;i<this.privKeys.length;i++)n.privKeys.push(this.privKeys[i]),n.privValues.push(this.privValues[i]);return n}mergeTo(n){this.privKeys.forEach(i=>{if(n.getProperty(i,void 0)===void 0){const s=this.getProperty(i);n.setProperty(i,s)}})}get keys(){return this.privKeys}};return Ei.PropertyCollection=e,Ei}var Kc={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyId=void 0,function(e){e[e.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",e[e.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",e[e.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",e[e.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",e[e.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",e[e.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",e[e.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",e[e.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",e[e.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",e[e.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion",e[e.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",e[e.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",e[e.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",e[e.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",e[e.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",e[e.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",e[e.Speech_SessionId=16]="Speech_SessionId",e[e.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",e[e.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",e[e.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",e[e.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",e[e.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",e[e.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",e[e.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",e[e.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",e[e.CancellationDetails_Reason=25]="CancellationDetails_Reason",e[e.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",e[e.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",e[e.LanguageUnderstandingServiceResponse_JsonResult=28]="LanguageUnderstandingServiceResponse_JsonResult",e[e.SpeechServiceConnection_Url=29]="SpeechServiceConnection_Url",e[e.SpeechServiceConnection_InitialSilenceTimeoutMs=30]="SpeechServiceConnection_InitialSilenceTimeoutMs",e[e.SpeechServiceConnection_EndSilenceTimeoutMs=31]="SpeechServiceConnection_EndSilenceTimeoutMs",e[e.Speech_SegmentationSilenceTimeoutMs=32]="Speech_SegmentationSilenceTimeoutMs",e[e.SpeechServiceConnection_EnableAudioLogging=33]="SpeechServiceConnection_EnableAudioLogging",e[e.SpeechServiceConnection_LanguageIdMode=34]="SpeechServiceConnection_LanguageIdMode",e[e.SpeechServiceConnection_RecognitionEndpointVersion=35]="SpeechServiceConnection_RecognitionEndpointVersion",e[e.SpeechServiceConnection_SpeakerIdMode=36]="SpeechServiceConnection_SpeakerIdMode",e[e.SpeechServiceResponse_ProfanityOption=37]="SpeechServiceResponse_ProfanityOption",e[e.SpeechServiceResponse_PostProcessingOption=38]="SpeechServiceResponse_PostProcessingOption",e[e.SpeechServiceResponse_RequestWordLevelTimestamps=39]="SpeechServiceResponse_RequestWordLevelTimestamps",e[e.SpeechServiceResponse_StablePartialResultThreshold=40]="SpeechServiceResponse_StablePartialResultThreshold",e[e.SpeechServiceResponse_OutputFormatOption=41]="SpeechServiceResponse_OutputFormatOption",e[e.SpeechServiceResponse_TranslationRequestStablePartialResult=42]="SpeechServiceResponse_TranslationRequestStablePartialResult",e[e.SpeechServiceResponse_RequestWordBoundary=43]="SpeechServiceResponse_RequestWordBoundary",e[e.SpeechServiceResponse_RequestPunctuationBoundary=44]="SpeechServiceResponse_RequestPunctuationBoundary",e[e.SpeechServiceResponse_RequestSentenceBoundary=45]="SpeechServiceResponse_RequestSentenceBoundary",e[e.Conversation_ApplicationId=46]="Conversation_ApplicationId",e[e.Conversation_DialogType=47]="Conversation_DialogType",e[e.Conversation_Initial_Silence_Timeout=48]="Conversation_Initial_Silence_Timeout",e[e.Conversation_From_Id=49]="Conversation_From_Id",e[e.Conversation_Conversation_Id=50]="Conversation_Conversation_Id",e[e.Conversation_Custom_Voice_Deployment_Ids=51]="Conversation_Custom_Voice_Deployment_Ids",e[e.Conversation_Speech_Activity_Template=52]="Conversation_Speech_Activity_Template",e[e.Conversation_Request_Bot_Status_Messages=53]="Conversation_Request_Bot_Status_Messages",e[e.Conversation_Agent_Connection_Id=54]="Conversation_Agent_Connection_Id",e[e.SpeechServiceConnection_Host=55]="SpeechServiceConnection_Host",e[e.ConversationTranslator_Host=56]="ConversationTranslator_Host",e[e.ConversationTranslator_Name=57]="ConversationTranslator_Name",e[e.ConversationTranslator_CorrelationId=58]="ConversationTranslator_CorrelationId",e[e.ConversationTranslator_Token=59]="ConversationTranslator_Token",e[e.PronunciationAssessment_ReferenceText=60]="PronunciationAssessment_ReferenceText",e[e.PronunciationAssessment_GradingSystem=61]="PronunciationAssessment_GradingSystem",e[e.PronunciationAssessment_Granularity=62]="PronunciationAssessment_Granularity",e[e.PronunciationAssessment_EnableMiscue=63]="PronunciationAssessment_EnableMiscue",e[e.PronunciationAssessment_Json=64]="PronunciationAssessment_Json",e[e.PronunciationAssessment_Params=65]="PronunciationAssessment_Params",e[e.SpeakerRecognition_Api_Version=66]="SpeakerRecognition_Api_Version",e[e.WebWorkerLoadType=67]="WebWorkerLoadType",e[e.TalkingAvatarService_WebRTC_SDP=68]="TalkingAvatarService_WebRTC_SDP"}(t.PropertyId||(t.PropertyId={}))})(Kc);var wi={},sf;function C1(){if(sf)return wi;sf=1,Object.defineProperty(wi,"__esModule",{value:!0}),wi.Recognizer=void 0;const t=k(),e=D(),r=N,n=I();let i=class wC{constructor(a,o,c){this.audioConfig=a!==void 0?a:n.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=o.clone(),this.privConnectionFactory=c,this.implCommonRecognizerSetup()}close(a,o){r.Contracts.throwIfDisposed(this.privDisposed),e.marshalPromiseToCallbacks(this.dispose(!0),a,o)}get internalData(){return this.privReco}async dispose(a){this.privDisposed||(this.privDisposed=!0,a&&this.privReco&&(await this.privReco.audioSource.turnOff(),await this.privReco.dispose()))}static get telemetryEnabled(){return t.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(a){t.ServiceRecognizerBase.telemetryDataEnabled=a}implCommonRecognizerSetup(){let a=typeof window<"u"?"Browser":"Node",o="unknown",c="unknown";typeof navigator<"u"&&(a=a+"/"+navigator.platform,o=navigator.userAgent,c=navigator.appVersion);const u=this.createRecognizerConfig(new t.SpeechServiceConfig(new t.Context(new t.OS(a,o,c))));this.privReco=this.createServiceRecognizer(wC.getAuthFromProperties(this.privProperties),this.privConnectionFactory,this.audioConfig,u)}async recognizeOnceAsyncImpl(a){r.Contracts.throwIfDisposed(this.privDisposed);const o=new e.Deferred;await this.implRecognizerStop(),await this.privReco.recognize(a,o.resolve,o.reject);const c=await o.promise;return await this.implRecognizerStop(),c}async startContinuousRecognitionAsyncImpl(a){r.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop(),await this.privReco.recognize(a,void 0,void 0)}async stopContinuousRecognitionAsyncImpl(){r.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop()}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}static getAuthFromProperties(a){const o=a.getProperty(n.PropertyId.SpeechServiceConnection_Key,void 0);return o&&o!==""?new t.CognitiveSubscriptionKeyAuthentication(o):new t.CognitiveTokenAuthentication(()=>{const u=a.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(u)},()=>{const u=a.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(u)})}};return wi.Recognizer=i,wi}var Ai={},af;function P1(){if(af)return Ai;af=1,Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.SpeechRecognizer=void 0;const t=k(),e=D(),r=N,n=I();let i=class AC extends n.Recognizer{constructor(a,o){const c=a;r.Contracts.throwIfNull(c,"speechConfig"),r.Contracts.throwIfNullOrWhitespace(c.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage),n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),super(o,c.properties,new t.SpeechConnectionFactory),this.privDisposedRecognizer=!1}static FromConfig(a,o,c){const u=a;return o.properties.mergeTo(u.properties),new AC(a,c)}get endpointId(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){r.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(t.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Simple])===n.OutputFormat[n.OutputFormat.Simple]?n.OutputFormat.Simple:n.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(a,o){e.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),a,o)}startContinuousRecognitionAsync(a,o){e.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),a,o)}stopContinuousRecognitionAsync(a,o){e.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,o)}startKeywordRecognitionAsync(a,o,c){r.Contracts.throwIfNull(a,"model"),c&&c("Not yet implemented.")}stopKeywordRecognitionAsync(a){a&&a()}close(a,o){r.Contracts.throwIfDisposed(this.privDisposedRecognizer),e.marshalPromiseToCallbacks(this.dispose(!0),a,o)}async dispose(a){this.privDisposedRecognizer||(a&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(a))}createRecognizerConfig(a){return new t.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,o,c,u){const l=c;return new t.SpeechServiceRecognizer(a,o,l,u,this)}};return Ai.SpeechRecognizer=i,Ai}var Ii={},cf;function R1(){if(cf)return Ii;cf=1,Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.IntentRecognizer=void 0;const t=k(),e=D(),r=N,n=I();let i=class extends n.Recognizer{constructor(a,o){r.Contracts.throwIfNullOrUndefined(a,"speechConfig");const c=a;r.Contracts.throwIfNullOrUndefined(c,"speechConfig"),super(o,c.properties,new t.IntentConnectionFactory),this.privAddedIntents=[],this.privAddedLmIntents={},this.privDisposedIntentRecognizer=!1,this.privProperties=c.properties,r.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage),n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}get properties(){return this.privProperties}recognizeOnceAsync(a,o){if(r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){const c=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",c.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(c.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}e.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),a,o)}startContinuousRecognitionAsync(a,o){if(Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){const c=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",c.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(c.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}e.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),a,o)}stopContinuousRecognitionAsync(a,o){e.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,o)}startKeywordRecognitionAsync(a,o,c){r.Contracts.throwIfNull(a,"model"),c&&c("Not yet implemented.")}stopKeywordRecognitionAsync(a,o){if(a)try{a()}catch(c){o&&o(c)}}addIntent(a,o){r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),r.Contracts.throwIfNullOrWhitespace(o,"intentId"),r.Contracts.throwIfNullOrWhitespace(a,"simplePhrase"),this.privAddedIntents.push([o,a])}addIntentWithLanguageModel(a,o,c){r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),r.Contracts.throwIfNullOrWhitespace(a,"intentId"),r.Contracts.throwIfNull(o,"model");const u=o;r.Contracts.throwIfNullOrWhitespace(u.appId,"model.appId"),this.privAddedLmIntents[a]=new t.AddedLmIntent(u,c)}addAllIntents(a,o){r.Contracts.throwIfNull(a,"model");const c=a;r.Contracts.throwIfNullOrWhitespace(c.appId,"model.appId"),this.privUmbrellaIntent=new t.AddedLmIntent(c,o)}close(a,o){r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),e.marshalPromiseToCallbacks(this.dispose(!0),a,o)}createRecognizerConfig(a){return new t.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,o,c,u){const l=c;return new t.IntentServiceRecognizer(a,o,l,u,this)}async dispose(a){this.privDisposedIntentRecognizer||a&&(this.privDisposedIntentRecognizer=!0,await super.dispose(a))}buildSpeechContext(){let a,o,c;const u=[];this.privUmbrellaIntent!==void 0&&(a=this.privUmbrellaIntent.modelImpl.appId,o=this.privUmbrellaIntent.modelImpl.region,c=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(const l of Object.keys(this.privAddedLmIntents)){const p=this.privAddedLmIntents[l];if(a===void 0)a=p.modelImpl.appId;else if(a!==p.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(o===void 0)o=p.modelImpl.region;else if(o!==p.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(c===void 0)c=p.modelImpl.subscriptionKey;else if(c!==p.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");const d="luis/"+a+"-PRODUCTION#"+l;u.push(d)}return{Intent:{id:a,key:c===void 0?this.privProperties.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_Key]):c,provider:"LUIS"},ReferenceGrammars:this.privUmbrellaIntent===void 0?u:["luis/"+a+"-PRODUCTION"]}}};return Ii.IntentRecognizer=i,Ii}var IC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileType=void 0,function(e){e[e.TextIndependentIdentification=0]="TextIndependentIdentification",e[e.TextDependentVerification=1]="TextDependentVerification",e[e.TextIndependentVerification=2]="TextIndependentVerification"}(t.VoiceProfileType||(t.VoiceProfileType={}))})(IC);var Ti={},_i={},Tr={},uf;function TC(){if(uf)return Tr;uf=1,Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.ConnectionMessageImpl=Tr.ConnectionMessage=void 0;const t=me,e=D(),r=EC(),n=Kc;let i=class{};Tr.ConnectionMessage=i;class s{constructor(o){this.privConnectionMessage=o,this.privProperties=new r.PropertyCollection,this.privConnectionMessage.headers[t.HeaderNames.ConnectionId]&&this.privProperties.setProperty(n.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[t.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(c=>{this.privProperties.setProperty(c,this.privConnectionMessage.headers[c])})}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(o=>o.toLowerCase()==="path".toLowerCase())]}get isTextMessage(){return this.privConnectionMessage.messageType===e.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===e.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}}return Tr.ConnectionMessageImpl=s,Tr}var lf;function _C(){if(lf)return _i;lf=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.Connection=void 0;const t=k(),e=D(),r=TC(),n=N,i=I();let s=class _p{static fromRecognizer(o){const c=o.internalData,u=new _p;return u.privInternalData=c,u.setupEvents(),u}static fromSynthesizer(o){const c=o.internalData,u=new _p;return u.privInternalData=c,u.setupEvents(),u}openConnection(o,c){e.marshalPromiseToCallbacks(this.privInternalData.connect(),o,c)}closeConnection(o,c){if(this.privInternalData instanceof t.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");e.marshalPromiseToCallbacks(this.privInternalData.disconnect(),o,c)}setMessageProperty(o,c,u){if(n.Contracts.throwIfNullOrWhitespace(c,"propertyName"),this.privInternalData instanceof t.ServiceRecognizerBase){if(o.toLowerCase()!=="speech.context")throw new Error("Only speech.context message property sets are currently supported for recognizer");this.privInternalData.speechContext.setSection(c,u)}else if(this.privInternalData instanceof t.SynthesisAdapterBase){if(o.toLowerCase()!=="synthesis.context")throw new Error("Only synthesis.context message property sets are currently supported for synthesizer");this.privInternalData.synthesisContext.setSection(c,u)}}sendMessageAsync(o,c,u,l){e.marshalPromiseToCallbacks(this.privInternalData.sendNetworkMessage(o,c),u,l)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach(o=>{o.name==="ConnectionEstablishedEvent"?this.connected&&this.connected(new i.ConnectionEventArgs(o.connectionId)):o.name==="ConnectionClosedEvent"?this.disconnected&&this.disconnected(new i.ConnectionEventArgs(o.connectionId)):o.name==="ConnectionMessageSentEvent"?this.messageSent&&this.messageSent(new i.ConnectionMessageEventArgs(new r.ConnectionMessageImpl(o.message))):o.name==="ConnectionMessageReceivedEvent"&&this.messageReceived&&this.messageReceived(new i.ConnectionMessageEventArgs(new r.ConnectionMessageImpl(o.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(o=>{this.receivedServiceMessage&&this.receivedServiceMessage(new i.ServiceEventArgs(o.jsonString,o.name))})}};return _i.Connection=s,_i}var pf;function E1(){if(pf)return Ti;pf=1,Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.TranslationRecognizer=void 0;const t=k(),e=D(),r=_C(),n=N,i=I();let s=class OC extends i.Recognizer{constructor(o,c,u){const l=o;n.Contracts.throwIfNull(l,"speechConfig"),super(c,l.properties,u||new t.TranslationConnectionFactory),this.privDisposedTranslationRecognizer=!1,this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&n.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationVoice),i.PropertyId[i.PropertyId.SpeechServiceConnection_TranslationVoice]),n.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages),i.PropertyId[i.PropertyId.SpeechServiceConnection_TranslationToLanguages]),n.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage),i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage])}static FromConfig(o,c,u){const l=o;return c.properties.mergeTo(l.properties),new OC(o,u)}get speechRecognitionLanguage(){return n.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return n.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return n.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,o)}recognizeOnceAsync(o,c){n.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),e.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),o,c)}startContinuousRecognitionAsync(o,c){e.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),o,c)}stopContinuousRecognitionAsync(o,c){e.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),o,c)}removeTargetLanguage(o){if(n.Contracts.throwIfNullOrUndefined(o,"language to be removed"),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0){const c=this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),u=c.indexOf(o);u>-1&&(c.splice(u,1),this.properties.setProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,c.join(",")),this.updateLanguages(c))}}addTargetLanguage(o){n.Contracts.throwIfNullOrUndefined(o,"language to be added");let c=[];this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?(c=this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),c.includes(o)||(c.push(o),this.properties.setProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,c.join(",")))):(this.properties.setProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,o),c=[o]),this.updateLanguages(c)}close(o,c){n.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),e.marshalPromiseToCallbacks(this.dispose(!0),o,c)}onConnection(){}async dispose(o){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,o&&(await this.implRecognizerStop(),await super.dispose(o)))}createRecognizerConfig(o){return new t.RecognizerConfig(o,this.privProperties)}createServiceRecognizer(o,c,u,l){const p=u;return new t.TranslationServiceRecognizer(o,c,p,l,this)}updateLanguages(o){const c=r.Connection.fromRecognizer(this);c&&(c.setMessageProperty("speech.context","translationcontext",{to:o}),c.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:o})))}};return Ti.TranslationRecognizer=s,Ti}var Oi={},df;function w1(){if(df)return Oi;df=1,Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.Translations=void 0;const t=I();let e=class{constructor(){this.privMap=new t.PropertyCollection}get languages(){return this.privMap.keys}get(n,i){return this.privMap.getProperty(n,i)}set(n,i){this.privMap.setProperty(n,i)}};return Oi.Translations=e,Oi}var kC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.NoMatchReason=void 0,function(e){e[e.NotRecognized=0]="NotRecognized",e[e.InitialSilenceTimeout=1]="InitialSilenceTimeout",e[e.InitialBabbleTimeout=2]="InitialBabbleTimeout"}(t.NoMatchReason||(t.NoMatchReason={}))})(kC);var ki={},hf;function A1(){if(hf)return ki;hf=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.NoMatchDetails=void 0;const t=k(),e=I();let r=class MC{constructor(i){this.privReason=i}static fromResult(i){const s=t.SimpleSpeechPhrase.fromJSON(i.json);let a=e.NoMatchReason.NotRecognized;switch(s.RecognitionStatus){case t.RecognitionStatus.BabbleTimeout:a=e.NoMatchReason.InitialBabbleTimeout;break;case t.RecognitionStatus.InitialSilenceTimeout:a=e.NoMatchReason.InitialSilenceTimeout;break;default:a=e.NoMatchReason.NotRecognized;break}return new MC(a)}get reason(){return this.privReason}};return ki.NoMatchDetails=r,ki}var $c={};Object.defineProperty($c,"__esModule",{value:!0});$c.TranslationRecognitionCanceledEventArgs=void 0;class I1{constructor(e,r,n,i,s){this.privCancelReason=r,this.privErrorDetails=n,this.privResult=s,this.privSessionId=e,this.privErrorCode=i}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}$c.TranslationRecognitionCanceledEventArgs=I1;var Mi={},vf;function T1(){if(vf)return Mi;vf=1,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.IntentRecognitionCanceledEventArgs=void 0;const t=I();let e=class extends t.IntentRecognitionEventArgs{constructor(n,i,s,a,o,c){super(a,o,c),this.privReason=n,this.privErrorDetails=i,this.privErrorCode=s}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return Mi.IntentRecognitionCanceledEventArgs=e,Mi}var Us={};Object.defineProperty(Us,"__esModule",{value:!0});Us.CancellationDetailsBase=void 0;class _1{constructor(e,r,n){this.privReason=e,this.privErrorDetails=r,this.privErrorCode=n}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}}Us.CancellationDetailsBase=_1;var bi={},ff;function O1(){if(ff)return bi;ff=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.CancellationDetails=void 0;const t=k(),e=Us,r=I();let n=class bC extends e.CancellationDetailsBase{constructor(s,a,o){super(s,a,o)}static fromResult(s){let a=r.CancellationReason.Error,o=r.CancellationErrorCode.NoError;if(s instanceof r.RecognitionResult&&s.json){const c=t.SimpleSpeechPhrase.fromJSON(s.json);a=t.EnumTranslation.implTranslateCancelResult(c.RecognitionStatus)}return s.properties&&(o=r.CancellationErrorCode[s.properties.getProperty(t.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new bC(a,s.errorDetails||t.EnumTranslation.implTranslateErrorDetails(o),o)}};return bi.CancellationDetails=n,bi}var DC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationErrorCode=void 0,function(e){e[e.NoError=0]="NoError",e[e.AuthenticationFailure=1]="AuthenticationFailure",e[e.BadRequestParameters=2]="BadRequestParameters",e[e.TooManyRequests=3]="TooManyRequests",e[e.ConnectionFailure=4]="ConnectionFailure",e[e.ServiceTimeout=5]="ServiceTimeout",e[e.ServiceError=6]="ServiceError",e[e.RuntimeError=7]="RuntimeError",e[e.Forbidden=8]="Forbidden"}(t.CancellationErrorCode||(t.CancellationErrorCode={}))})(DC);var Di={},gf;function k1(){if(gf)return Di;gf=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.ConnectionEventArgs=void 0;const t=I();let e=class extends t.SessionEventArgs{};return Di.ConnectionEventArgs=e,Di}var Ni={},mf;function M1(){if(mf)return Ni;mf=1,Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.ServiceEventArgs=void 0;const t=I();let e=class extends t.SessionEventArgs{constructor(n,i,s){super(s),this.privJsonResult=n,this.privEventName=i}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}};return Ni.ServiceEventArgs=e,Ni}var Jc={};Object.defineProperty(Jc,"__esModule",{value:!0});Jc.PhraseListGrammar=void 0;class Bd{constructor(e){this.privGrammerBuilder=e.dynamicGrammar}static fromRecognizer(e){const r=e.internalData;return new Bd(r)}addPhrase(e){this.privGrammerBuilder.addPhrase(e)}addPhrases(e){this.privGrammerBuilder.addPhrase(e)}clear(){this.privGrammerBuilder.clearPhrases()}}Jc.PhraseListGrammar=Bd;var _r={},yf;function Fd(){if(yf)return _r;yf=1,Object.defineProperty(_r,"__esModule",{value:!0}),_r.DialogServiceConfigImpl=_r.DialogServiceConfig=void 0;const t=N,e=I();let r=class{constructor(){}set applicationId(s){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}};_r.DialogServiceConfig=r;class n extends r{constructor(){super(),this.privSpeechConfig=new e.SpeechConfigImpl}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(s){t.Contracts.throwIfNullOrWhitespace(s,"value"),this.privSpeechConfig.speechRecognitionLanguage=s}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(s){this.privSpeechConfig.outputFormat=s}setProperty(s,a){this.privSpeechConfig.setProperty(s,a)}getProperty(s,a){return this.privSpeechConfig.getProperty(s)}setProxy(s,a,o,c){this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyHostName,s),this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyPort,`${a}`),o&&this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyUserName,o),c&&this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyPassword,c)}setServiceProperty(s,a,o){this.privSpeechConfig.setServiceProperty(s,a)}close(){}}return _r.DialogServiceConfigImpl=n,_r}var zi={},Sf;function b1(){if(Sf)return zi;Sf=1,Object.defineProperty(zi,"__esModule",{value:!0}),zi.BotFrameworkConfig=void 0;const t=N,e=Fd(),r=I();let n=class extends e.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(s,a,o){t.Contracts.throwIfNullOrWhitespace(s,"subscription"),t.Contracts.throwIfNullOrWhitespace(a,"region");const c=new e.DialogServiceConfigImpl;return c.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),c.setProperty(r.PropertyId.SpeechServiceConnection_Key,s),c.setProperty(r.PropertyId.SpeechServiceConnection_Region,a),o&&c.setProperty(r.PropertyId.Conversation_ApplicationId,o),c}static fromAuthorizationToken(s,a,o){t.Contracts.throwIfNullOrWhitespace(s,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(a,"region");const c=new e.DialogServiceConfigImpl;return c.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),c.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,s),c.setProperty(r.PropertyId.SpeechServiceConnection_Region,a),o&&c.setProperty(r.PropertyId.Conversation_ApplicationId,o),c}static fromHost(s,a,o){t.Contracts.throwIfNullOrUndefined(s,"host");const c=s instanceof URL?s:new URL(`wss://${s}.convai.speech.azure.us`);t.Contracts.throwIfNullOrUndefined(c,"resolvedHost");const u=new e.DialogServiceConfigImpl;return u.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),u.setProperty(r.PropertyId.SpeechServiceConnection_Host,c.toString()),a!==void 0&&u.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),u}static fromEndpoint(s,a){t.Contracts.throwIfNull(s,"endpoint");const o=new e.DialogServiceConfigImpl;return o.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),o.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,s.toString()),a!==void 0&&o.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),o}};return zi.BotFrameworkConfig=n,zi}var ji={},Cf;function D1(){if(Cf)return ji;Cf=1,Object.defineProperty(ji,"__esModule",{value:!0}),ji.CustomCommandsConfig=void 0;const t=N,e=Fd(),r=I();let n=class extends e.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(s,a,o){t.Contracts.throwIfNullOrWhitespace(s,"applicationId"),t.Contracts.throwIfNullOrWhitespace(a,"subscription"),t.Contracts.throwIfNullOrWhitespace(o,"region");const c=new e.DialogServiceConfigImpl;return c.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.CustomCommands),c.setProperty(r.PropertyId.Conversation_ApplicationId,s),c.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),c.setProperty(r.PropertyId.SpeechServiceConnection_Region,o),c}static fromAuthorizationToken(s,a,o){t.Contracts.throwIfNullOrWhitespace(s,"applicationId"),t.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(o,"region");const c=new e.DialogServiceConfigImpl;return c.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.CustomCommands),c.setProperty(r.PropertyId.Conversation_ApplicationId,s),c.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a),c.setProperty(r.PropertyId.SpeechServiceConnection_Region,o),c}set applicationId(s){t.Contracts.throwIfNullOrWhitespace(s,"value"),this.setProperty(r.PropertyId.Conversation_ApplicationId,s)}get applicationId(){return this.getProperty(r.PropertyId.Conversation_ApplicationId)}};return ji.CustomCommandsConfig=n,ji}var Li={},xi={},Bi={},Ct={};Object.defineProperty(Ct,"__esModule",{value:!0});Ct.QueryParameterNames=void 0;class oe{}Ct.QueryParameterNames=oe;oe.BotId="botid";oe.CustomSpeechDeploymentId="cid";oe.CustomVoiceDeploymentId="deploymentId";oe.EnableAudioLogging="storeAudio";oe.EnableLanguageId="lidEnabled";oe.EnableWordLevelTimestamps="wordLevelTimestamps";oe.EndSilenceTimeoutMs="endSilenceTimeoutMs";oe.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs";oe.Format="format";oe.InitialSilenceTimeoutMs="initialSilenceTimeoutMs";oe.Language="language";oe.Profanity="profanity";oe.RequestBotStatusMessages="enableBotMessageStatus";oe.StableIntermediateThreshold="stableIntermediateThreshold";oe.StableTranslation="stableTranslation";oe.TestHooks="testhooks";oe.Postprocessing="postprocessing";oe.CtsMeetingId="meetingId";oe.CtsDeviceId="deviceId";oe.CtsIsParticipant="isParticipant";oe.EnableAvatar="enableTalkingAvatar";var Pf;function Pt(){if(Pf)return Bi;Pf=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.ConnectionFactoryBase=void 0;const t=k(),e=I(),r=Ct;let n=class{static getHostSuffix(s){if(s){if(s.toLowerCase().startsWith("china"))return".azure.cn";if(s.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(s,a,o){new Map([[e.PropertyId.Speech_SegmentationSilenceTimeoutMs,r.QueryParameterNames.SegmentationSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_EnableAudioLogging,r.QueryParameterNames.EnableAudioLogging],[e.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,r.QueryParameterNames.EndSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,r.QueryParameterNames.InitialSilenceTimeoutMs],[e.PropertyId.SpeechServiceResponse_PostProcessingOption,r.QueryParameterNames.Postprocessing],[e.PropertyId.SpeechServiceResponse_ProfanityOption,r.QueryParameterNames.Profanity],[e.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,r.QueryParameterNames.EnableWordLevelTimestamps],[e.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,r.QueryParameterNames.StableIntermediateThreshold]]).forEach((l,p)=>{this.setUrlParameter(p,l,s,a,o)});const u=JSON.parse(s.parameters.getProperty(t.ServicePropertiesPropertyName,"{}"));Object.keys(u).forEach(l=>{a[l]=u[l]})}setUrlParameter(s,a,o,c,u){const l=o.parameters.getProperty(s,void 0);l&&(!u||u.search(a)===-1)&&(c[a]=l.toLocaleLowerCase())}};return Bi.ConnectionFactoryBase=n,Bi}var Rf;function N1(){if(Rf)return xi;Rf=1,Object.defineProperty(xi,"__esModule",{value:!0}),xi.DialogConnectionFactory=void 0;const t=ye(),e=k(),r=I(),n=Pt(),i=k(),s=me,a=Ct;class o extends n.ConnectionFactoryBase{create(u,l,p){const d=u.parameters.getProperty(r.PropertyId.Conversation_ApplicationId,""),h=u.parameters.getProperty(r.PropertyId.Conversation_DialogType),v=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region),g=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),y=u.parameters.getProperty(r.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),f={};f[s.HeaderNames.ConnectionId]=p,f[a.QueryParameterNames.Format]=u.parameters.getProperty(e.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase(),f[a.QueryParameterNames.Language]=g,f[a.QueryParameterNames.RequestBotStatusMessages]=y,d&&(f[a.QueryParameterNames.BotId]=d,h===r.DialogServiceConfig.DialogTypes.CustomCommands&&(f[s.HeaderNames.CustomCommandsAppId]=d));const m=h===r.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",S=h===r.DialogServiceConfig.DialogTypes.CustomCommands?"v1":h===r.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",C={};l.token!=null&&l.token!==""&&(C[l.headerName]=l.token);let P=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,"");if(!P){const A=n.ConnectionFactoryBase.getHostSuffix(v),w=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,`wss://${v}.${o.BaseUrl}${A}`);P=`${w.endsWith("/")?w:w+"/"}${m}${o.ApiKey}/${S}`}this.setCommonUrlParams(u,f,P);const R=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(P,f,C,new i.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(u),R,p)}}return xi.DialogConnectionFactory=o,o.ApiKey="api",o.BaseUrl="convai.speech",xi}var Ef;function z1(){if(Ef)return Li;Ef=1,Object.defineProperty(Li,"__esModule",{value:!0}),Li.DialogServiceConnector=void 0;const t=N1(),e=k(),r=D(),n=N,i=I(),s=Kc;let a=class extends i.Recognizer{constructor(c,u){const l=c;n.Contracts.throwIfNull(c,"dialogConfig"),super(u,l.properties,new t.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=l.properties.clone();const p=this.buildAgentConfig();this.privReco.agentConfig.set(p)}connect(c,u){r.marshalPromiseToCallbacks(this.privReco.connect(),c,u)}disconnect(c,u){r.marshalPromiseToCallbacks(this.privReco.disconnect(),c,u)}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(c){n.Contracts.throwIfNullOrWhitespace(c,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,c)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(s.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(c){this.properties.setProperty(s.PropertyId.Conversation_Speech_Activity_Template,c)}listenOnceAsync(c,u){if(this.isTurnComplete){n.Contracts.throwIfDisposed(this.privIsDisposed);const p=(async()=>{await this.privReco.connect(),await this.implRecognizerStop(),this.isTurnComplete=!1;const d=new r.Deferred;await this.privReco.recognize(e.RecognitionMode.Conversation,d.resolve,d.reject);const h=await d.promise;return await this.implRecognizerStop(),h})();p.catch(()=>{this.dispose(!0).catch(()=>{})}),r.marshalPromiseToCallbacks(p.finally(()=>{this.isTurnComplete=!0}),c,u)}}sendActivityAsync(c,u,l){r.marshalPromiseToCallbacks(this.privReco.sendMessage(c),u,l)}close(c,u){n.Contracts.throwIfDisposed(this.privIsDisposed),r.marshalPromiseToCallbacks(this.dispose(!0),c,u)}async dispose(c){this.privIsDisposed||c&&(this.privIsDisposed=!0,await this.implRecognizerStop(),await super.dispose(c))}createRecognizerConfig(c){return new e.RecognizerConfig(c,this.privProperties)}createServiceRecognizer(c,u,l,p){const d=l;return new e.DialogServiceAdapter(c,u,d,p,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(s.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(s.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(s.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(s.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}};return Li.DialogServiceConnector=a,Li}var Qc={};Object.defineProperty(Qc,"__esModule",{value:!0});Qc.ActivityReceivedEventArgs=void 0;class j1{constructor(e,r){this.privActivity=e,this.privAudioStream=r}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}}Qc.ActivityReceivedEventArgs=j1;var Gc={},Xc={};Object.defineProperty(Xc,"__esModule",{value:!0});Xc.TurnStatusResponsePayload=void 0;class qd{constructor(e){this.privMessageStatusResponse=JSON.parse(e)}static fromJSON(e){return new qd(e)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}}Xc.TurnStatusResponsePayload=qd;Object.defineProperty(Gc,"__esModule",{value:!0});Gc.TurnStatusReceivedEventArgs=void 0;const L1=Xc;class x1{constructor(e){this.privTurnStatus=L1.TurnStatusResponsePayload.fromJSON(e)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}}Gc.TurnStatusReceivedEventArgs=x1;var NC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ServicePropertyChannel=void 0,function(e){e[e.UriQueryParameter=0]="UriQueryParameter"}(t.ServicePropertyChannel||(t.ServicePropertyChannel={}))})(NC);var zC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ProfanityOption=void 0,function(e){e[e.Masked=0]="Masked",e[e.Removed=1]="Removed",e[e.Raw=2]="Raw"}(t.ProfanityOption||(t.ProfanityOption={}))})(zC);var Fi={},wf;function B1(){if(wf)return Fi;wf=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.BaseAudioPlayer=void 0;const t=Ee,e=I(),r=Er;let n=class{constructor(s){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,s===void 0&&(s=e.AudioStreamFormat.getDefaultInputFormat()),this.init(s)}playAudioSample(s,a,o){try{this.ensureInitializedContext();const c=this.formatAudioData(s),u=new Float32Array(this.samples.length+c.length);u.set(this.samples,0),u.set(c,this.samples.length),this.samples=u,a&&a()}catch(c){o&&o(c)}}stopAudio(s,a){this.audioContext!==null&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then(()=>{s&&s()},o=>{a&&a(o)}),this.audioContext=null)}init(s){this.audioFormat=s,this.samples=new Float32Array}ensureInitializedContext(){if(this.audioContext===null){this.createAudioContext();const s=200;this.autoUpdateBufferTimer=setInterval(()=>{this.updateAudioBuffer()},s)}}createAudioContext(){this.audioContext=r.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(s){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(s),128);case 16:return this.formatArrayBuffer(new Int16Array(s),32768);case 32:return this.formatArrayBuffer(new Int32Array(s),2147483648);default:throw new t.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(s,a){const o=new Float32Array(s.length);for(let c=0;c<s.length;c++)o[c]=s[c]/a;return o}updateAudioBuffer(){if(this.samples.length===0)return;const s=this.audioFormat.channels,a=this.audioContext.createBufferSource(),o=this.samples.length/s,c=this.audioContext.createBuffer(s,o,this.audioFormat.samplesPerSec);for(let u=0;u<s;u++){let l=u;const p=c.getChannelData(u);for(let d=0;d<this.samples.length;d++,l+=s)p[d]=this.samples[l]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),a.buffer=c,a.connect(this.gainNode),a.start(this.startTime),this.startTime+=c.duration,this.samples=new Float32Array}async playAudio(s){this.audioContext===null&&this.createAudioContext();const a=this.audioContext.createBufferSource(),o=this.audioContext.destination;await this.audioContext.decodeAudioData(s,c=>{a.buffer=c,a.connect(o),a.start(0)})}};return Fi.BaseAudioPlayer=n,Fi}var Zc={};Object.defineProperty(Zc,"__esModule",{value:!0});Zc.ConnectionMessageEventArgs=void 0;class F1{constructor(e){this.privConnectionMessage=e}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}}Zc.ConnectionMessageEventArgs=F1;var Yc={};Object.defineProperty(Yc,"__esModule",{value:!0});Yc.VoiceProfile=void 0;class q1{constructor(e,r){this.privId=e,this.privProfileType=r}get profileId(){return this.privId}get profileType(){return this.privProfileType}}Yc.VoiceProfile=q1;var Or={},Af;function U1(){if(Af)return Or;Af=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.VoiceProfileEnrollmentCancellationDetails=Or.VoiceProfileEnrollmentResult=void 0;const t=k(),e=I();let r=class Op{constructor(s,a,o){this.privReason=s,this.privProperties=new e.PropertyCollection,this.privReason!==e.ResultReason.Canceled?a&&(this.privDetails=JSON.parse(a),this.privDetails.enrollmentStatus.toLowerCase()==="enrolling"&&(this.privReason=e.ResultReason.EnrollingVoiceProfile)):(this.privErrorDetails=o,this.privProperties.setProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[e.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get enrollmentsCount(){return this.privDetails.enrollmentsCount}get enrollmentsLength(){return this.privDetails.enrollmentsLength}get properties(){return this.privProperties}get enrollmentResultDetails(){return this.privDetails}get errorDetails(){return this.privErrorDetails}static FromIdentificationProfileList(s){const a=[];for(const o of s.value){const c=o.enrollmentStatus.toLowerCase()==="enrolling"?e.ResultReason.EnrollingVoiceProfile:o.enrollmentStatus.toLowerCase()==="enrolled"?e.ResultReason.EnrolledVoiceProfile:e.ResultReason.Canceled,u=new Op(c,null,null);u.privDetails=this.getIdentificationDetails(o),a.push(u)}return a}static FromVerificationProfileList(s){const a=[];for(const o of s.value){const c=o.enrollmentStatus.toLowerCase()==="enrolling"?e.ResultReason.EnrollingVoiceProfile:o.enrollmentStatus.toLowerCase()==="enrolled"?e.ResultReason.EnrolledVoiceProfile:e.ResultReason.Canceled,u=new Op(c,null,null);u.privDetails=this.getVerificationDetails(o),a.push(u)}return a}static getIdentificationDetails(s){return{audioLength:s.audioLength?parseFloat(s.audioLength):0,audioSpeechLength:s.audioSpeechLength?parseFloat(s.audioSpeechLength):0,enrollmentStatus:s.enrollmentStatus,enrollmentsCount:s.enrollmentsCount||0,enrollmentsLength:s.enrollmentsLength?parseFloat(s.enrollmentsLength):0,enrollmentsSpeechLength:s.enrollmentsSpeechLength?parseFloat(s.enrollmentsSpeechLength):0,profileId:s.profileId||s.identificationProfileId,remainingEnrollmentsSpeechLength:s.remainingEnrollmentsSpeechLength?parseFloat(s.remainingEnrollmentsSpeechLength):0}}static getVerificationDetails(s){return{audioLength:s.audioLength?parseFloat(s.audioLength):0,audioSpeechLength:s.audioSpeechLength?parseFloat(s.audioSpeechLength):0,enrollmentStatus:s.enrollmentStatus,enrollmentsCount:s.enrollmentsCount,enrollmentsLength:s.enrollmentsLength?parseFloat(s.enrollmentsLength):0,enrollmentsSpeechLength:s.enrollmentsSpeechLength?parseFloat(s.enrollmentsSpeechLength):0,profileId:s.profileId||s.verificationProfileId,remainingEnrollmentsCount:s.remainingEnrollments||s.remainingEnrollmentsCount,remainingEnrollmentsSpeechLength:s.remainingEnrollmentsSpeechLength?parseFloat(s.remainingEnrollmentsSpeechLength):0}}};Or.VoiceProfileEnrollmentResult=r;class n extends e.CancellationDetailsBase{constructor(s,a,o){super(s,a,o)}static fromResult(s){const a=e.CancellationReason.Error;let o=e.CancellationErrorCode.NoError;return s.properties&&(o=e.CancellationErrorCode[s.properties.getProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[e.CancellationErrorCode.NoError])]),new n(a,s.errorDetails,o)}}return Or.VoiceProfileEnrollmentCancellationDetails=n,Or}var kr={},If;function W1(){if(If)return kr;If=1,Object.defineProperty(kr,"__esModule",{value:!0}),kr.VoiceProfileCancellationDetails=kr.VoiceProfileResult=void 0;const t=k(),e=N,r=I();let n=class{constructor(a,o){this.privReason=a,this.privProperties=new r.PropertyCollection,a===r.ResultReason.Canceled&&(e.Contracts.throwIfNullOrUndefined(o,"statusText"),this.privErrorDetails=o,this.privProperties.setProperty(t.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get properties(){return this.privProperties}get errorDetails(){return this.privErrorDetails}};kr.VoiceProfileResult=n;class i extends r.CancellationDetailsBase{constructor(a,o,c){super(a,o,c)}static fromResult(a){const o=r.CancellationReason.Error;let c=r.CancellationErrorCode.NoError;return a.properties&&(c=r.CancellationErrorCode[a.properties.getProperty(t.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new i(o,a.errorDetails,c)}}return kr.VoiceProfileCancellationDetails=i,kr}var qi={},Tf;function H1(){if(Tf)return qi;Tf=1,Object.defineProperty(qi,"__esModule",{value:!0}),qi.VoiceProfilePhraseResult=void 0;const t=N,e=I();let r=class extends e.VoiceProfileResult{constructor(i,s,a,o){super(i,s),this.privPhrases=[],t.Contracts.throwIfNullOrUndefined(o,"phrase array"),this.privType=a,o&&o[0]&&(this.privPhrases=o)}get phrases(){return this.privPhrases}get type(){return this.privType}};return qi.VoiceProfilePhraseResult=r,qi}var Ui={},_f;function V1(){if(_f)return Ui;_f=1,Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.VoiceProfileClient=void 0;const t=k(),e=fC(),r=N,n=I();let i=class extends n.Recognizer{constructor(a){r.Contracts.throwIfNullOrUndefined(a,"speechConfig");const o=a;r.Contracts.throwIfNull(o,"speechConfig"),super(e.AudioConfig.fromStreamInput(n.AudioInputStream.createPushStream()),o.properties,new t.VoiceProfileConnectionFactory),this.privProperties=o.properties.clone(),this.privVoiceAdapter=this.privReco,this.privDisposedVoiceAdapter=!1}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){r.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}async createProfileAsync(a,o){const c=await this.privVoiceAdapter.createProfile(a,o);return new n.VoiceProfile(c[0],a)}async retrieveEnrollmentResultAsync(a){return this.privVoiceAdapter.retrieveEnrollmentResult(a)}async getAllProfilesAsync(a){return this.privVoiceAdapter.getAllProfiles(a)}async getActivationPhrasesAsync(a,o){return this.privVoiceAdapter.getActivationPhrases(a,o)}async enrollProfileAsync(a,o){const c=o;return r.Contracts.throwIfNullOrUndefined(c,"audioConfig"),this.audioConfig=o,this.privVoiceAdapter.SpeakerAudioSource=c,this.privVoiceAdapter.enrollProfile(a)}async deleteProfileAsync(a){return this.privVoiceAdapter.deleteProfile(a)}async resetProfileAsync(a){return this.privVoiceAdapter.resetProfile(a)}async close(){await this.dispose(!0)}createServiceRecognizer(a,o,c,u){const l=c;return new t.VoiceServiceRecognizer(a,o,l,u,this)}async dispose(a){this.privDisposedVoiceAdapter||(this.privDisposedVoiceAdapter=!0,a&&await super.dispose(a))}createRecognizerConfig(a){return new t.RecognizerConfig(a,this.properties)}getResult(a,o){return new n.VoiceProfileResult(a.ok?o:n.ResultReason.Canceled,a.statusText)}};return Ui.VoiceProfileClient=i,Ui}var Wi={},Of;function K1(){if(Of)return Wi;Of=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.SpeakerRecognizer=void 0;const t=k(),e=N,r=I();let n=class extends r.Recognizer{constructor(s,a){e.Contracts.throwIfNullOrUndefined(s,"speechConfig");const o=s;e.Contracts.throwIfNullOrUndefined(o,"speechConfig"),super(a,o.properties,new t.SpeakerRecognitionConnectionFactory),this.privAudioConfigImpl=a,e.Contracts.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privDisposedSpeakerRecognizer=!1,this.privProperties=o.properties}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(s){e.Contracts.throwIfNullOrWhitespace(s,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,s)}get properties(){return this.privProperties}async recognizeOnceAsync(s){return e.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),this.recognizeSpeakerOnceAsyncImpl(s)}async close(){e.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.dispose(!0)}async recognizeSpeakerOnceAsyncImpl(s){e.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.implRecognizerStop();const a=await this.privReco.recognizeSpeaker(s);return await this.implRecognizerStop(),a}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}createRecognizerConfig(s){return new t.RecognizerConfig(s,this.privProperties)}createServiceRecognizer(s,a,o,c){const u=o;return new t.SpeakerServiceRecognizer(s,a,u,c,this)}async dispose(s){this.privDisposedSpeakerRecognizer||s&&(this.privDisposedSpeakerRecognizer=!0,await super.dispose(s))}};return Wi.SpeakerRecognizer=n,Wi}var Hi={},kf;function $1(){if(kf)return Hi;kf=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.SpeakerIdentificationModel=void 0;const t=N,e=I();let r=class jC{constructor(i){if(this.privVoiceProfiles=[],this.privProfileIds=[],t.Contracts.throwIfNullOrUndefined(i,"VoiceProfiles"),i.length===0)throw new Error("Empty Voice Profiles array");for(const s of i){if(s.profileType!==e.VoiceProfileType.TextIndependentIdentification)throw new Error("Identification model can only be created from Identification profile: "+s.profileId);this.privVoiceProfiles.push(s),this.privProfileIds.push(s.profileId)}}static fromProfiles(i){return new jC(i)}get voiceProfileIds(){return this.privProfileIds.join(",")}get profileIds(){return this.privProfileIds}get scenario(){return"TextIndependentIdentification"}};return Hi.SpeakerIdentificationModel=r,Hi}var Vi={},Mf;function J1(){if(Mf)return Vi;Mf=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.SpeakerVerificationModel=void 0;const t=N,e=I();let r=class LC{constructor(i){if(t.Contracts.throwIfNullOrUndefined(i,"VoiceProfile"),i.profileType===e.VoiceProfileType.TextIndependentIdentification)throw new Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=i}static fromProfile(i){return new LC(i)}get voiceProfile(){return this.privVoiceProfile}get profileIds(){return[this.voiceProfile.profileId]}get scenario(){return this.voiceProfile.profileType===e.VoiceProfileType.TextDependentVerification?"TextDependentVerification":"TextIndependentVerification"}};return Vi.SpeakerVerificationModel=r,Vi}var Ki={},Ud={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageIdMode=void 0,function(e){e[e.AtStart=0]="AtStart",e[e.Continuous=1]="Continuous"}(t.LanguageIdMode||(t.LanguageIdMode={}))})(Ud);var bf;function Q1(){if(bf)return Ki;bf=1,Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.AutoDetectSourceLanguageConfig=void 0;const t=k(),e=N,r=I(),n=Ud;let i=class _a{constructor(){this.privProperties=new r.PropertyCollection,this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=n.LanguageIdMode.AtStart}static fromOpenRange(){const a=new _a;return a.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,t.AutoDetectSourceLanguagesOpenRangeOptionName),a}static fromLanguages(a){e.Contracts.throwIfArrayEmptyOrWhitespace(a,"languages");const o=new _a;return o.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,a.join()),o}static fromSourceLanguageConfigs(a){if(a.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");const o=new _a,c=[];return a.forEach(u=>{if(c.push(u.language),u.endpointId!==void 0&&u.endpointId!==""){const l=u.language+r.PropertyId.SpeechServiceConnection_EndpointId.toString();o.properties.setProperty(l,u.endpointId)}}),o.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,c.join()),o}get properties(){return this.privProperties}set mode(a){a===n.LanguageIdMode.Continuous?(this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=a}};return Ki.AutoDetectSourceLanguageConfig=i,Ki}var eu={};Object.defineProperty(eu,"__esModule",{value:!0});eu.AutoDetectSourceLanguageResult=void 0;const Df=N;class ec{constructor(e,r){Df.Contracts.throwIfNullOrUndefined(e,"language"),Df.Contracts.throwIfNullOrUndefined(r,"languageDetectionConfidence"),this.privLanguage=e,this.privLanguageDetectionConfidence=r}static fromResult(e){return new ec(e.language,e.languageDetectionConfidence)}static fromConversationTranscriptionResult(e){return new ec(e.language,e.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}}eu.AutoDetectSourceLanguageResult=ec;var tu={};Object.defineProperty(tu,"__esModule",{value:!0});tu.SourceLanguageConfig=void 0;const G1=N;class Wd{constructor(e,r){G1.Contracts.throwIfNullOrUndefined(e,"language"),this.privLanguage=e,this.privEndpointId=r}static fromLanguage(e,r){return new Wd(e,r)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}}tu.SourceLanguageConfig=Wd;var Sl={},Nf;function X1(){return Nf||(Nf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerRecognitionCancellationDetails=t.SpeakerRecognitionResult=t.SpeakerRecognitionResultType=void 0;const e=k(),r=I();var n;(function(a){a[a.Verify=0]="Verify",a[a.Identify=1]="Identify"})(n=t.SpeakerRecognitionResultType||(t.SpeakerRecognitionResultType={}));class i{constructor(o,c=r.ResultReason.RecognizedSpeaker,u=r.CancellationErrorCode.NoError,l=""){this.privProperties=new r.PropertyCollection;const p=o.scenario==="TextIndependentIdentification"?n.Identify:n.Verify;this.privReason=c,this.privReason!==r.ResultReason.Canceled?p===n.Identify?(this.privProfileId=o.identificationResult.identifiedProfile.profileId,this.privScore=o.identificationResult.identifiedProfile.score,this.privReason=r.ResultReason.RecognizedSpeakers):(this.privScore=o.verificationResult.score,o.verificationResult.recognitionResult.toLowerCase()!=="accept"&&(this.privReason=r.ResultReason.NoMatch),o.verificationResult.profileId!==void 0&&o.verificationResult.profileId!==""&&(this.privProfileId=o.verificationResult.profileId)):(this.privErrorDetails=l,this.privProperties.setProperty(e.CancellationErrorCodePropertyName,r.CancellationErrorCode[u])),this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,JSON.stringify(o))}get properties(){return this.privProperties}get reason(){return this.privReason}get profileId(){return this.privProfileId}get errorDetails(){return this.privErrorDetails}get score(){return this.privScore}}t.SpeakerRecognitionResult=i;class s extends r.CancellationDetailsBase{constructor(o,c,u){super(o,c,u)}static fromResult(o){const c=r.CancellationReason.Error;let u=r.CancellationErrorCode.NoError;return o.properties&&(u=r.CancellationErrorCode[o.properties.getProperty(e.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new s(c,o.errorDetails,u)}}t.SpeakerRecognitionCancellationDetails=s}(Sl)),Sl}var Cl={},Mr={},zf;function xC(){if(zf)return Mr;zf=1,Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.ConversationImpl=Mr.Conversation=void 0;const t=k(),e=D(),r=N,n=I();let i=class{constructor(){}static createConversationAsync(o,c,u,l){r.Contracts.throwIfNullOrUndefined(o,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),r.Contracts.throwIfNullOrUndefined(o.region,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),!o.subscriptionKey&&!o.getProperty(n.PropertyId[n.PropertyId.SpeechServiceAuthorization_Token])&&r.Contracts.throwIfNullOrUndefined(o.subscriptionKey,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));let p,d,h;return typeof c=="string"?(p=new s(o,c),e.marshalPromiseToCallbacks((async()=>{})(),u,l)):(p=new s(o),d=c,h=u,p.createConversationAsync(()=>{d&&d()},v=>{h&&h(v)})),p}};Mr.Conversation=i;class s extends i{constructor(o,c){if(super(),this.privErrors=t.ConversationConnectionConfig.restErrors,this.onConnected=p=>{var d;this.privIsConnected=!0;try{(d=this.privConversationTranslator)!=null&&d.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,p)}catch{}},this.onDisconnected=p=>{var d;try{(d=this.privConversationTranslator)!=null&&d.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,p)}catch{}finally{this.close(!1)}},this.onCanceled=(p,d)=>{var h;try{(h=this.privConversationTranslator)!=null&&h.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,d)}catch{}},this.onParticipantUpdateCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.id);if(h!==void 0){switch(d.key){case t.ConversationTranslatorCommandTypes.changeNickname:h.displayName=d.value;break;case t.ConversationTranslatorCommandTypes.setUseTTS:h.isUsingTts=d.value;break;case t.ConversationTranslatorCommandTypes.setProfanityFiltering:h.profanity=d.value;break;case t.ConversationTranslatorCommandTypes.setMute:h.isMuted=d.value;break;case t.ConversationTranslatorCommandTypes.setTranslateToLanguages:h.translateToLanguages=d.value;break}this.privParticipants.addOrUpdateParticipant(h),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,[this.toParticipant(h)],d.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(p,d)=>{try{this.privParticipants.participants.forEach(h=>h.isMuted=h.isHost?!1:d.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,this.toParticipants(!1),d.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(p,d)=>{try{const h=this.privParticipants.addOrUpdateParticipant(d.participant);h!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,[this.toParticipant(h)],d.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.participant.id);h!==void 0&&(this.privParticipants.deleteParticipant(d.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.LeftConversation,[this.toParticipant(h)],d.sessionId)))}catch{}},this.onTranslationReceived=(p,d)=>{try{switch(d.command){case t.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case t.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case t.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break}}catch{}},this.onParticipantsListReceived=(p,d)=>{var h;try{if(d.sessionToken!==void 0&&d.sessionToken!==null&&(this.privRoom.token=d.sessionToken),this.privParticipants.participants=[...d.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),d.sessionId)),this.me.isHost){const v=(h=this.privConversationTranslator)==null?void 0:h.properties.getProperty(n.PropertyId.ConversationTranslator_Name);v!==void 0&&v.length>0&&v!==this.me.displayName&&this.changeNicknameAsync(v)}}catch{}},this.onConversationExpiration=(p,d)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,d)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new n.PropertyCollection,this.privManager=new t.ConversationManager,o.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage])||o.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage],t.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=o.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),c)this.privConversationId=c;else{o.targetLanguages.length===0&&o.addTargetLanguage(this.privLanguage),o.getProperty(n.PropertyId[n.PropertyId.SpeechServiceResponse_ProfanityOption])||o.setProfanity(n.ProfanityOption.Masked);let d=o.getProperty(n.PropertyId[n.PropertyId.ConversationTranslator_Name]);d==null&&(d="Host"),r.Contracts.throwIfNullOrTooLong(d,"nickname",50),r.Contracts.throwIfNullOrTooShort(d,"nickname",2),o.setProperty(n.PropertyId[n.PropertyId.ConversationTranslator_Name],d)}this.privConfig=o;const l=o;r.Contracts.throwIfNull(l,"speechConfig"),this.privProperties=l.properties.clone(),this.privIsConnected=!1,this.privParticipants=new t.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var o,c;return(o=this.privParticipants.me)!=null&&o.isHost?!1:(c=this.privParticipants.me)==null?void 0:c.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){const o=this.conversationId,c=this.participants.map(p=>({id:p.id,preferredLanguage:p.preferredLanguage,voice:p.voice})),u={};for(const p of t.ConversationConnectionConfig.transcriptionEventKeys){const d=this.properties.getProperty(p,"");d!==""&&(u[p]=d)}return{id:o,participants:c,conversationProperties:u}}get canSend(){var o;return this.privIsConnected&&!((o=this.privParticipants.me)!=null&&o.isMuted)}get canSendAsHost(){var o;return this.privIsConnected&&((o=this.privParticipants.me)==null?void 0:o.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(o){r.Contracts.throwIfNullOrWhitespace(o,"authorizationToken"),this.privToken=o}set conversationTranslator(o){this.privConversationTranslator=o}onToken(o){this.privConversationTranslator.onToken(o)}createConversationAsync(o,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),this.privManager.createOrJoin(this.privProperties,void 0,u=>{u||this.handleError(new Error(this.privErrors.permissionDeniedConnect),c),this.privRoom=u,this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}startConversationAsync(o,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=t.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}addParticipantAsync(o,c,u){r.Contracts.throwIfNullOrUndefined(o,"Participant"),e.marshalPromiseToCallbacks(this.addParticipantImplAsync(o),c,u)}joinConversationAsync(o,c,u,l,p){try{r.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","conversationId")),r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,o,d=>{r.Contracts.throwIfNullOrUndefined(d,this.privErrors.permissionDeniedConnect),this.privRoom=d,this.privConfig.authorizationToken=d.cognitiveSpeechAuthToken,l&&l(d.cognitiveSpeechAuthToken)},d=>{this.handleError(d,p)})}catch(d){this.handleError(d,p)}}deleteConversationAsync(o,c){e.marshalPromiseToCallbacks(this.deleteConversationImplAsync(),o,c)}async deleteConversationImplAsync(){r.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),r.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endConversationAsync(o,c){e.marshalPromiseToCallbacks(this.endConversationImplAsync(),o,c)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(o,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteAllParticipantsAsync(o,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteParticipantAsync(o,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==o&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(o)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(o,!0),()=>{this.handleCallback(c,u)},p=>{this.handleError(p,u)})}catch(l){this.handleError(l,u)}}removeParticipantAsync(o,c,u){try{if(r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&o.hasOwnProperty("id"))e.marshalPromiseToCallbacks(this.removeParticipantImplAsync(o),c,u);else{r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),u);let l="";typeof o=="string"?l=o:o.hasOwnProperty("id")?l=o.id:o.hasOwnProperty("userId")&&(l=o.userId),r.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(d=>d.id===l)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(l),()=>{this.handleCallback(c,u)},d=>{this.handleError(d,u)})}}catch(l){this.handleError(l,u)}}unlockConversationAsync(o,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteAllParticipantsAsync(o,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteParticipantAsync(o,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==o&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(o)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(o,!1),()=>{this.handleCallback(c,u)},p=>{this.handleError(p,u)})}catch(l){this.handleError(l,u)}}sendTextMessageAsync(o,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","message")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),o.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(o),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}setTranslatedLanguagesAsync(o,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfArrayEmptyOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","languages")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(o),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}changeNicknameAsync(o,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(o),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(o){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await o.enforceAudioGating(),this.privTranscriberRecognizer=o,this.privTranscriberRecognizer.conversation=this}getKeepAlive(){const o=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:o,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(o){if(this.privParticipants.addOrUpdateParticipant(o)!==void 0&&this.privTranscriberRecognizer){const u=this.conversationInfo;return u.participants=[o],this.privTranscriberRecognizer.pushConversationEvent(u,"join")}}removeParticipantImplAsync(o){this.privParticipants.deleteParticipant(o.id);const c=this.conversationInfo;return c.participants=[o],this.privTranscriberRecognizer.pushConversationEvent(c,"leave")}async close(o){var c;try{this.privIsConnected=!1,await((c=this.privConversationRecognizer)==null?void 0:c.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(u){throw u}o&&this.dispose()}handleCallback(o,c){if(o){try{o()}catch(u){c&&c(u)}o=void 0}}handleError(o,c){if(c)if(o instanceof Error){const u=o;c(u.name+": "+u.message)}else c(o)}toParticipants(o){const c=this.privParticipants.participants.map(u=>this.toParticipant(u));return o?c:c.filter(u=>u.isHost===!1)}toParticipant(o){return new n.Participant(o.id,o.avatar,o.displayName,o.isHost,o.isMuted,o.isUsingTts,o.preferredLanguage,o.voice)}getMuteAllCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:o})}getMuteCommand(o,c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(o,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setMute,participantId:o,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:c})}getLockCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:o})}getEjectCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(o,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.ejectParticipant,participantId:o,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:o})}getChangeNicknameCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(o,"nickname"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.changeNickname,nickname:o,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:o})}getMessageCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),r.Contracts.throwIfNullOrWhitespace(o,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:o,type:t.ConversationTranslatorMessageTypes.instantMessage})}}return Mr.ConversationImpl=s,Mr}var ru={};Object.defineProperty(ru,"__esModule",{value:!0});ru.ConversationCommon=void 0;class Z1{constructor(e){this.privAudioConfig=e}handleCallback(e,r){if(e){try{e()}catch(n){r&&r(n)}e=void 0}}handleError(e,r){if(r)if(e instanceof Error){const n=e;r(n.name+": "+n.message)}else r(e)}}ru.ConversationCommon=Z1;var $i={},jf;function Y1(){if(jf)return $i;jf=1,Object.defineProperty($i,"__esModule",{value:!0}),$i.ConversationExpirationEventArgs=void 0;const t=I();let e=class extends t.SessionEventArgs{constructor(n,i){super(i),this.privExpirationTime=n}get expirationTime(){return this.privExpirationTime}};return $i.ConversationExpirationEventArgs=e,$i}var Ji={},Lf;function e0(){if(Lf)return Ji;Lf=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.ConversationParticipantsChangedEventArgs=void 0;const t=I();let e=class extends t.SessionEventArgs{constructor(n,i,s){super(s),this.privReason=n,this.privParticipant=i}get reason(){return this.privReason}get participants(){return this.privParticipant}};return Ji.ConversationParticipantsChangedEventArgs=e,Ji}var Qi={},xf;function t0(){if(xf)return Qi;xf=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.ConversationTranslationCanceledEventArgs=void 0;const t=qs();let e=class extends t.CancellationEventArgsBase{};return Qi.ConversationTranslationCanceledEventArgs=e,Qi}var Gi={},Bf;function r0(){if(Bf)return Gi;Bf=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.ConversationTranslationEventArgs=void 0;const t=I();let e=class extends t.RecognitionEventArgs{constructor(n,i,s){super(i,s),this.privResult=n}get result(){return this.privResult}};return Gi.ConversationTranslationEventArgs=e,Gi}var Xi={},Ff;function n0(){if(Ff)return Xi;Ff=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.ConversationTranslationResult=void 0;const t=CC();let e=class extends t.TranslationRecognitionResult{constructor(n,i,s,a,o,c,u,l,p,d,h){super(i,a,o,c,u,l,void 0,void 0,p,d,h),this.privId=n,this.privOrigLang=s}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}};return Xi.ConversationTranslationResult=e,Xi}var Pl={},Zi={},Ws={};Object.defineProperty(Ws,"__esModule",{value:!0});Ws.StringUtils=void 0;class i0{static formatString(e,r){if(!e)return"";if(!r)return e;let n="",i="";const s=c=>{n+=c},a=c=>{i+=c};let o=s;for(let c=0;c<e.length;c++){const u=e[c],l=c+1<e.length?e[c+1]:"";switch(u){case"{":l==="{"?(o("{"),c++):o=a;break;case"}":l==="}"?(o("}"),c++):(r.hasOwnProperty(i)&&(n+=r[i]),o=s,i="");break;default:o(u);break}}return n}}Ws.StringUtils=i0;var qf;function o0(){if(qf)return Zi;qf=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.ConversationTranslatorConnectionFactory=void 0;const t=ye(),e=Ws,r=N,n=I(),i=me,s=Ct,a=Pt(),o=k();let c=class BC extends a.ConnectionFactoryBase{constructor(l){super(),r.Contracts.throwIfNullOrUndefined(l,"convGetter"),this.privConvGetter=l}create(l,p,d){const h=l.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase()==="TRUE",v=this.privConvGetter().room,g=v.cognitiveSpeechRegion||l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region,""),y={hostSuffix:a.ConnectionFactoryBase.getHostSuffix(g),path:BC.CTS_VIRT_MIC_PATH,region:encodeURIComponent(g)};y[s.QueryParameterNames.Language]=encodeURIComponent(l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,"")),y[s.QueryParameterNames.CtsMeetingId]=encodeURIComponent(v.roomId),y[s.QueryParameterNames.CtsDeviceId]=encodeURIComponent(v.participantId),y[s.QueryParameterNames.CtsIsParticipant]=v.isHost?"":"&"+s.QueryParameterNames.CtsIsParticipant;let f="";const m={},S={};if(h){f=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint),f||(f="wss://"+l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"),f=e.StringUtils.formatString(f,y);const P=new URL(f);P.searchParams.forEach((A,w)=>{m[w]=A}),new o.TranscriberConnectionFactory().setQueryParams(m,l,f),m[s.QueryParameterNames.CtsMeetingId]=y[s.QueryParameterNames.CtsMeetingId],m[s.QueryParameterNames.CtsDeviceId]=y[s.QueryParameterNames.CtsDeviceId],v.isHost||(m[s.QueryParameterNames.CtsIsParticipant]=""),s.QueryParameterNames.Format in m||(m[s.QueryParameterNames.Format]="simple"),P.searchParams.forEach((A,w)=>{P.searchParams.set(w,m[w]),delete m[w]}),f=P.toString()}else{const P=new o.TranslationConnectionFactory;f=P.getEndpointUrl(l,!0),f=e.StringUtils.formatString(f,y),P.setQueryParams(m,l,f)}S[i.HeaderNames.ConnectionId]=d,S[t.RestConfigBase.configParams.token]=v.token,p.token&&(S[p.headerName]=p.token);const C=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase()==="TRUE";return new t.WebsocketConnection(f,m,S,new o.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(l),C,d)}};return Zi.ConversationTranslatorConnectionFactory=c,c.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio",Zi}var Uf;function s0(){return Uf||(Uf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslator=t.SpeechState=void 0;const e=k(),r=o0(),n=D(),i=N,s=I(),a=xC(),o=Hd();var c;(function(p){p[p.Inactive=0]="Inactive",p[p.Connecting=1]="Connecting",p[p.Connected=2]="Connected"})(c=t.SpeechState||(t.SpeechState={}));class u extends s.TranslationRecognizer{constructor(d,h,v,g){super(d,h,new r.ConversationTranslatorConnectionFactory(g)),this.privSpeechState=c.Inactive,v&&(this.privTranslator=v,this.sessionStarted=()=>{this.privSpeechState=c.Connected},this.sessionStopped=()=>{this.privSpeechState=c.Inactive},this.recognizing=(y,f)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,f)},this.recognized=async(y,f)=>{var m;(m=f.result)!=null&&m.errorDetails?(await this.cancelSpeech(),this.fireCancelEvent(f.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,f)},this.canceled=async()=>{if(this.privSpeechState!==c.Inactive)try{await this.cancelSpeech()}catch{this.privSpeechState=c.Inactive}})}get state(){return this.privSpeechState}set state(d){this.privSpeechState=d}set authentication(d){this.privReco.authentication=d}onConnection(){this.privSpeechState=c.Connected}async onCancelSpeech(){this.privSpeechState=c.Inactive,await this.cancelSpeech()}fireCancelEvent(d){try{if(this.privTranslator.canceled){const h=new o.ConversationTranslationCanceledEventArgs(s.CancellationReason.Error,d,s.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,h)}}catch{}}async cancelSpeech(){var d;try{this.stopContinuousRecognitionAsync(),await((d=this.privReco)==null?void 0:d.disconnect()),this.privSpeechState=c.Inactive}catch{}}}class l extends o.ConversationCommon{constructor(d){super(d),this.privErrors=e.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new s.PropertyCollection}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){var d;return(d=this.privConversation)==null?void 0:d.participants}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer||this.privIsSpeaking||this.privCTRecognizer.state===c.Connected||this.privCTRecognizer.state===c.Connecting||this.privConversation.isMutedByHost)}onToken(d){this.privCTRecognizer.authentication=d}setServiceProperty(d,h){const v=JSON.parse(this.privProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));v[d]=h,this.privProperties.setProperty(e.ServicePropertiesPropertyName,JSON.stringify(v))}joinConversationAsync(d,h,v,g,y){try{if(typeof d=="string"){i.Contracts.throwIfNullOrUndefined(d,this.privErrors.invalidArgs.replace("{arg}","conversation id")),i.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),y);let f=v;(f==null||f==="")&&(f=e.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=s.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(s.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(f),this.privSpeechTranslationConfig.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage],f),this.privSpeechTranslationConfig.setProperty(s.PropertyId[s.PropertyId.ConversationTranslator_Name],h);const m=[s.PropertyId.SpeechServiceConnection_Host,s.PropertyId.ConversationTranslator_Host,s.PropertyId.SpeechServiceConnection_Endpoint,s.PropertyId.SpeechServiceConnection_ProxyHostName,s.PropertyId.SpeechServiceConnection_ProxyPassword,s.PropertyId.SpeechServiceConnection_ProxyPort,s.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"];for(const C of m){const P=this.privProperties.getProperty(C);if(P){const R=typeof C=="string"?C:s.PropertyId[C];this.privSpeechTranslationConfig.setProperty(R,P)}}const S=JSON.parse(this.privProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));for(const C of Object.keys(S))this.privSpeechTranslationConfig.setServiceProperty(C,S[C],s.ServicePropertyChannel.UriQueryParameter);this.privConversation=new a.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(d,h,f,C=>{C||this.handleError(new Error(this.privErrors.permissionDeniedConnect),y),this.privSpeechTranslationConfig.authorizationToken=C,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync(()=>{this.handleCallback(g,y)},P=>{this.handleError(P,y)})},C=>{this.handleError(C,y)})}else typeof d=="object"?(i.Contracts.throwIfNullOrUndefined(d,this.privErrors.invalidArgs.replace("{arg}","conversation id")),i.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(s.PropertyId.ConversationTranslator_Name,h),this.privConversation=d,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),i.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=d.config,this.handleCallback(v,g)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),g)}catch(f){this.handleError(f,typeof v=="string"?y:g)}}leaveConversationAsync(d,h){n.marshalPromiseToCallbacks((async()=>{await this.cancelSpeech(),await this.privConversation.endConversationImplAsync(),await this.privConversation.deleteConversationImplAsync(),this.dispose()})(),d,h)}sendTextMessageAsync(d,h,v){try{i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),i.Contracts.throwIfNullOrWhitespace(d,this.privErrors.invalidArgs.replace("{arg}",d)),this.privConversation.sendTextMessageAsync(d,h,v)}catch(g){this.handleError(g,v)}}startTranscribingAsync(d,h){n.marshalPromiseToCallbacks((async()=>{try{i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),i.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privCTRecognizer===void 0&&await this.connectTranslatorRecognizer(),i.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),h),await this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(v){throw this.privIsSpeaking=!1,await this.cancelSpeech(),v}})(),d,h)}stopTranscribingAsync(d,h){n.marshalPromiseToCallbacks((async()=>{try{if(!this.privIsSpeaking){await this.cancelSpeech();return}this.privIsSpeaking=!1,await new Promise((v,g)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(v,g)})}catch{await this.cancelSpeech()}})(),d,h)}isDisposed(){return this.privIsDisposed}dispose(d,h,v){n.marshalPromiseToCallbacks((async()=>{this.isDisposed&&!this.privIsSpeaking||(await this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)})(),h,v)}async cancelSpeech(){var d;try{this.privIsSpeaking=!1,await((d=this.privCTRecognizer)==null?void 0:d.onCancelSpeech()),this.privCTRecognizer=void 0}catch{}}async connectTranslatorRecognizer(){try{this.privAudioConfig===void 0&&(this.privAudioConfig=s.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_Key],"");const d=()=>this.privConversation;this.privCTRecognizer=new u(this.privSpeechTranslationConfig,this.privAudioConfig,this,d)}catch(d){throw await this.cancelSpeech(),d}}startContinuousRecognition(){return new Promise((d,h)=>{this.privCTRecognizer.startContinuousRecognitionAsync(d,h)})}}t.ConversationTranslator=l}(Pl)),Pl}var Yi={},Wf;function a0(){if(Wf)return Yi;Wf=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.ConversationTranscriber=void 0;const t=k(),e=D(),r=N,n=I();let i=class FC extends n.Recognizer{constructor(a,o){const c=a;r.Contracts.throwIfNull(c,"speechConfig"),r.Contracts.throwIfNullOrWhitespace(c.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage),n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),super(o,c.properties,new t.ConversationTranscriberConnectionFactory),this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}static FromConfig(a,o,c){const u=a;return o.properties.mergeTo(u.properties),new FC(a,c)}get endpointId(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){r.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(t.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Simple])===n.OutputFormat[n.OutputFormat.Simple]?n.OutputFormat.Simple:n.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(a,o){e.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),a,o)}stopTranscribingAsync(a,o){e.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,o)}close(a,o){r.Contracts.throwIfDisposed(this.privDisposedRecognizer),e.marshalPromiseToCallbacks(this.dispose(!0),a,o)}async dispose(a){this.privDisposedRecognizer||(a&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(a))}createRecognizerConfig(a){return new t.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,o,c,u){const l=c;return u.isSpeakerDiarizationEnabled=!0,new t.ConversationTranscriptionServiceRecognizer(a,o,l,u,this)}};return Yi.ConversationTranscriber=i,Yi}var br={},Hf;function c0(){if(Hf)return br;Hf=1,Object.defineProperty(br,"__esModule",{value:!0}),br.Participant=br.User=void 0;const t=I();class e{constructor(i){this.privUserId=i}get userId(){return this.privUserId}}br.User=e;class r{constructor(i,s,a,o,c,u,l,p){this.privId=i,this.privAvatar=s,this.privDisplayName=a,this.privIsHost=o,this.privIsMuted=c,this.privIsUsingTts=u,this.privPreferredLanguage=l,this.privVoice=p,this.privProperties=new t.PropertyCollection}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(i,s,a){return new r(i,"",i,!1,!1,!1,s,a)}}return br.Participant=r,br}var qC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ParticipantChangedReason=void 0,function(e){e[e.JoinedConversation=0]="JoinedConversation",e[e.LeftConversation=1]="LeftConversation",e[e.Updated=2]="Updated"}(t.ParticipantChangedReason||(t.ParticipantChangedReason={}))})(qC);var Dr={},Vf;function u0(){if(Vf)return Dr;Vf=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.MeetingImpl=Dr.Meeting=void 0;const t=k(),e=D(),r=N,n=I();let i=class{constructor(){}static createMeetingAsync(o,c,u,l){if(r.Contracts.throwIfNullOrUndefined(o,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),r.Contracts.throwIfNullOrUndefined(o.region,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),r.Contracts.throwIfNull(c,"meetingId"),c.length===0)throw new Error("meetingId cannot be empty");!o.subscriptionKey&&!o.getProperty(n.PropertyId[n.PropertyId.SpeechServiceAuthorization_Token])&&r.Contracts.throwIfNullOrUndefined(o.subscriptionKey,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));const p=new s(o,c);return e.marshalPromiseToCallbacks((async()=>{})(),u,l),p}};Dr.Meeting=i;class s extends i{constructor(o,c){super(),this.privErrors=t.ConversationConnectionConfig.restErrors,this.onConnected=p=>{var d;this.privIsConnected=!0;try{(d=this.privConversationTranslator)!=null&&d.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,p)}catch{}},this.onDisconnected=p=>{var d;try{(d=this.privConversationTranslator)!=null&&d.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,p)}catch{}finally{this.close(!1)}},this.onCanceled=(p,d)=>{var h;try{(h=this.privConversationTranslator)!=null&&h.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,d)}catch{}},this.onParticipantUpdateCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.id);if(h!==void 0){switch(d.key){case t.ConversationTranslatorCommandTypes.changeNickname:h.displayName=d.value;break;case t.ConversationTranslatorCommandTypes.setUseTTS:h.isUsingTts=d.value;break;case t.ConversationTranslatorCommandTypes.setProfanityFiltering:h.profanity=d.value;break;case t.ConversationTranslatorCommandTypes.setMute:h.isMuted=d.value;break;case t.ConversationTranslatorCommandTypes.setTranslateToLanguages:h.translateToLanguages=d.value;break}this.privParticipants.addOrUpdateParticipant(h),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,[this.toParticipant(h)],d.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(p,d)=>{try{this.privParticipants.participants.forEach(h=>h.isMuted=h.isHost?!1:d.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,this.toParticipants(!1),d.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(p,d)=>{try{const h=this.privParticipants.addOrUpdateParticipant(d.participant);h!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,[this.toParticipant(h)],d.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.participant.id);h!==void 0&&(this.privParticipants.deleteParticipant(d.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.LeftConversation,[this.toParticipant(h)],d.sessionId)))}catch{}},this.onTranslationReceived=(p,d)=>{try{switch(d.command){case t.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case t.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case t.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break}}catch{}},this.onParticipantsListReceived=(p,d)=>{var h;try{if(d.sessionToken!==void 0&&d.sessionToken!==null&&(this.privRoom.token=d.sessionToken),this.privParticipants.participants=[...d.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),d.sessionId)),this.me.isHost){const v=(h=this.privConversationTranslator)==null?void 0:h.properties.getProperty(n.PropertyId.ConversationTranslator_Name);v!==void 0&&v.length>0&&v!==this.me.displayName&&this.changeNicknameAsync(v)}}catch{}},this.onConversationExpiration=(p,d)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,d)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new n.PropertyCollection,this.privManager=new t.ConversationManager,o.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage])||o.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage],t.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=o.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=c,this.privConfig=o;const l=o;r.Contracts.throwIfNull(l,"speechConfig"),this.privProperties=l.properties.clone(),this.privIsConnected=!1,this.privParticipants=new t.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var o,c;return(o=this.privParticipants.me)!=null&&o.isHost?!1:(c=this.privParticipants.me)==null?void 0:c.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){const o=this.meetingId,c=this.participants.map(p=>({id:p.id,preferredLanguage:p.preferredLanguage,voice:p.voice})),u={};for(const p of t.ConversationConnectionConfig.transcriptionEventKeys){const d=this.properties.getProperty(p,"");d!==""&&(u[p]=d)}return{id:o,participants:c,meetingProperties:u}}get canSend(){var o;return this.privIsConnected&&!((o=this.privParticipants.me)!=null&&o.isMuted)}get canSendAsHost(){var o;return this.privIsConnected&&((o=this.privParticipants.me)==null?void 0:o.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(o){r.Contracts.throwIfNullOrWhitespace(o,"authorizationToken"),this.privToken=o}createMeetingAsync(o,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),this.privManager.createOrJoin(this.privProperties,void 0,u=>{u||this.handleError(new Error(this.privErrors.permissionDeniedConnect),c),this.privRoom=u,this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}startMeetingAsync(o,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}addParticipantAsync(o,c,u){r.Contracts.throwIfNullOrUndefined(o,"Participant"),e.marshalPromiseToCallbacks(this.addParticipantImplAsync(o),c,u)}joinMeetingAsync(o,c,u,l,p){try{r.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","conversationId")),r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,o,d=>{r.Contracts.throwIfNullOrUndefined(d,this.privErrors.permissionDeniedConnect),this.privRoom=d,this.privConfig.authorizationToken=d.cognitiveSpeechAuthToken,l&&l(d.cognitiveSpeechAuthToken)},d=>{this.handleError(d,p)})}catch(d){this.handleError(d,p)}}deleteMeetingAsync(o,c){e.marshalPromiseToCallbacks(this.deleteMeetingImplAsync(),o,c)}async deleteMeetingImplAsync(){r.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),r.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endMeetingAsync(o,c){e.marshalPromiseToCallbacks(this.endMeetingImplAsync(),o,c)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(o,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteAllParticipantsAsync(o,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteParticipantAsync(o,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==o&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(o)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(o,!0),()=>{this.handleCallback(c,u)},p=>{this.handleError(p,u)})}catch(l){this.handleError(l,u)}}removeParticipantAsync(o,c,u){try{if(r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&o.hasOwnProperty("id"))e.marshalPromiseToCallbacks(this.removeParticipantImplAsync(o),c,u);else{r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),u);let l="";typeof o=="string"?l=o:o.hasOwnProperty("id")?l=o.id:o.hasOwnProperty("userId")&&(l=o.userId),r.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(d=>d.id===l)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(l),()=>{this.handleCallback(c,u)},d=>{this.handleError(d,u)})}}catch(l){this.handleError(l,u)}}unlockMeetingAsync(o,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteAllParticipantsAsync(o,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteParticipantAsync(o,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==o&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(o)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(o,!1),()=>{this.handleCallback(c,u)},p=>{this.handleError(p,u)})}catch(l){this.handleError(l,u)}}sendTextMessageAsync(o,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","message")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),o.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(o),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}setTranslatedLanguagesAsync(o,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfArrayEmptyOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","languages")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(o),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}changeNicknameAsync(o,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(o),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(o){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await o.enforceAudioGating(),this.privTranscriberRecognizer=o,this.privTranscriberRecognizer.meeting=this}getKeepAlive(){const o=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:o,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(o){if(this.privParticipants.addOrUpdateParticipant(o)!==void 0&&this.privTranscriberRecognizer){const u=this.meetingInfo;return u.participants=[o],this.privTranscriberRecognizer.pushMeetingEvent(u,"join")}}removeParticipantImplAsync(o){this.privParticipants.deleteParticipant(o.id);const c=this.meetingInfo;return c.participants=[o],this.privTranscriberRecognizer.pushMeetingEvent(c,"leave")}async close(o){var c;try{this.privIsConnected=!1,await((c=this.privConversationRecognizer)==null?void 0:c.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(u){throw u}o&&this.dispose()}handleCallback(o,c){if(o){try{o()}catch(u){c&&c(u)}o=void 0}}handleError(o,c){if(c)if(o instanceof Error){const u=o;c(u.name+": "+u.message)}else c(o)}toParticipants(o){const c=this.privParticipants.participants.map(u=>this.toParticipant(u));return o?c:c.filter(u=>u.isHost===!1)}toParticipant(o){return new n.Participant(o.id,o.avatar,o.displayName,o.isHost,o.isMuted,o.isUsingTts,o.preferredLanguage,o.voice)}getMuteAllCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:o})}getMuteCommand(o,c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(o,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setMute,participantId:o,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:c})}getLockCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:o})}getEjectCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(o,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.ejectParticipant,participantId:o,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:o})}getChangeNicknameCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(o,"nickname"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.changeNickname,nickname:o,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:o})}getMessageCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),r.Contracts.throwIfNullOrWhitespace(o,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:o,type:t.ConversationTranslatorMessageTypes.instantMessage})}}return Dr.MeetingImpl=s,Dr}var eo={},Kf;function l0(){if(Kf)return eo;Kf=1,Object.defineProperty(eo,"__esModule",{value:!0}),eo.MeetingTranscriptionCanceledEventArgs=void 0;const t=qs();class e extends t.CancellationEventArgsBase{}return eo.MeetingTranscriptionCanceledEventArgs=e,eo}var to={},$f;function p0(){if($f)return to;$f=1,Object.defineProperty(to,"__esModule",{value:!0}),to.MeetingTranscriber=void 0;const t=k(),e=D(),r=N,n=I(),i=Hd();let s=class{constructor(o){this.privAudioConfig=o,this.privProperties=new n.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return n.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){r.Contracts.throwIfNullOrWhitespace(o,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,o)}joinMeetingAsync(o,c,u){const l=o;r.Contracts.throwIfNullOrUndefined(i.MeetingImpl,"Meeting"),this.privRecognizer=new t.TranscriberRecognizer(o.config,this.privAudioConfig),r.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),e.marshalPromiseToCallbacks(l.connectTranscriberRecognizer(this.privRecognizer),c,u)}startTranscribingAsync(o,c){this.privRecognizer.startContinuousRecognitionAsync(o,c)}stopTranscribingAsync(o,c){this.privRecognizer.stopContinuousRecognitionAsync(o,c)}leaveMeetingAsync(o,c){this.privRecognizer.disconnectCallbacks(),e.marshalPromiseToCallbacks((async()=>{})(),o,c)}close(o,c){r.Contracts.throwIfDisposed(this.privDisposedRecognizer),e.marshalPromiseToCallbacks(this.dispose(!0),o,c)}async dispose(o){this.privDisposedRecognizer||(this.privRecognizer&&(await this.privRecognizer.close(),this.privRecognizer=void 0),o&&(this.privDisposedRecognizer=!0))}};return to.MeetingTranscriber=s,to}var ro={},Jf;function d0(){if(Jf)return ro;Jf=1,Object.defineProperty(ro,"__esModule",{value:!0}),ro.ConversationTranscriptionResult=void 0;const t=I();let e=class extends t.RecognitionResult{constructor(n,i,s,a,o,c,u,l,p,d,h){super(n,i,s,a,o,c,u,p,d,h),this.privSpeakerId=l}get speakerId(){return this.privSpeakerId}};return ro.ConversationTranscriptionResult=e,ro}var Qf;function Hd(){return Qf||(Qf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=xC();Object.defineProperty(t,"Conversation",{enumerable:!0,get:function(){return e.Conversation}}),Object.defineProperty(t,"ConversationImpl",{enumerable:!0,get:function(){return e.ConversationImpl}});var r=ru;Object.defineProperty(t,"ConversationCommon",{enumerable:!0,get:function(){return r.ConversationCommon}});var n=Y1();Object.defineProperty(t,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return n.ConversationExpirationEventArgs}});var i=e0();Object.defineProperty(t,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return i.ConversationParticipantsChangedEventArgs}});var s=t0();Object.defineProperty(t,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return s.ConversationTranslationCanceledEventArgs}});var a=r0();Object.defineProperty(t,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return a.ConversationTranslationEventArgs}});var o=n0();Object.defineProperty(t,"ConversationTranslationResult",{enumerable:!0,get:function(){return o.ConversationTranslationResult}});var c=s0();Object.defineProperty(t,"ConversationTranslator",{enumerable:!0,get:function(){return c.ConversationTranslator}});var u=a0();Object.defineProperty(t,"ConversationTranscriber",{enumerable:!0,get:function(){return u.ConversationTranscriber}});var l=c0();Object.defineProperty(t,"Participant",{enumerable:!0,get:function(){return l.Participant}}),Object.defineProperty(t,"User",{enumerable:!0,get:function(){return l.User}});var p=qC;Object.defineProperty(t,"ParticipantChangedReason",{enumerable:!0,get:function(){return p.ParticipantChangedReason}});var d=u0();Object.defineProperty(t,"Meeting",{enumerable:!0,get:function(){return d.Meeting}}),Object.defineProperty(t,"MeetingImpl",{enumerable:!0,get:function(){return d.MeetingImpl}});var h=l0();Object.defineProperty(t,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return h.MeetingTranscriptionCanceledEventArgs}});var v=p0();Object.defineProperty(t,"MeetingTranscriber",{enumerable:!0,get:function(){return v.MeetingTranscriber}});var g=d0();Object.defineProperty(t,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return g.ConversationTranscriptionResult}})}(Cl)),Cl}var Nr={},Gf;function Vd(){if(Gf)return Nr;Gf=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.SynthesisRequest=Nr.Synthesizer=void 0;const t=k(),e=D(),r=N,n=I();let i=class UC{constructor(o){const c=o;r.Contracts.throwIfNull(c,"speechConfig"),this.privProperties=c.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new e.Queue}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){r.Contracts.throwIfNullOrWhitespace(o,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,o)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===t.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(o){const c={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-JennyNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"};let u=this.properties.getProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),l=this.properties.getProperty(n.PropertyId.SpeechServiceConnection_SynthVoice,""),p=UC.XMLEncode(o);return this.autoDetectSourceLanguage?u="en-US":l=l||c[u],l&&(p=`<voice name='${l}'>${p}</voice>`),p=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${u}'>${p}</speak>`,p}async dispose(o){this.privDisposed||(o&&this.privAdapter&&await this.privAdapter.dispose(),this.privDisposed=!0)}async adapterSpeak(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const o=await this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(o.text,o.isSSML,o.requestId,o.cb,o.err,o.dataStream)}}createSynthesizerConfig(o){return new t.SynthesizerConfig(o,this.privProperties)}implCommonSynthesizeSetup(){let o=typeof window<"u"?"Browser":"Node",c="unknown",u="unknown";typeof navigator<"u"&&(o=o+"/"+navigator.platform,c=navigator.userAgent,u=navigator.appVersion);const l=this.createSynthesizerConfig(new t.SpeechServiceConfig(new t.Context(new t.OS(o,c,u)))),p=this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_Key,void 0),d=p&&p!==""?new t.CognitiveSubscriptionKeyAuthentication(p):new t.CognitiveTokenAuthentication(()=>{const h=this.privProperties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(h)},()=>{const h=this.privProperties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(h)});this.privAdapter=this.createSynthesisAdapter(d,this.privConnectionFactory,l),this.privRestAdapter=this.createRestSynthesisAdapter(d,l)}static XMLEncode(o){return o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}};Nr.Synthesizer=i;class s{constructor(o,c,u,l,p,d){this.requestId=o,this.text=c,this.isSSML=u,this.cb=l,this.err=p,this.dataStream=d}}return Nr.SynthesisRequest=s,Nr}var no={},Xf;function h0(){if(Xf)return no;Xf=1,Object.defineProperty(no,"__esModule",{value:!0}),no.SpeechSynthesizer=void 0;const t=k(),e=D(),r=Fs,n=wr,i=Pe,s=N,a=I(),o=Vd();let c=class WC extends a.Synthesizer{constructor(l,p){super(l),p!==null&&(p===void 0?this.audioConfig=typeof window>"u"?void 0:a.AudioConfig.fromDefaultSpeakerOutput():this.audioConfig=p),this.privConnectionFactory=new t.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}static FromConfig(l,p,d){const h=l;return p.properties.mergeTo(h.properties),new WC(l,d)}speakTextAsync(l,p,d,h){this.speakImpl(l,!1,p,d,h)}speakSsmlAsync(l,p,d,h){this.speakImpl(l,!0,p,d,h)}async getVoicesAsync(l=""){return this.getVoices(l)}close(l,p){s.Contracts.throwIfDisposed(this.privDisposed),e.marshalPromiseToCallbacks(this.dispose(!0),l,p)}get internalData(){return this.privAdapter}createSynthesisAdapter(l,p,d){return new t.SpeechSynthesisAdapter(l,p,d,this,this.audioConfig)}createRestSynthesisAdapter(l,p){return new t.SynthesisRestAdapter(p,l)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=n.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(a.SpeechSynthesisOutputFormat[this.properties.getProperty(a.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(l,p,d,h,v){try{s.Contracts.throwIfDisposed(this.privDisposed);const g=e.createNoDashGuid();let y;v instanceof a.PushAudioOutputStreamCallback?y=new i.PushAudioOutputStreamImpl(v):v instanceof a.PullAudioOutputStream?y=v:v!==void 0?y=new r.AudioFileWriter(v):y=void 0,this.synthesisRequestQueue.enqueue(new o.SynthesisRequest(g,l,p,f=>{if(this.privSynthesizing=!1,d)try{d(f)}catch(m){h&&h(m)}d=void 0,this.adapterSpeak().catch(()=>{})},f=>{h&&h(f)},y)),this.adapterSpeak().catch(()=>{})}catch(g){if(h)if(g instanceof Error){const y=g;h(y.name+": "+y.message)}else h(g);this.dispose(!0).catch(()=>{})}}async getVoices(l){const p=e.createNoDashGuid(),d=await this.privRestAdapter.getVoicesList(p);if(d.ok&&Array.isArray(d.json)){let h=d.json;return l&&l.length>0&&(h=h.filter(v=>!!v.Locale&&v.Locale.toLowerCase()===l.toLowerCase())),new a.SynthesisVoicesResult(p,h,void 0)}else return new a.SynthesisVoicesResult(p,void 0,`Error: ${d.status}: ${d.statusText}`)}};return no.SpeechSynthesizer=c,no}var nu={};Object.defineProperty(nu,"__esModule",{value:!0});nu.SynthesisResult=void 0;class v0{constructor(e,r,n,i){this.privResultId=e,this.privReason=r,this.privErrorDetails=n,this.privProperties=i}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}}nu.SynthesisResult=v0;var io={},Zf;function f0(){if(Zf)return io;Zf=1,Object.defineProperty(io,"__esModule",{value:!0}),io.SpeechSynthesisResult=void 0;const t=I();let e=class extends t.SynthesisResult{constructor(n,i,s,a,o,c){super(n,i,a,o),this.privAudioData=s,this.privAudioDuration=c}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}};return io.SpeechSynthesisResult=e,io}var iu={};Object.defineProperty(iu,"__esModule",{value:!0});iu.SpeechSynthesisEventArgs=void 0;class g0{constructor(e){this.privResult=e}get result(){return this.privResult}}iu.SpeechSynthesisEventArgs=g0;var ou={};Object.defineProperty(ou,"__esModule",{value:!0});ou.SpeechSynthesisWordBoundaryEventArgs=void 0;class m0{constructor(e,r,n,i,s,a){this.privAudioOffset=e,this.privDuration=r,this.privText=n,this.privWordLength=i,this.privTextOffset=s,this.privBoundaryType=a}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}}ou.SpeechSynthesisWordBoundaryEventArgs=m0;var su={};Object.defineProperty(su,"__esModule",{value:!0});su.SpeechSynthesisBookmarkEventArgs=void 0;class y0{constructor(e,r){this.privAudioOffset=e,this.privText=r}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}}su.SpeechSynthesisBookmarkEventArgs=y0;var au={};Object.defineProperty(au,"__esModule",{value:!0});au.SpeechSynthesisVisemeEventArgs=void 0;class S0{constructor(e,r,n){this.privAudioOffset=e,this.privVisemeId=r,this.privAnimation=n}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}}au.SpeechSynthesisVisemeEventArgs=S0;var HC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisBoundaryType=void 0,function(e){e.Word="WordBoundary",e.Punctuation="PunctuationBoundary",e.Sentence="SentenceBoundary"}(t.SpeechSynthesisBoundaryType||(t.SpeechSynthesisBoundaryType={}))})(HC);var oo={},Yf;function C0(){if(Yf)return oo;Yf=1,Object.defineProperty(oo,"__esModule",{value:!0}),oo.SynthesisVoicesResult=void 0;const t=I();let e=class extends t.SynthesisResult{constructor(n,i,s){if(Array.isArray(i)){super(n,t.ResultReason.VoicesListRetrieved,void 0,new t.PropertyCollection),this.privVoices=[];for(const a of i)this.privVoices.push(new t.VoiceInfo(a))}else super(n,t.ResultReason.Canceled,s||"Error information unavailable",new t.PropertyCollection)}get voices(){return this.privVoices}};return oo.SynthesisVoicesResult=e,oo}var VC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceInfo=t.SynthesisVoiceType=t.SynthesisVoiceGender=void 0;var e;(function(s){s[s.Unknown=0]="Unknown",s[s.Female=1]="Female",s[s.Male=2]="Male",s[s.Neutral=3]="Neutral"})(e=t.SynthesisVoiceGender||(t.SynthesisVoiceGender={}));var r;(function(s){s[s.OnlineNeural=1]="OnlineNeural",s[s.OnlineStandard=2]="OnlineStandard",s[s.OfflineNeural=3]="OfflineNeural",s[s.OfflineStandard=4]="OfflineStandard"})(r=t.SynthesisVoiceType||(t.SynthesisVoiceType={}));const n={[e[e.Neutral]]:e.Neutral,[e[e.Male]]:e.Male,[e[e.Female]]:e.Female};class i{constructor(a){if(this.privStyleList=[],a){if(this.privName=a.Name,this.privLocale=a.Locale,this.privShortName=a.ShortName,this.privLocaleName=a.LocaleName,this.privDisplayName=a.DisplayName,this.privLocalName=a.LocalName,this.privVoiceType=a.VoiceType.endsWith("Standard")?r.OnlineStandard:r.OnlineNeural,this.privGender=n[a.Gender]||e.Unknown,a.StyleList&&Array.isArray(a.StyleList))for(const o of a.StyleList)this.privStyleList.push(o);this.privSampleRateHertz=a.SampleRateHertz,this.privStatus=a.Status,a.ExtendedPropertyMap&&(this.privExtendedPropertyMap=a.ExtendedPropertyMap),this.privWordsPerMinute=a.WordsPerMinute,Array.isArray(a.SecondaryLocaleList)&&(this.privSecondaryLocaleList=[...a.SecondaryLocaleList]),Array.isArray(a.RolePlayList)&&(this.privRolePlayList=[...a.RolePlayList])}}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get sampleRateHertz(){return this.privSampleRateHertz}get status(){return this.privStatus}get extendedPropertyMap(){return this.privExtendedPropertyMap}get wordsPerMinute(){return this.privWordsPerMinute}get secondaryLocaleList(){return this.privSecondaryLocaleList}get rolePlayList(){return this.privRolePlayList}}t.VoiceInfo=i})(VC);var cu={};Object.defineProperty(cu,"__esModule",{value:!0});cu.SpeakerAudioDestination=void 0;const zr=D(),P0=Pe,nt=Er,R0=60*30,eg={[nt.AudioFormatTag.PCM]:"audio/wav",[nt.AudioFormatTag.MuLaw]:"audio/x-wav",[nt.AudioFormatTag.MP3]:"audio/mpeg",[nt.AudioFormatTag.OGG_OPUS]:"audio/ogg",[nt.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[nt.AudioFormatTag.ALaw]:"audio/x-wav",[nt.AudioFormatTag.FLAC]:"audio/flac"};class E0{constructor(e){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=e||zr.createNoDashGuid(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(e,r,n){this.privAudioBuffer!==void 0?(this.privAudioBuffer.push(e),this.updateSourceBuffer().then(()=>{r&&r()},i=>{n&&n(i)})):this.privAudioOutputStream!==void 0&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength)}close(e,r){if(this.privIsClosed=!0,this.privSourceBuffer!==void 0)this.handleSourceBufferUpdateEnd().then(()=>{e&&e()},n=>{r&&r(n)});else if(this.privAudioOutputStream!==void 0&&typeof window<"u")if((this.privFormat.formatTag===nt.AudioFormatTag.PCM||this.privFormat.formatTag===nt.AudioFormatTag.MuLaw||this.privFormat.formatTag===nt.AudioFormatTag.ALaw)&&this.privFormat.hasHeader===!1)console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else{let n=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(n).then(()=>{n=this.privFormat.addHeader(n);const i=new Blob([n],{type:eg[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(i),this.notifyPlayback().then(()=>{e&&e()},s=>{r&&r(s)})},i=>{r&&r(i)})}else this.onAudioEnd&&this.onAudioEnd(this)}set format(e){if(typeof AudioContext<"u"||typeof window<"u"&&typeof window.webkitAudioContext<"u"){this.privFormat=e;const r=eg[this.privFormat.formatTag];r===void 0?console.warn(`Unknown mimeType for format ${nt.AudioFormatTag[this.privFormat.formatTag]}; playback is not supported.`):typeof MediaSource<"u"&&MediaSource.isTypeSupported(r)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=R0,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(r),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch(n=>{zr.Events.instance.onEvent(new zr.BackgroundEvent(n))})},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch(n=>{zr.Events.instance.onEvent(new zr.BackgroundEvent(n))})},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(n=>{zr.Events.instance.onEvent(new zr.BackgroundEvent(n))})):(console.warn(`Format ${nt.AudioFormatTag[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new P0.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){var e;return((e=this.privAudio)==null?void 0:e.volume)??-1}set volume(e){this.privAudio&&(this.privAudio.volume=e)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return this.privAudio!==void 0?this.privAudio.currentTime:-1}pause(){!this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.pause(),this.privIsPaused=!0)}resume(e,r){this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.play().then(()=>{e&&e()},n=>{r&&r(n)}),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}async updateSourceBuffer(){if(this.privAudioBuffer!==void 0&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const e=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(e)}catch{this.privAudioBuffer.unshift(e),console.log("buffer filled, pausing addition of binaries until space is made");return}await this.notifyPlayback()}else this.canEndStream()&&await this.handleSourceBufferUpdateEnd()}async handleSourceBufferUpdateEnd(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),await this.notifyPlayback())}async notifyPlayback(){!this.privPlaybackStarted&&this.privAudio!==void 0&&(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||await this.privAudio.play())}canEndStream(){return this.isClosed&&this.privSourceBuffer!==void 0&&this.privAudioBuffer.length===0&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&this.privMediaSource.readyState==="open"}sourceBufferAvailable(){return this.privSourceBuffer!==void 0&&!this.privSourceBuffer.updating}}cu.SpeakerAudioDestination=E0;var so={},tg;function w0(){if(tg)return so;tg=1,Object.defineProperty(so,"__esModule",{value:!0}),so.ConversationTranscriptionCanceledEventArgs=void 0;const t=qs();let e=class extends t.CancellationEventArgsBase{};return so.ConversationTranscriptionCanceledEventArgs=e,so}var ao={},rg;function A0(){if(rg)return ao;rg=1,Object.defineProperty(ao,"__esModule",{value:!0}),ao.MeetingTranscriptionCanceledEventArgs=void 0;const t=qs();let e=class extends t.CancellationEventArgsBase{};return ao.MeetingTranscriptionCanceledEventArgs=e,ao}var KC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentGradingSystem=void 0,function(e){e[e.FivePoint=1]="FivePoint",e[e.HundredMark=2]="HundredMark"}(t.PronunciationAssessmentGradingSystem||(t.PronunciationAssessmentGradingSystem={}))})(KC);var $C={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentGranularity=void 0,function(e){e[e.Phoneme=1]="Phoneme",e[e.Word=2]="Word",e[e.FullText=3]="FullText"}(t.PronunciationAssessmentGranularity||(t.PronunciationAssessmentGranularity={}))})($C);var co={},ng;function I0(){if(ng)return co;ng=1,Object.defineProperty(co,"__esModule",{value:!0}),co.PronunciationAssessmentConfig=void 0;const t=N,e=I();let r=class JC{constructor(i,s=e.PronunciationAssessmentGradingSystem.FivePoint,a=e.PronunciationAssessmentGranularity.Phoneme,o=!1){t.Contracts.throwIfNullOrUndefined(i,"referenceText"),this.privProperties=new e.PropertyCollection,this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_ReferenceText,i),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_GradingSystem,e.PronunciationAssessmentGradingSystem[s]),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_Granularity,e.PronunciationAssessmentGranularity[a]),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_EnableMiscue,String(o))}static fromJSON(i){t.Contracts.throwIfNullOrUndefined(i,"json");const s=new JC("");return s.privProperties=new e.PropertyCollection,s.properties.setProperty(e.PropertyId.PronunciationAssessment_Json,i),s}toJSON(){return this.updateJson(),this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_Params)}applyTo(i){this.updateJson();const s=i.internalData;s.expectContentAssessmentResponse=!!this.privContentAssessmentTopic,s.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(e.PropertyId.PronunciationAssessment_Params),this.privContentAssessmentTopic,s.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(e.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(i){t.Contracts.throwIfNullOrWhitespace(i,"referenceText"),this.properties.setProperty(e.PropertyId.PronunciationAssessment_ReferenceText,i)}set phonemeAlphabet(i){t.Contracts.throwIfNullOrWhitespace(i,"phonemeAlphabet"),this.privPhonemeAlphabet=i}set enableMiscue(i){const s=i?"true":"false";this.properties.setProperty(e.PropertyId.PronunciationAssessment_EnableMiscue,s)}get enableMiscue(){return this.properties.getProperty(e.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()==="true"}set nbestPhonemeCount(i){this.privNBestPhonemeCount=i}set enableProsodyAssessment(i){this.privEnableProsodyAssessment=i}enableContentAssessmentWithTopic(i){this.privContentAssessmentTopic=i}get properties(){return this.privProperties}updateJson(){const i=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_Json,"{}"),s=JSON.parse(i),a=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_ReferenceText);a&&(s.referenceText=a);const o=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_GradingSystem);o&&(s.gradingSystem=o);const c=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_Granularity);c&&(s.granularity=c),this.privPhonemeAlphabet&&(s.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(s.nbestPhonemeCount=this.privNBestPhonemeCount),s.enableProsodyAssessment=this.privEnableProsodyAssessment,s.dimension="Comprehensive",this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_EnableMiscue)&&(s.enableMiscue=this.enableMiscue),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_Params,JSON.stringify(s))}};return co.PronunciationAssessmentConfig=r,co}var jr={},ig;function T0(){if(ig)return jr;ig=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.PronunciationAssessmentResult=jr.ContentAssessmentResult=void 0;const t=N,e=I();class r{constructor(s){this.privPronJson=s}get grammarScore(){return this.privPronJson.ContentAssessment.GrammarScore}get vocabularyScore(){return this.privPronJson.ContentAssessment.VocabularyScore}get topicScore(){return this.privPronJson.ContentAssessment.TopicScore}}jr.ContentAssessmentResult=r;let n=class QC{constructor(s){const a=JSON.parse(s);t.Contracts.throwIfNullOrUndefined(a.NBest[0],"NBest"),this.privPronJson=a.NBest[0]}static fromResult(s){t.Contracts.throwIfNullOrUndefined(s,"result");const a=s.properties.getProperty(e.PropertyId.SpeechServiceResponse_JsonResult);return t.Contracts.throwIfNullOrUndefined(a,"json"),new QC(a)}get detailResult(){return this.privPronJson}get accuracyScore(){var s;return(s=this.detailResult.PronunciationAssessment)==null?void 0:s.AccuracyScore}get pronunciationScore(){var s;return(s=this.detailResult.PronunciationAssessment)==null?void 0:s.PronScore}get completenessScore(){var s;return(s=this.detailResult.PronunciationAssessment)==null?void 0:s.CompletenessScore}get fluencyScore(){var s;return(s=this.detailResult.PronunciationAssessment)==null?void 0:s.FluencyScore}get prosodyScore(){var s;return(s=this.detailResult.PronunciationAssessment)==null?void 0:s.ProsodyScore}get contentAssessmentResult(){if(this.detailResult.ContentAssessment!==void 0)return new r(this.detailResult)}};return jr.PronunciationAssessmentResult=n,jr}var uo={},og;function _0(){if(og)return uo;og=1,Object.defineProperty(uo,"__esModule",{value:!0}),uo.AvatarConfig=void 0;const t=N,e=I();let r=class{constructor(i,s,a){this.privCustomized=!1,t.Contracts.throwIfNullOrWhitespace(i,"character"),this.character=i,this.style=s,a===void 0&&(a=new e.AvatarVideoFormat),this.videoFormat=a}get customized(){return this.privCustomized}set customized(i){this.privCustomized=i}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(i){this.privBackgroundColor=i}};return uo.AvatarConfig=r,uo}var GC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarEventArgs=t.AvatarEventTypes=void 0,function(r){r.SwitchedToSpeaking="SwitchedToSpeaking",r.SwitchedToIdle="SwitchedToIdle",r.SessionClosed="SessionClosed"}(t.AvatarEventTypes||(t.AvatarEventTypes={}));class e{constructor(n,i){this.privOffset=n,this.privDescription=i}get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}}t.AvatarEventArgs=e})(GC);var lo={},po={},sg;function XC(){if(sg)return po;sg=1,Object.defineProperty(po,"__esModule",{value:!0}),po.SpeechSynthesisConnectionFactory=void 0;const t=ye(),e=I(),r=Pt(),n=k(),i=me,s=Ct;let a=class{constructor(){this.synthesisUri="/cognitiveservices/websocket/v1"}create(c,u,l){let p=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);const d=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,void 0),h=r.ConnectionFactoryBase.getHostSuffix(d),v=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_EndpointId,void 0),g=v===void 0?"tts":"voice",y=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,"wss://"+d+"."+g+".speech"+h),f={},m={};u.token!==void 0&&u.token!==""&&(m[u.headerName]=u.token),m[i.HeaderNames.ConnectionId]=l,v!==void 0&&v!==""&&(!p||p.search(s.QueryParameterNames.CustomVoiceDeploymentId)===-1)&&(f[s.QueryParameterNames.CustomVoiceDeploymentId]=v),c.avatarEnabled&&(!p||p.search(s.QueryParameterNames.EnableAvatar)===-1)&&(f[s.QueryParameterNames.EnableAvatar]="true"),p||(p=y+this.synthesisUri),c.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,p);const S=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(p,f,m,new n.WebsocketMessageFormatter,t.ProxyInfo.fromParameters(c.parameters),S,l)}};return po.SpeechSynthesisConnectionFactory=a,po}var ag;function O0(){if(ag)return lo;ag=1,Object.defineProperty(lo,"__esModule",{value:!0}),lo.AvatarSynthesizer=void 0;const t=XC(),e=k(),r=D(),n=wr,i=I(),s=N,a=Vd();let o=class extends i.Synthesizer{constructor(u,l){super(u),s.Contracts.throwIfNullOrUndefined(l,"avatarConfig"),this.privConnectionFactory=new t.SpeechSynthesisConnectionFactory,this.privAvatarConfig=l,this.implCommonSynthesizeSetup()}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=n.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(i.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}async startAvatarAsync(u){s.Contracts.throwIfNullOrUndefined(u,"peerConnection"),this.privIceServers=u.getConfiguration().iceServers,s.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");const l=new r.Deferred;u.onicegatheringstatechange=()=>{r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering state: "+u.iceGatheringState,r.EventType.Debug)),u.iceGatheringState==="complete"&&(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering complete.",r.EventType.Info)),l.resolve())},u.onicecandidate=g=>{g.candidate?r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice candidate: "+g.candidate.candidate,r.EventType.Debug)):(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice candidate: complete",r.EventType.Debug)),l.resolve())},setTimeout(()=>{u.iceGatheringState!=="complete"&&(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering timeout.",r.EventType.Warning)),l.resolve())},2e3);const p=await u.createOffer();await u.setLocalDescription(p),await l.promise,r.Events.instance.onEvent(new r.PlatformEvent("peer connection: got local SDP.",r.EventType.Info)),this.privProperties.setProperty(i.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(u.localDescription));const d=await this.speak("",!1);if(d.reason!==i.ResultReason.SynthesizingAudioCompleted)return new i.SynthesisResult(d.resultId,d.reason,d.errorDetails,d.properties);const h=atob(d.properties.getProperty(i.PropertyId.TalkingAvatarService_WebRTC_SDP)),v=new RTCSessionDescription(JSON.parse(h));return await u.setRemoteDescription(v),new i.SynthesisResult(d.resultId,d.reason,void 0,d.properties)}async speakTextAsync(u){const l=await this.speak(u,!1);return new i.SynthesisResult(l.resultId,l.reason,l.errorDetails,l.properties)}async speakSsmlAsync(u){const l=await this.speak(u,!0);return new i.SynthesisResult(l.resultId,l.reason,l.errorDetails,l.properties)}async stopSpeakingAsync(){for(;this.synthesisRequestQueue.length()>0;)(await this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.");return this.privAdapter.stopSpeaking()}async stopAvatarAsync(){return s.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)}async close(){if(!this.privDisposed)return this.dispose(!0)}get iceServers(){return this.privIceServers}createSynthesisAdapter(u,l,p){return new e.AvatarSynthesisAdapter(u,l,p,this,this.privAvatarConfig)}createRestSynthesisAdapter(u,l){}createSynthesizerConfig(u){const l=super.createSynthesizerConfig(u);return l.avatarEnabled=!0,l}async speak(u,l){const p=r.createNoDashGuid(),d=new r.Deferred;return this.synthesisRequestQueue.enqueue(new a.SynthesisRequest(p,u,l,h=>{d.resolve(h),this.privSynthesizing=!1,this.adapterSpeak()},h=>{d.reject(h),this.privSynthesizing=!1})),this.adapterSpeak(),d.promise}};return lo.AvatarSynthesizer=o,lo}var jn={};Object.defineProperty(jn,"__esModule",{value:!0});jn.AvatarVideoFormat=jn.Coordinate=void 0;class k0{constructor(e,r){this.x=e,this.y=r}}jn.Coordinate=k0;class M0{constructor(e="H264",r=2e6,n=1920,i=1080){this.codec=e,this.bitrate=r,this.width=n,this.height=i}setCropRange(e,r){this.cropRange={bottomRight:r,topLeft:e}}}jn.AvatarVideoFormat=M0;var ho={},cg;function b0(){if(cg)return ho;cg=1,Object.defineProperty(ho,"__esModule",{value:!0}),ho.AvatarWebRTCConnectionResult=void 0;const t=I();let e=class extends t.SynthesisResult{constructor(n,i,s,a,o){super(i,s,a,o),this.privSDPAnswer=n}get SDPAnswer(){return this.privSDPAnswer}};return ho.AvatarWebRTCConnectionResult=e,ho}var vo={},ug;function D0(){if(ug)return vo;ug=1,Object.defineProperty(vo,"__esModule",{value:!0}),vo.Diagnostics=void 0;const t=ye(),e=D();let r=class{static SetLoggingLevel(i){this.privListener=new t.ConsoleLoggingListener(i),e.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(i){if(typeof window>"u")this.privListener&&(this.privListener.logPath=i);else throw new Error("File system logging not available in browser.")}};return vo.Diagnostics=r,r.privListener=void 0,vo}var lg;function I(){return lg||(lg=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=fC();Object.defineProperty(t,"AudioConfig",{enumerable:!0,get:function(){return e.AudioConfig}});var r=Er;Object.defineProperty(t,"AudioStreamFormat",{enumerable:!0,get:function(){return r.AudioStreamFormat}}),Object.defineProperty(t,"AudioFormatTag",{enumerable:!0,get:function(){return r.AudioFormatTag}});var n=lC();Object.defineProperty(t,"AudioInputStream",{enumerable:!0,get:function(){return n.AudioInputStream}}),Object.defineProperty(t,"PullAudioInputStream",{enumerable:!0,get:function(){return n.PullAudioInputStream}}),Object.defineProperty(t,"PushAudioInputStream",{enumerable:!0,get:function(){return n.PushAudioInputStream}});var i=Pe;Object.defineProperty(t,"AudioOutputStream",{enumerable:!0,get:function(){return i.AudioOutputStream}}),Object.defineProperty(t,"PullAudioOutputStream",{enumerable:!0,get:function(){return i.PullAudioOutputStream}}),Object.defineProperty(t,"PushAudioOutputStream",{enumerable:!0,get:function(){return i.PushAudioOutputStream}});var s=gC;Object.defineProperty(t,"CancellationReason",{enumerable:!0,get:function(){return s.CancellationReason}});var a=Fc;Object.defineProperty(t,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return a.PullAudioInputStreamCallback}});var o=qc;Object.defineProperty(t,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return o.PushAudioOutputStreamCallback}});var c=Uc;Object.defineProperty(t,"KeywordRecognitionModel",{enumerable:!0,get:function(){return c.KeywordRecognitionModel}});var u=Wc;Object.defineProperty(t,"SessionEventArgs",{enumerable:!0,get:function(){return u.SessionEventArgs}});var l=c1();Object.defineProperty(t,"RecognitionEventArgs",{enumerable:!0,get:function(){return l.RecognitionEventArgs}});var p=mC;Object.defineProperty(t,"OutputFormat",{enumerable:!0,get:function(){return p.OutputFormat}});var d=u1();Object.defineProperty(t,"IntentRecognitionEventArgs",{enumerable:!0,get:function(){return d.IntentRecognitionEventArgs}});var h=Hc;Object.defineProperty(t,"RecognitionResult",{enumerable:!0,get:function(){return h.RecognitionResult}});var v=p1();Object.defineProperty(t,"SpeechRecognitionResult",{enumerable:!0,get:function(){return v.SpeechRecognitionResult}});var g=d1();Object.defineProperty(t,"IntentRecognitionResult",{enumerable:!0,get:function(){return g.IntentRecognitionResult}});var y=zn;Object.defineProperty(t,"LanguageUnderstandingModel",{enumerable:!0,get:function(){return y.LanguageUnderstandingModel}});var f=h1();Object.defineProperty(t,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return f.SpeechRecognitionEventArgs}}),Object.defineProperty(t,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return f.ConversationTranscriptionEventArgs}}),Object.defineProperty(t,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return f.MeetingTranscriptionEventArgs}});var m=v1();Object.defineProperty(t,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return m.SpeechRecognitionCanceledEventArgs}});var S=f1();Object.defineProperty(t,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return S.TranslationRecognitionEventArgs}});var C=g1();Object.defineProperty(t,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return C.TranslationSynthesisEventArgs}});var P=CC();Object.defineProperty(t,"TranslationRecognitionResult",{enumerable:!0,get:function(){return P.TranslationRecognitionResult}});var R=Vc;Object.defineProperty(t,"TranslationSynthesisResult",{enumerable:!0,get:function(){return R.TranslationSynthesisResult}});var A=PC;Object.defineProperty(t,"ResultReason",{enumerable:!0,get:function(){return A.ResultReason}});var w=y1();Object.defineProperty(t,"SpeechConfig",{enumerable:!0,get:function(){return w.SpeechConfig}}),Object.defineProperty(t,"SpeechConfigImpl",{enumerable:!0,get:function(){return w.SpeechConfigImpl}});var M=S1();Object.defineProperty(t,"SpeechTranslationConfig",{enumerable:!0,get:function(){return M.SpeechTranslationConfig}}),Object.defineProperty(t,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return M.SpeechTranslationConfigImpl}});var b=EC();Object.defineProperty(t,"PropertyCollection",{enumerable:!0,get:function(){return b.PropertyCollection}});var J=Kc;Object.defineProperty(t,"PropertyId",{enumerable:!0,get:function(){return J.PropertyId}});var Rt=C1();Object.defineProperty(t,"Recognizer",{enumerable:!0,get:function(){return Rt.Recognizer}});var pe=P1();Object.defineProperty(t,"SpeechRecognizer",{enumerable:!0,get:function(){return pe.SpeechRecognizer}});var $n=R1();Object.defineProperty(t,"IntentRecognizer",{enumerable:!0,get:function(){return $n.IntentRecognizer}});var _u=IC;Object.defineProperty(t,"VoiceProfileType",{enumerable:!0,get:function(){return _u.VoiceProfileType}});var Jn=E1();Object.defineProperty(t,"TranslationRecognizer",{enumerable:!0,get:function(){return Jn.TranslationRecognizer}});var Qn=w1();Object.defineProperty(t,"Translations",{enumerable:!0,get:function(){return Qn.Translations}});var _=kC;Object.defineProperty(t,"NoMatchReason",{enumerable:!0,get:function(){return _.NoMatchReason}});var L=A1();Object.defineProperty(t,"NoMatchDetails",{enumerable:!0,get:function(){return L.NoMatchDetails}});var B=$c;Object.defineProperty(t,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return B.TranslationRecognitionCanceledEventArgs}});var Y=T1();Object.defineProperty(t,"IntentRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return Y.IntentRecognitionCanceledEventArgs}});var ae=Us;Object.defineProperty(t,"CancellationDetailsBase",{enumerable:!0,get:function(){return ae.CancellationDetailsBase}});var nn=O1();Object.defineProperty(t,"CancellationDetails",{enumerable:!0,get:function(){return nn.CancellationDetails}});var Mt=DC;Object.defineProperty(t,"CancellationErrorCode",{enumerable:!0,get:function(){return Mt.CancellationErrorCode}});var Gn=k1();Object.defineProperty(t,"ConnectionEventArgs",{enumerable:!0,get:function(){return Gn.ConnectionEventArgs}});var bt=M1();Object.defineProperty(t,"ServiceEventArgs",{enumerable:!0,get:function(){return bt.ServiceEventArgs}});var on=_C();Object.defineProperty(t,"Connection",{enumerable:!0,get:function(){return on.Connection}});var dP=Jc;Object.defineProperty(t,"PhraseListGrammar",{enumerable:!0,get:function(){return dP.PhraseListGrammar}});var hP=Fd();Object.defineProperty(t,"DialogServiceConfig",{enumerable:!0,get:function(){return hP.DialogServiceConfig}});var vP=b1();Object.defineProperty(t,"BotFrameworkConfig",{enumerable:!0,get:function(){return vP.BotFrameworkConfig}});var fP=D1();Object.defineProperty(t,"CustomCommandsConfig",{enumerable:!0,get:function(){return fP.CustomCommandsConfig}});var gP=z1();Object.defineProperty(t,"DialogServiceConnector",{enumerable:!0,get:function(){return gP.DialogServiceConnector}});var mP=Qc;Object.defineProperty(t,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return mP.ActivityReceivedEventArgs}});var yP=Gc;Object.defineProperty(t,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return yP.TurnStatusReceivedEventArgs}});var SP=NC;Object.defineProperty(t,"ServicePropertyChannel",{enumerable:!0,get:function(){return SP.ServicePropertyChannel}});var CP=zC;Object.defineProperty(t,"ProfanityOption",{enumerable:!0,get:function(){return CP.ProfanityOption}});var PP=B1();Object.defineProperty(t,"BaseAudioPlayer",{enumerable:!0,get:function(){return PP.BaseAudioPlayer}});var RP=Zc;Object.defineProperty(t,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return RP.ConnectionMessageEventArgs}});var EP=TC();Object.defineProperty(t,"ConnectionMessage",{enumerable:!0,get:function(){return EP.ConnectionMessage}});var wP=Yc;Object.defineProperty(t,"VoiceProfile",{enumerable:!0,get:function(){return wP.VoiceProfile}});var oh=U1();Object.defineProperty(t,"VoiceProfileEnrollmentResult",{enumerable:!0,get:function(){return oh.VoiceProfileEnrollmentResult}}),Object.defineProperty(t,"VoiceProfileEnrollmentCancellationDetails",{enumerable:!0,get:function(){return oh.VoiceProfileEnrollmentCancellationDetails}});var sh=W1();Object.defineProperty(t,"VoiceProfileResult",{enumerable:!0,get:function(){return sh.VoiceProfileResult}}),Object.defineProperty(t,"VoiceProfileCancellationDetails",{enumerable:!0,get:function(){return sh.VoiceProfileCancellationDetails}});var AP=H1();Object.defineProperty(t,"VoiceProfilePhraseResult",{enumerable:!0,get:function(){return AP.VoiceProfilePhraseResult}});var IP=V1();Object.defineProperty(t,"VoiceProfileClient",{enumerable:!0,get:function(){return IP.VoiceProfileClient}});var TP=K1();Object.defineProperty(t,"SpeakerRecognizer",{enumerable:!0,get:function(){return TP.SpeakerRecognizer}});var _P=$1();Object.defineProperty(t,"SpeakerIdentificationModel",{enumerable:!0,get:function(){return _P.SpeakerIdentificationModel}});var OP=J1();Object.defineProperty(t,"SpeakerVerificationModel",{enumerable:!0,get:function(){return OP.SpeakerVerificationModel}});var kP=Q1();Object.defineProperty(t,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return kP.AutoDetectSourceLanguageConfig}});var MP=eu;Object.defineProperty(t,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return MP.AutoDetectSourceLanguageResult}});var bP=tu;Object.defineProperty(t,"SourceLanguageConfig",{enumerable:!0,get:function(){return bP.SourceLanguageConfig}});var Ou=X1();Object.defineProperty(t,"SpeakerRecognitionResult",{enumerable:!0,get:function(){return Ou.SpeakerRecognitionResult}}),Object.defineProperty(t,"SpeakerRecognitionResultType",{enumerable:!0,get:function(){return Ou.SpeakerRecognitionResultType}}),Object.defineProperty(t,"SpeakerRecognitionCancellationDetails",{enumerable:!0,get:function(){return Ou.SpeakerRecognitionCancellationDetails}});var Ue=Hd();Object.defineProperty(t,"Conversation",{enumerable:!0,get:function(){return Ue.Conversation}}),Object.defineProperty(t,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return Ue.ConversationExpirationEventArgs}}),Object.defineProperty(t,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return Ue.ConversationParticipantsChangedEventArgs}}),Object.defineProperty(t,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return Ue.ConversationTranslationCanceledEventArgs}}),Object.defineProperty(t,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return Ue.ConversationTranslationEventArgs}}),Object.defineProperty(t,"ConversationTranslationResult",{enumerable:!0,get:function(){return Ue.ConversationTranslationResult}}),Object.defineProperty(t,"ConversationTranslator",{enumerable:!0,get:function(){return Ue.ConversationTranslator}}),Object.defineProperty(t,"ConversationTranscriber",{enumerable:!0,get:function(){return Ue.ConversationTranscriber}}),Object.defineProperty(t,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return Ue.ConversationTranscriptionResult}}),Object.defineProperty(t,"Meeting",{enumerable:!0,get:function(){return Ue.Meeting}}),Object.defineProperty(t,"MeetingTranscriber",{enumerable:!0,get:function(){return Ue.MeetingTranscriber}}),Object.defineProperty(t,"Participant",{enumerable:!0,get:function(){return Ue.Participant}}),Object.defineProperty(t,"ParticipantChangedReason",{enumerable:!0,get:function(){return Ue.ParticipantChangedReason}}),Object.defineProperty(t,"User",{enumerable:!0,get:function(){return Ue.User}});var DP=Vd();Object.defineProperty(t,"Synthesizer",{enumerable:!0,get:function(){return DP.Synthesizer}});var NP=jd;Object.defineProperty(t,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return NP.SpeechSynthesisOutputFormat}});var zP=h0();Object.defineProperty(t,"SpeechSynthesizer",{enumerable:!0,get:function(){return zP.SpeechSynthesizer}});var jP=nu;Object.defineProperty(t,"SynthesisResult",{enumerable:!0,get:function(){return jP.SynthesisResult}});var LP=f0();Object.defineProperty(t,"SpeechSynthesisResult",{enumerable:!0,get:function(){return LP.SpeechSynthesisResult}});var xP=iu;Object.defineProperty(t,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return xP.SpeechSynthesisEventArgs}});var BP=ou;Object.defineProperty(t,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return BP.SpeechSynthesisWordBoundaryEventArgs}});var FP=su;Object.defineProperty(t,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return FP.SpeechSynthesisBookmarkEventArgs}});var qP=au;Object.defineProperty(t,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return qP.SpeechSynthesisVisemeEventArgs}});var UP=HC;Object.defineProperty(t,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return UP.SpeechSynthesisBoundaryType}});var WP=C0();Object.defineProperty(t,"SynthesisVoicesResult",{enumerable:!0,get:function(){return WP.SynthesisVoicesResult}});var HP=VC;Object.defineProperty(t,"VoiceInfo",{enumerable:!0,get:function(){return HP.VoiceInfo}});var VP=cu;Object.defineProperty(t,"SpeakerAudioDestination",{enumerable:!0,get:function(){return VP.SpeakerAudioDestination}});var KP=w0();Object.defineProperty(t,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return KP.ConversationTranscriptionCanceledEventArgs}});var $P=A0();Object.defineProperty(t,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return $P.MeetingTranscriptionCanceledEventArgs}});var JP=KC;Object.defineProperty(t,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return JP.PronunciationAssessmentGradingSystem}});var QP=$C;Object.defineProperty(t,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return QP.PronunciationAssessmentGranularity}});var GP=I0();Object.defineProperty(t,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return GP.PronunciationAssessmentConfig}});var XP=T0();Object.defineProperty(t,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return XP.PronunciationAssessmentResult}});var ZP=Ud;Object.defineProperty(t,"LanguageIdMode",{enumerable:!0,get:function(){return ZP.LanguageIdMode}});var YP=_0();Object.defineProperty(t,"AvatarConfig",{enumerable:!0,get:function(){return YP.AvatarConfig}});var eR=GC;Object.defineProperty(t,"AvatarEventArgs",{enumerable:!0,get:function(){return eR.AvatarEventArgs}});var tR=O0();Object.defineProperty(t,"AvatarSynthesizer",{enumerable:!0,get:function(){return tR.AvatarSynthesizer}});var ah=jn;Object.defineProperty(t,"AvatarVideoFormat",{enumerable:!0,get:function(){return ah.AvatarVideoFormat}}),Object.defineProperty(t,"Coordinate",{enumerable:!0,get:function(){return ah.Coordinate}});var rR=b0();Object.defineProperty(t,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return rR.AvatarWebRTCConnectionResult}});var nR=D0();Object.defineProperty(t,"Diagnostics",{enumerable:!0,get:function(){return nR.Diagnostics}});var iR=Nd;Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return iR.LogLevel}})}(ml)),ml}var pg;function N0(){if(pg)return di;pg=1,Object.defineProperty(di,"__esModule",{value:!0}),di.ProxyInfo=void 0;const t=I();let e=class ZC{constructor(n,i,s,a){this.privProxyHostName=n,this.privProxyPort=i,this.privProxyUserName=s,this.privProxyPassword=a}static fromParameters(n){return new ZC(n.getProperty(t.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(n.getProperty(t.PropertyId.SpeechServiceConnection_ProxyPort),10),n.getProperty(t.PropertyId.SpeechServiceConnection_ProxyUserName),n.getProperty(t.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(n){return this.fromParameters(n.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}};return di.ProxyInfo=e,di}var YC={};const z0=new Set(["json","buffer","string"]);var j0=t=>(...e)=>{const r=new Set;let n,i,s,a="";return e.forEach(o=>{if(typeof o=="string")if(o.toUpperCase()===o)if(n){const c=`Can't set method to ${o}, already set to ${n}.`;throw new Error(c)}else n=o;else if(o.startsWith("http:")||o.startsWith("https:"))a=o;else if(z0.has(o))i=o;else throw new Error(`Unknown encoding, ${o}`);else if(typeof o=="number")r.add(o);else if(typeof o=="object")if(Array.isArray(o)||o instanceof Set)o.forEach(c=>r.add(c));else{if(s)throw new Error("Cannot set headers twice.");s=o}else throw new Error(`Unknown type: ${typeof o}`)}),n||(n="GET"),r.size===0&&r.add(200),t(r,n,i,s,a)};const L0=j0;class Kd extends Error{constructor(e,...r){super(...r),Error.captureStackTrace&&Error.captureStackTrace(this,Kd),this.name="StatusError",this.message=e.statusMessage,this.statusCode=e.status,this.res=e,this.json=e.json.bind(e),this.text=e.text.bind(e),this.arrayBuffer=e.arrayBuffer.bind(e);let n;Object.defineProperty(this,"responseBody",{get:()=>(n||(n=this.arrayBuffer()),n)}),this.headers={};for(const[s,a]of e.headers.entries())this.headers[s.toLowerCase()]=a}}const x0=(t,e,r,n,i)=>async(s,a,o={})=>{s=i+(s||"");let c=new URL(s);if(n||(n={}),c.username&&(n.Authorization="Basic "+btoa(c.username+":"+c.password),c=new URL(c.protocol+"//"+c.host+c.pathname+c.search)),c.protocol!=="https:"&&c.protocol!=="http:")throw new Error(`Unknown protocol, ${c.protocol}`);if(a&&!(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||typeof a=="string"))if(typeof a=="object")a=JSON.stringify(a),n["Content-Type"]="application/json";else throw new Error("Unknown body type.");o=new Headers({...n||{},...o});const u=await fetch(c,{method:e,headers:o,body:a});if(u.statusCode=u.status,!t.has(u.status))throw new Kd(u);return r==="json"?u.json():r==="buffer"?u.arrayBuffer():r==="string"?u.text():u};var B0=L0(x0);(function(t){var e=q&&q.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(t,"__esModule",{value:!0}),t.RestMessageAdapter=t.RestRequestType=void 0;const r=e(B0),n=D();var i;(function(a){a.Get="GET",a.Post="POST",a.Delete="DELETE",a.File="file"})(i=t.RestRequestType||(t.RestRequestType={}));class s{constructor(o){if(!o)throw new n.ArgumentNullError("configParams");this.privHeaders=o.headers,this.privIgnoreCache=o.ignoreCache}static extractHeaderValue(o,c){let u="";try{const l=c.trim().split(/[\r\n]+/),p={};l.forEach(d=>{const h=d.split(": "),v=h.shift().toLowerCase(),g=h.join(": ");p[v]=g}),u=p[o.toLowerCase()]}catch{}return u}set options(o){this.privHeaders=o.headers,this.privIgnoreCache=o.ignoreCache}setHeaders(o,c){this.privHeaders[o]=c}request(o,c,u={},l=null){const p=new n.Deferred,d=o===i.File?"POST":o,h=(g,y={})=>{const f=g;return{data:JSON.stringify(y),headers:JSON.stringify(g.headers),json:y,ok:g.statusCode>=200&&g.statusCode<300,status:g.statusCode,statusText:y.error?y.error.message:f.statusText?f.statusText:f.statusMessage}},v=g=>{const y=r.default(c,d,this.privHeaders,200,201,202,204,400,401,402,403,404),f=this.queryParams(u)===""?"":`?${this.queryParams(u)}`;y(f,g).then(async m=>{if(o===i.Delete||m.statusCode===204)p.resolve(h(m));else try{const S=await m.json();p.resolve(h(m,S))}catch{p.resolve(h(m))}}).catch(m=>{p.reject(m)})};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),o===i.Post&&l&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),v(l),p.promise}queryParams(o={}){return Object.keys(o).map(c=>encodeURIComponent(c)+"="+encodeURIComponent(o[c])).join("&")}}t.RestMessageAdapter=s})(YC);var Hs={};Object.defineProperty(Hs,"__esModule",{value:!0});Hs.RestConfigBase=void 0;class gr{static get requestOptions(){return gr.privDefaultRequestOptions}static get configParams(){return gr.privDefaultParams}static get restErrors(){return gr.privRestErrors}}Hs.RestConfigBase=gr;gr.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4};gr.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."};gr.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"};var dg;function ye(){return dg||(dg=1,function(t){var e=q&&q.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s),Object.defineProperty(n,a,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),r=q&&q.__exportStar||function(n,i){for(var s in n)s!=="default"&&!i.hasOwnProperty(s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(jc,t),r(cC,t),r(jT(),t),r(LT(),t),r(Lc,t),r(xc,t),r(Bs,t),r(Bc,t),r(N0(),t),r(YC,t),r(Hs,t)}(vl)),vl}var hg;function F0(){if(hg)return ui;hg=1,Object.defineProperty(ui,"__esModule",{value:!0}),ui.IntentConnectionFactory=void 0;const t=ye(),e=I(),r=Pt(),n=k(),i=me;let s=class extends r.ConnectionFactoryBase{create(o,c,u){let l=o.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint);if(!l){const v=o.parameters.getProperty(e.PropertyId.SpeechServiceConnection_IntentRegion),g=r.ConnectionFactoryBase.getHostSuffix(v);l=o.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,"wss://"+v+".sr.speech"+g)+"/speech/recognition/interactive/cognitiveservices/v1"}const p={format:"simple",language:o.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(o,p,l);const d={};c.token!==void 0&&c.token!==""&&(d[c.headerName]=c.token),d[i.HeaderNames.ConnectionId]=u,o.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,l);const h=o.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(l,p,d,new n.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(o),h,u)}getSpeechRegionFromIntentRegion(o){switch(o){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return o}}};return ui.IntentConnectionFactory=s,ui}var Lr={},vg;function q0(){if(vg)return Lr;vg=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.VoiceProfileConnectionFactory=Lr.SpeakerRecognitionConnectionFactory=void 0;const t=ye(),e=I(),r=Pt(),n=k(),i=me;class s extends r.ConnectionFactoryBase{create(u,l,p,d){let h=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint);if(!h){const f=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region),m=r.ConnectionFactoryBase.getHostSuffix(f),S=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,`wss://${f}.spr-frontend.speech${m}`),C=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_SpeakerIdMode,"TextIndependentIdentification");h=`${S}/speaker/ws/${this.scenarioToPath(C)}/${p}`}const v={format:"simple",language:u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(u,v,h);const g={};l.token!==void 0&&l.token!==""&&(g[l.headerName]=l.token),g[i.HeaderNames.ConnectionId]=d,g[i.HeaderNames.SpIDAuthKey]=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Key),u.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,h);const y=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(h,v,g,new n.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(u),y,d)}scenarioToPath(u){switch(u){case"TextIndependentVerification":case"2":return"verification/text-independent";case"TextDependentVerification":case"1":return"verification/text-dependent";default:return"identification/text-independent"}}}let a=class extends s{create(u,l,p){return super.create(u,l,"recognition",p)}};Lr.SpeakerRecognitionConnectionFactory=a;class o extends s{create(u,l,p){return super.create(u,l,"profile",p)}}return Lr.VoiceProfileConnectionFactory=o,Lr}var uu={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionEndedEvent=t.RecognitionCompletionStatus=t.RecognitionStartedEvent=t.ConnectingToServiceEvent=t.ListeningStartedEvent=t.RecognitionTriggeredEvent=t.SpeechRecognitionEvent=void 0;const e=D();class r extends e.PlatformEvent{constructor(l,p,d,h=e.EventType.Info){super(l,h),this.privRequestId=p,this.privSessionId=d}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}t.SpeechRecognitionEvent=r;class n extends r{constructor(l,p,d,h){super("RecognitionTriggeredEvent",l,p),this.privAudioSourceId=d,this.privAudioNodeId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}t.RecognitionTriggeredEvent=n;class i extends r{constructor(l,p,d,h){super("ListeningStartedEvent",l,p),this.privAudioSourceId=d,this.privAudioNodeId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}t.ListeningStartedEvent=i;class s extends r{constructor(l,p,d){super("ConnectingToServiceEvent",l,d),this.privAuthFetchEventid=p}get authFetchEventid(){return this.privAuthFetchEventid}}t.ConnectingToServiceEvent=s;class a extends r{constructor(l,p,d,h,v){super("RecognitionStartedEvent",l,v),this.privAudioSourceId=p,this.privAudioNodeId=d,this.privAuthFetchEventId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}}t.RecognitionStartedEvent=a;var o;(function(u){u[u.Success=0]="Success",u[u.AudioSourceError=1]="AudioSourceError",u[u.AudioSourceTimeout=2]="AudioSourceTimeout",u[u.AuthTokenFetchError=3]="AuthTokenFetchError",u[u.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",u[u.UnAuthorized=5]="UnAuthorized",u[u.ConnectTimeout=6]="ConnectTimeout",u[u.ConnectError=7]="ConnectError",u[u.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",u[u.UnknownError=9]="UnknownError"})(o=t.RecognitionCompletionStatus||(t.RecognitionCompletionStatus={}));class c extends r{constructor(l,p,d,h,v,g,y,f){super("RecognitionEndedEvent",l,v,y===o.Success?e.EventType.Info:e.EventType.Error),this.privAudioSourceId=p,this.privAudioNodeId=d,this.privAuthFetchEventId=h,this.privStatus=y,this.privError=f,this.privServiceTag=g}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}}t.RecognitionEndedEvent=c})(uu);var fo={},Gt={};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.SpeechConnectionMessage=void 0;const Rl=D(),zt=me;class $d extends Rl.ConnectionMessage{constructor(e,r,n,i,s,a,o,c){if(!r)throw new Rl.ArgumentNullError("path");if(!n)throw new Rl.ArgumentNullError("requestId");const u={};if(u[zt.HeaderNames.Path]=r,u[zt.HeaderNames.RequestId]=n,u[zt.HeaderNames.RequestTimestamp]=new Date().toISOString(),i&&(u[zt.HeaderNames.ContentType]=i),a&&(u[zt.HeaderNames.RequestStreamId]=a),o)for(const l in o)l&&(u[l]=o[l]);c?super(e,s,u,c):super(e,s,u),this.privPath=r,this.privRequestId=n,this.privContentType=i,this.privStreamId=a,this.privAdditionalHeaders=o}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(e){let r=null,n=null,i=null,s=null;const a={};if(e.headers)for(const o in e.headers)o&&(o.toLowerCase()===zt.HeaderNames.Path.toLowerCase()?r=e.headers[o]:o.toLowerCase()===zt.HeaderNames.RequestId.toLowerCase()?n=e.headers[o]:o.toLowerCase()===zt.HeaderNames.ContentType.toLowerCase()?i=e.headers[o]:o.toLowerCase()===zt.HeaderNames.RequestStreamId.toLowerCase()?s=e.headers[o]:a[o]=e.headers[o]);return new $d(e.messageType,r,n,i,e.body,s,a,e.id)}}Gt.SpeechConnectionMessage=$d;var fg;function U0(){if(fg)return fo;fg=1,Object.defineProperty(fo,"__esModule",{value:!0}),fo.ServiceRecognizerBase=void 0;const t=ye(),e=D(),r=I(),n=k(),i=Gt;let s=class Go{constructor(o,c,u,l,p){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.recognizeSpeaker=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!o)throw new e.ArgumentNullError("authentication");if(!c)throw new e.ArgumentNullError("connectionFactory");if(!u)throw new e.ArgumentNullError("audioSource");if(!l)throw new e.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=l.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=o,this.privConnectionFactory=c,this.privAudioSource=u,this.privRecognizerConfig=l,this.privIsDisposed=!1,this.privRecognizer=p,this.privRequestSession=new n.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new e.EventSource,this.privServiceEvents=new e.EventSource,this.privDynamicGrammar=new n.DynamicGrammarBuilder,this.privSpeechContext=new n.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new n.AgentConfig,this.privRecognizerConfig.parameters.getProperty(r.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?this.privSetTimeout=e.Timeout.setTimeout:typeof window<"u"&&(this.privSetTimeout=window.setTimeout.bind(window)),this.connectionEvents.attach(h=>{if(h.name==="ConnectionClosedEvent"){const v=h;(v.statusCode===1003||v.statusCode===1007||v.statusCode===1002||v.statusCode===4e3||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(r.CancellationReason.Error,v.statusCode===1007?r.CancellationErrorCode.BadRequestParameters:r.CancellationErrorCode.ConnectionFailure,`${v.reason} websocket error code: ${v.statusCode}`)}}),this.privEnableSpeakerId&&(this.privDiarizationSessionId=e.createNoDashGuid()),this.setLanguageIdJson(),this.setOutputDetailLevelJson()}setTranslationJson(){const o=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(o!==void 0){const c=o.split(","),u=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,void 0),l=u!==void 0?"Synthesize":"None";if(this.privSpeechContext.setSection("translation",{onSuccess:{action:l},output:{interimResults:{mode:"Always"}},targetLanguages:c}),u!==void 0){const p={};for(const d of c)p[d]=u;this.privSpeechContext.setSection("synthesis",{defaultVoices:p})}}}setSpeechSegmentationTimeoutJson(){const o=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0);if(o!==void 0){const c=this.recognitionMode===n.RecognitionMode.Conversation?"CONVERSATION":this.recognitionMode===n.RecognitionMode.Dictation?"DICTATION":"INTERACTIVE",u=parseInt(o,10),l=this.privSpeechContext.getSection("phraseDetection");l.mode=c,l[c]={segmentation:{mode:"Custom",segmentationSilenceTimeoutMs:u}},this.privSpeechContext.setSection("phraseDetection",l)}}setLanguageIdJson(){const o=this.privSpeechContext.getSection("phraseDetection");if(this.privRecognizerConfig.autoDetectSourceLanguages!==void 0){const u=this.privRecognizerConfig.autoDetectSourceLanguages.split(",");let l;this.privRecognizerConfig.languageIdMode==="Continuous"?l="DetectContinuous":l="DetectAtAudioStart",this.privSpeechContext.setSection("languageId",{Priority:"PrioritizeLatency",languages:u,mode:l,onSuccess:{action:"Recognize"},onUnknown:{action:"None"}}),this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"Auto"},phraseResults:{resultType:"Always"}});const p=this.privRecognizerConfig.sourceLanguageModels;p!==void 0&&(o.customModels=p,o.onInterim={action:"None"},o.onSuccess={action:"None"})}this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0&&(o.onInterim={action:"Translate"},o.onSuccess={action:"Translate"},this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"None"},phraseResults:{resultType:"None"}})),this.privSpeechContext.setSection("phraseDetection",o)}setOutputDetailLevelJson(){this.privEnableSpeakerId&&(this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true"?this.privSpeechContext.setWordLevelTimings():this.privRecognizerConfig.parameters.getProperty(n.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase()===r.OutputFormat[r.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat())}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(o){this.privRecognizerConfig.parameters.setProperty(r.PropertyId.ConversationTranslator_Token,o)}set voiceProfileType(o){this.privRecognizerConfig.parameters.setProperty(r.PropertyId.SpeechServiceConnection_SpeakerIdMode,o)}set authentication(o){this.privAuthentication=o}isDisposed(){return this.privIsDisposed}async dispose(o){if(this.privIsDisposed=!0,this.privConnectionConfigurationPromise!==void 0)try{await(await this.privConnectionConfigurationPromise).dispose(o)}catch{return}}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}async recognize(o,c,u){if(this.recognizeOverride!==void 0){await this.recognizeOverride(o,c,u);return}this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=o,this.setSpeechSegmentationTimeoutJson(),this.setTranslationJson(),this.privSuccessCallback=c,this.privErrorCallback=u,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const l=this.connectImpl();let p;try{const v=await this.audioSource.attach(this.privRequestSession.audioNodeId),g=await this.audioSource.format,y=await this.audioSource.deviceInfo;this.privIsLiveAudio=y.type&&y.type===n.type.Microphones,p=new t.ReplayableAudioNode(v,g.avgBytesPerSec),await this.privRequestSession.onAudioSourceAttachCompleted(p,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:y}}catch(v){throw await this.privRequestSession.onStopRecognizing(),v}try{await l}catch(v){await this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,v);return}const d=new r.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,d),this.receiveMessage(),this.sendAudio(p).catch(async v=>{await this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,v)})}async stopRecognizing(){if(this.privRequestSession.isRecognizing)try{await this.audioSource.turnOff(),await this.sendFinalAudio(),await this.privRequestSession.onStopRecognizing(),await this.privRequestSession.turnCompletionPromise}finally{await this.privRequestSession.dispose()}}async connect(){return await this.connectImpl(),Promise.resolve()}connectAsync(o,c){this.connectImpl().then(()=>{try{o&&o()}catch(u){c&&c(u)}},u=>{try{c&&c(u)}catch{}})}async disconnect(){if(await this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.NoError,"Disconnecting"),this.disconnectOverride!==void 0&&await this.disconnectOverride(),this.privConnectionPromise!==void 0)try{await(await this.privConnectionPromise).dispose()}catch{}this.privConnectionPromise=void 0}sendMessage(o){}async sendNetworkMessage(o,c){const u=typeof c=="string"?e.MessageType.Text:e.MessageType.Binary,l=typeof c=="string"?"application/json":"";return(await this.fetchConnection()).send(new i.SpeechConnectionMessage(u,o,this.privRequestSession.requestId,l,c))}set activityTemplate(o){this.privActivityTemplate=o}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(o){this.privExpectContentAssessmentResponse=o}async sendTelemetryData(){const o=this.privRequestSession.getTelemetry();if(Go.telemetryDataEnabled!==!0||this.privIsDisposed||o===null)return;if(Go.telemetryData)try{Go.telemetryData(o)}catch{}await(await this.fetchConnection()).send(new i.SpeechConnectionMessage(e.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",o))}async cancelRecognitionLocal(o,c,u){this.privRequestSession.isRecognizing&&(await this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,o,c,u))}async receiveMessage(){try{if(this.privIsDisposed)return;let o=await this.fetchConnection();const c=await o.read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(!c)return this.receiveMessage();this.privServiceHasSentMessage=!0;const u=i.SpeechConnectionMessage.fromConnectionMessage(c);if(u.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(u.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const l=n.SpeechDetected.fromJSON(u.textBody),p=new r.RecognitionEventArgs(l.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,p);break;case"speech.enddetected":let d;u.textBody.length>0?d=u.textBody:d="{ Offset: 0 }";const h=n.SpeechDetected.fromJSON(d),v=new r.RecognitionEventArgs(h.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,v);break;case"turn.end":await this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,await this.cancelRecognitionLocal(r.CancellationReason.EndOfStream,r.CancellationErrorCode.NoError,void 0));const g=new r.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing){this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,g);return}else o=await this.fetchConnection(),await this.sendPrePayloadJSON(o);break;default:await this.processTypeSpecificMessages(u)||this.privServiceEvents&&this.serviceEvents.onEvent(new e.ServiceEvent(u.path.toLowerCase(),u.textBody))}return this.receiveMessage()}catch{return null}}updateSpeakerDiarizationAudioOffset(){const c=this.privRequestSession.recognitionBytesSent/this.privAverageBytesPerMs;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(c)}sendSpeechContext(o,c){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();const u=this.speechContext.toJSON();if(c&&this.privRequestSession.onSpeechContext(),u)return o.send(new i.SpeechConnectionMessage(e.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",u))}noOp(){}async sendPrePayloadJSON(o,c=!0){if(this.sendPrePayloadJSONOverride!==void 0)return this.sendPrePayloadJSONOverride(o);await this.sendSpeechContext(o,c),await this.sendWaveHeader(o)}async sendWaveHeader(o){const c=await this.audioSource.format;return o.send(new i.SpeechConnectionMessage(e.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",c.header))}connectImpl(){return this.privConnectionPromise!==void 0?this.privConnectionPromise.then(o=>o.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl())):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(()=>{}),this.postConnectImplOverride!==void 0?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(o,c,u){if(c.onSpeechContext(),Go.telemetryDataEnabled!==!0){const p={context:{system:JSON.parse(u).context.system}};u=JSON.stringify(p)}if(this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()==="true"){const l=JSON.parse(u);l.context.DisableReferenceChannel="True",l.context.MicSpec="1_0_0",u=JSON.stringify(l)}if(u)return o.send(new i.SpeechConnectionMessage(e.MessageType.Text,"speech.config",c.requestId,"application/json",u))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(o=>o.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async sendAudio(o){const c=await this.audioSource.format;this.privAverageBytesPerMs=c.avgBytesPerSec/1e3;let u=Date.now();const l=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),p=c.avgBytesPerSec/1e3*parseInt(l,10),d=this.privRequestSession.recogNumber,h=async()=>{if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===d){const v=await this.fetchConnection(),g=await o.read();if(this.privRequestSession.isSpeechEnded)return;let y,f;if(!g||g.isEnd?(y=null,f=0):(y=g.buffer,this.privRequestSession.onAudioSent(y.byteLength),p>=this.privRequestSession.bytesSent?f=0:f=Math.max(0,u-Date.now())),f!==0&&await this.delay(f),y!==null&&(u=Date.now()+y.byteLength*1e3/(c.avgBytesPerSec*2)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===d)if(v.send(new i.SpeechConnectionMessage(e.MessageType.Binary,"audio",this.privRequestSession.requestId,null,y)).catch(()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(()=>{})}),g!=null&&g.isEnd)this.privIsLiveAudio||this.privRequestSession.onSpeechEnded();else return h()}};return h()}async retryableConnect(){let o=!1;this.privAuthFetchEventId=e.createNoDashGuid();const c=this.privRequestSession.sessionId;this.privConnectionId=c!==void 0?c:e.createNoDashGuid(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let u=0,l="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){const d=await(o?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId));await this.privRequestSession.onAuthCompleted(!1);const h=this.privConnectionFactory.create(this.privRecognizerConfig,d,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(h.events),h.events.attach(g=>{this.connectionEvents.onEvent(g)});const v=await h.open();if(v.statusCode===200)return await this.privRequestSession.onConnectionEstablishCompleted(v.statusCode),Promise.resolve(h);v.statusCode===1006&&(o=!0),u=v.statusCode,l=v.reason,this.privRequestSession.onRetryConnection()}return await this.privRequestSession.onConnectionEstablishCompleted(u,l),Promise.reject(`Unable to contact server. StatusCode: ${u}, ${this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${l}`)}delay(o){return new Promise(c=>this.privSetTimeout(c,o))}writeBufferToConsole(o){let c="Buffer Size: ";if(o===null)c+="null";else{const u=new Uint8Array(o);c+=`${o.byteLength}\r
`;for(let l=0;l<o.byteLength;l++)c+=u[l].toString(16).padStart(2,"0")+" ",(l+1)%16===0&&(console.info(c),c="")}console.info(c)}async sendFinalAudio(){await(await this.fetchConnection()).send(new i.SpeechConnectionMessage(e.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))}async configureConnection(){const o=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(o):(await this.sendSpeechServiceConfig(o,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendPrePayloadJSON(o,!1),o)}};return fo.ServiceRecognizerBase=s,s.telemetryDataEnabled=!0,fo}var go={},gg;function W0(){if(gg)return go;gg=1,Object.defineProperty(go,"__esModule",{value:!0}),go.ConversationServiceRecognizer=void 0;const t=I(),e=k();let r=class extends e.ServiceRecognizerBase{constructor(i,s,a,o,c){super(i,s,a,o,c),this.handleSpeechPhraseMessage=async u=>this.handleSpeechPhrase(u),this.handleSpeechHypothesisMessage=u=>this.handleSpeechHypothesis(u)}processTypeSpecificMessages(i){}handleRecognizedCallback(i,s,a){}handleRecognizingCallback(i,s,a){}async processSpeechMessages(i){let s=!1;switch(i.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(i.textBody),s=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&await this.handleSpeechPhraseMessage(i.textBody),s=!0;break}return s}cancelRecognition(i,s,a,o,c){}async handleSpeechPhrase(i){const s=e.SimpleSpeechPhrase.fromJSON(i),a=e.EnumTranslation.implTranslateRecognitionResult(s.RecognitionStatus);let o;const c=new t.PropertyCollection;c.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,i);const u=s.Offset+this.privRequestSession.currentTurnAudioOffset;let l=u;if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+s.Offset+s.Duration),t.ResultReason.Canceled===a){const p=e.EnumTranslation.implTranslateCancelResult(s.RecognitionStatus),d=e.EnumTranslation.implTranslateCancelErrorCode(s.RecognitionStatus);await this.cancelRecognitionLocal(p,d,e.EnumTranslation.implTranslateErrorDetails(d))}else if(!(this.privRequestSession.isSpeechEnded&&a===t.ResultReason.NoMatch&&s.RecognitionStatus!==e.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(e.OutputFormatPropertyName)===t.OutputFormat[t.OutputFormat.Simple])o=new t.SpeechRecognitionResult(this.privRequestSession.requestId,a,s.DisplayText,s.Duration,u,s.Language,s.LanguageDetectionConfidence,s.SpeakerId,void 0,i,c);else{const p=e.DetailedSpeechPhrase.fromJSON(i),d=p.Offset+this.privRequestSession.currentTurnAudioOffset,h=p.getJsonWithCorrectedOffsets(d);o=new t.SpeechRecognitionResult(this.privRequestSession.requestId,a,p.Text,p.Duration,d,p.Language,p.LanguageDetectionConfidence,p.SpeakerId,void 0,h,c),l=o.offset}this.handleRecognizedCallback(o,l,this.privRequestSession.sessionId)}}handleSpeechHypothesis(i){const s=e.SpeechHypothesis.fromJSON(i),a=s.Offset+this.privRequestSession.currentTurnAudioOffset,o=new t.PropertyCollection;o.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,i);const c=new t.SpeechRecognitionResult(this.privRequestSession.requestId,t.ResultReason.RecognizingSpeech,s.Text,s.Duration,a,s.Language,s.LanguageDetectionConfidence,s.SpeakerId,void 0,i,o);this.privRequestSession.onHypothesis(a),this.handleRecognizingCallback(c,s.Duration,this.privRequestSession.sessionId)}};return go.ConversationServiceRecognizer=r,go}var El={},mg;function H0(){return mg||(mg=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RecognizerConfig=t.SpeechResultFormat=t.RecognitionMode=void 0;const e=I(),r=k();var n;(function(s){s[s.Interactive=0]="Interactive",s[s.Conversation=1]="Conversation",s[s.Dictation=2]="Dictation"})(n=t.RecognitionMode||(t.RecognitionMode={})),function(s){s[s.Simple=0]="Simple",s[s.Detailed=1]="Detailed"}(t.SpeechResultFormat||(t.SpeechResultFormat={}));class i{constructor(a,o){this.privSpeechServiceConfig=a||new r.SpeechServiceConfig(new r.Context(null)),this.privParameters=o,this.privMaxRetryCount=parseInt(o.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=o.getProperty(e.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(a){this.privRecognitionMode=a,this.privRecognitionActivityTimeout=a===n.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=n[a]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==n.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(e.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,void 0)}get sourceLanguageModels(){const a=[];let o=!1;if(this.autoDetectSourceLanguages!==void 0)for(const c of this.autoDetectSourceLanguages.split(",")){const u=c+e.PropertyId.SpeechServiceConnection_EndpointId.toString(),l=this.parameters.getProperty(u,void 0);l!==void 0?(a.push({language:c,endpoint:l}),o=!0):a.push({language:c,endpoint:""})}return o?a:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(a){this.privEnableSpeakerId=a}}t.RecognizerConfig=i}(El)),El}var eP={};Object.defineProperty(eP,"__esModule",{value:!0});var lu={};Object.defineProperty(lu,"__esModule",{value:!0});lu.WebsocketMessageFormatter=void 0;const rt=D(),yg=`\r
`;class V0{toConnectionMessage(e){const r=new rt.Deferred;try{if(e.messageType===rt.MessageType.Text){const n=e.textContent;let i={},s=null;if(n){const a=n.split(`\r
\r
`);a&&a.length>0&&(i=this.parseHeaders(a[0]),a.length>1&&(s=a[1]))}r.resolve(new rt.ConnectionMessage(e.messageType,s,i,e.id))}else if(e.messageType===rt.MessageType.Binary){const n=e.binaryContent;let i={},s=null;if(!n||n.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const a=new DataView(n),o=a.getInt16(0);if(n.byteLength<o+2)throw new Error("Invalid binary message format. Header content missing.");let c="";for(let u=0;u<o;u++)c+=String.fromCharCode(a.getInt8(u+2));i=this.parseHeaders(c),n.byteLength>o+2&&(s=n.slice(2+o)),r.resolve(new rt.ConnectionMessage(e.messageType,s,i,e.id))}}catch(n){r.reject(`Error formatting the message. Error: ${n}`)}return r.promise}fromConnectionMessage(e){const r=new rt.Deferred;try{if(e.messageType===rt.MessageType.Text){const n=`${this.makeHeaders(e)}${yg}${e.textBody?e.textBody:""}`;r.resolve(new rt.RawWebsocketMessage(rt.MessageType.Text,n,e.id))}else if(e.messageType===rt.MessageType.Binary){const n=this.makeHeaders(e),i=e.binaryBody,s=this.stringToArrayBuffer(n),a=new Int8Array(s),o=a.byteLength,c=new Int8Array(2+o+(i?i.byteLength:0));if(c[0]=o>>8&255,c[1]=o&255,c.set(a,2),i){const l=new Int8Array(i);c.set(l,2+o)}const u=c.buffer;r.resolve(new rt.RawWebsocketMessage(rt.MessageType.Binary,u,e.id))}}catch(n){r.reject(`Error formatting the message. ${n}`)}return r.promise}makeHeaders(e){let r="";if(e.headers)for(const n in e.headers)n&&(r+=`${n}: ${e.headers[n]}${yg}`);return r}parseHeaders(e){const r={};if(e){const n=e.match(/[^\r\n]+/g);if(r){for(const i of n)if(i){const s=i.indexOf(":"),a=s>0?i.substr(0,s).trim().toLowerCase():i,o=s>0&&i.length>s+1?i.substr(s+1).trim():"";r[a]=o}}}return r}stringToArrayBuffer(e){const r=new ArrayBuffer(e.length),n=new DataView(r);for(let i=0;i<e.length;i++)n.setUint8(i,e.charCodeAt(i));return r}}lu.WebsocketMessageFormatter=V0;var mo={},Sg;function K0(){if(Sg)return mo;Sg=1,Object.defineProperty(mo,"__esModule",{value:!0}),mo.SpeechConnectionFactory=void 0;const t=ye(),e=k(),r=I(),n=Pt(),i=k(),s=me,a=Ct;let o=class extends n.ConnectionFactoryBase{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/speech/universal/v"}create(u,l,p){let d=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,void 0);const h=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region,void 0),v=n.ConnectionFactoryBase.getHostSuffix(h),g=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://"+h+".stt.speech"+v),y={},f=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId,void 0),m=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(f?(!d||d.search(a.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(y[a.QueryParameterNames.CustomSpeechDeploymentId]=f):m&&(!d||d.search(a.QueryParameterNames.Language)===-1)&&(y[a.QueryParameterNames.Language]=m),(!d||d.search(a.QueryParameterNames.Format)===-1)&&(y[a.QueryParameterNames.Format]=u.parameters.getProperty(e.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase()),u.autoDetectSourceLanguages!==void 0&&(y[a.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(u,y,d),!d)switch(u.recognitionMode){case i.RecognitionMode.Conversation:u.parameters.getProperty(e.ForceDictationPropertyName,"false")==="true"?d=g+this.dictationRelativeUri:u.recognitionEndpointVersion!==void 0&&parseInt(u.recognitionEndpointVersion,10)>1?d=`${g}${this.universalUri}${u.recognitionEndpointVersion}`:d=g+this.conversationRelativeUri;break;case i.RecognitionMode.Dictation:d=g+this.dictationRelativeUri;break;default:u.recognitionEndpointVersion!==void 0&&parseInt(u.recognitionEndpointVersion,10)>1?d=`${g}${this.universalUri}${u.recognitionEndpointVersion}`:d=g+this.interactiveRelativeUri;break}const S={};l.token!==void 0&&l.token!==""&&(S[l.headerName]=l.token),S[s.HeaderNames.ConnectionId]=p;const C=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",P=new t.WebsocketConnection(d,y,S,new i.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(u),C,p),R=P.uri;return u.parameters.setProperty(r.PropertyId.SpeechServiceConnection_Url,R),P}};return mo.SpeechConnectionFactory=o,mo}var yo={},Cg;function $0(){if(Cg)return yo;Cg=1,Object.defineProperty(yo,"__esModule",{value:!0}),yo.ConversationTranscriberConnectionFactory=void 0;const t=ye(),e=I(),r=k(),n=Pt(),i=k(),s=me,a=Ct;let o=class extends n.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/speech/universal/v2"}create(u,l,p){let d=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);const h=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,void 0),v=n.ConnectionFactoryBase.getHostSuffix(h),g=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,"wss://"+h+".stt.speech"+v),y={},f=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_EndpointId,void 0),m=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);f?(!d||d.search(a.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(y[a.QueryParameterNames.CustomSpeechDeploymentId]=f):m&&(!d||d.search(a.QueryParameterNames.Language)===-1)&&(y[a.QueryParameterNames.Language]=m),u.autoDetectSourceLanguages!==void 0&&(y[a.QueryParameterNames.EnableLanguageId]="true"),this.setV2UrlParams(u,y,d),d||(d=`${g}${this.universalUri}`);const S={};l.token!==void 0&&l.token!==""&&(S[l.headerName]=l.token),S[s.HeaderNames.ConnectionId]=p;const C=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",P=new t.WebsocketConnection(d,y,S,new i.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(u),C,p),R=P.uri;return u.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,R),P}setV2UrlParams(u,l,p){new Map([[e.PropertyId.Speech_SegmentationSilenceTimeoutMs,a.QueryParameterNames.SegmentationSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_EnableAudioLogging,a.QueryParameterNames.EnableAudioLogging],[e.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,a.QueryParameterNames.EndSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,a.QueryParameterNames.InitialSilenceTimeoutMs],[e.PropertyId.SpeechServiceResponse_PostProcessingOption,a.QueryParameterNames.Postprocessing],[e.PropertyId.SpeechServiceResponse_ProfanityOption,a.QueryParameterNames.Profanity],[e.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,a.QueryParameterNames.StableIntermediateThreshold]]).forEach((v,g)=>{this.setUrlParameter(g,v,u,l,p)});const h=JSON.parse(u.parameters.getProperty(r.ServicePropertiesPropertyName,"{}"));Object.keys(h).forEach(v=>{l[v]=h[v]})}};return yo.ConversationTranscriberConnectionFactory=o,yo}var So={},Pg;function J0(){if(Pg)return So;Pg=1,Object.defineProperty(So,"__esModule",{value:!0}),So.TranscriberConnectionFactory=void 0;const t=ye(),e=I(),r=Pt(),n=k(),i=me,s=Ct;let a=class extends r.ConnectionFactoryBase{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(c,u,l){let p=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);const d=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,"centralus"),h=r.ConnectionFactoryBase.getHostSuffix(d),v="wss://transcribe."+d+".cts.speech"+h+this.multiaudioRelativeUri,g=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,v),y={};this.setQueryParams(y,c,p),p||(p=g);const f={};u.token!==void 0&&u.token!==""&&(f[u.headerName]=u.token),f[i.HeaderNames.ConnectionId]=l,c.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,p);const m=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(p,y,f,new n.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(c),m,l)}setQueryParams(c,u,l){const p=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_EndpointId,void 0),d=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);p&&!(s.QueryParameterNames.CustomSpeechDeploymentId in c)&&(c[s.QueryParameterNames.CustomSpeechDeploymentId]=p),d&&!(s.QueryParameterNames.Language in c)&&(c[s.QueryParameterNames.Language]=d);const h=u.parameters.getProperty(e.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true",v=u.parameters.getProperty(n.OutputFormatPropertyName,e.OutputFormat[e.OutputFormat.Simple])!==e.OutputFormat[e.OutputFormat.Simple];(h||v)&&(c[s.QueryParameterNames.Format]=e.OutputFormat[e.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(u,c,l)}};return So.TranscriberConnectionFactory=a,So}var Co={},Rg;function Q0(){if(Rg)return Co;Rg=1,Object.defineProperty(Co,"__esModule",{value:!0}),Co.TranslationConnectionFactory=void 0;const t=ye(),e=Ws,r=I(),n=Pt(),i=k(),s=me,a=Ct;let o=class extends n.ConnectionFactoryBase{create(u,l,p){const d=this.getEndpointUrl(u),h={};u.autoDetectSourceLanguages!==void 0&&(h[a.QueryParameterNames.EnableLanguageId]="true"),this.setQueryParams(h,u,d);const v={};l.token!==void 0&&l.token!==""&&(v[l.headerName]=l.token),v[s.HeaderNames.ConnectionId]=p,u.parameters.setProperty(r.PropertyId.SpeechServiceConnection_Url,d);const g=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(d,h,v,new i.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(u),g,p)}getEndpointUrl(u,l){const p=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region),d=n.ConnectionFactoryBase.getHostSuffix(p);let h=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,void 0);return h||(u.autoDetectSourceLanguages!==void 0?h=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+d)+"/speech/universal/v2":h=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+d)+"/speech/translation/cognitiveservices/v1"),l===!0?h:e.StringUtils.formatString(h,{region:p})}setQueryParams(u,l,p){u.from=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage),u.to=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages),u.scenario=l.recognitionMode===i.RecognitionMode.Interactive?"interactive":l.recognitionMode===i.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(l,u,p),this.setUrlParameter(r.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,a.QueryParameterNames.StableTranslation,l,u,p);const d=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);d!==void 0&&(u.voice=d,u.features="texttospeech")}};return Co.TranslationConnectionFactory=o,Co}var Po={},Eg;function G0(){if(Eg)return Po;Eg=1,Object.defineProperty(Po,"__esModule",{value:!0}),Po.EnumTranslation=void 0;const t=I(),e=k();let r=class{static implTranslateRecognitionResult(i,s=!1){let a=t.ResultReason.Canceled;switch(i){case e.RecognitionStatus.Success:a=t.ResultReason.RecognizedSpeech;break;case e.RecognitionStatus.EndOfDictation:a=s?t.ResultReason.RecognizedSpeech:t.ResultReason.NoMatch;break;case e.RecognitionStatus.NoMatch:case e.RecognitionStatus.InitialSilenceTimeout:case e.RecognitionStatus.BabbleTimeout:a=t.ResultReason.NoMatch;break;case e.RecognitionStatus.Error:case e.RecognitionStatus.BadRequest:case e.RecognitionStatus.Forbidden:default:a=t.ResultReason.Canceled;break}return a}static implTranslateCancelResult(i){let s=t.CancellationReason.EndOfStream;switch(i){case e.RecognitionStatus.Success:case e.RecognitionStatus.EndOfDictation:case e.RecognitionStatus.NoMatch:s=t.CancellationReason.EndOfStream;break;case e.RecognitionStatus.InitialSilenceTimeout:case e.RecognitionStatus.BabbleTimeout:case e.RecognitionStatus.Error:case e.RecognitionStatus.BadRequest:case e.RecognitionStatus.Forbidden:default:s=t.CancellationReason.Error;break}return s}static implTranslateCancelErrorCode(i){let s=t.CancellationErrorCode.NoError;switch(i){case e.RecognitionStatus.Error:s=t.CancellationErrorCode.ServiceError;break;case e.RecognitionStatus.TooManyRequests:s=t.CancellationErrorCode.TooManyRequests;break;case e.RecognitionStatus.BadRequest:s=t.CancellationErrorCode.BadRequestParameters;break;case e.RecognitionStatus.Forbidden:s=t.CancellationErrorCode.Forbidden;break;default:s=t.CancellationErrorCode.NoError;break}return s}static implTranslateErrorDetails(i){let s="The speech service encountered an internal error and could not continue.";switch(i){case t.CancellationErrorCode.Forbidden:s="The recognizer is using a free subscription that ran out of quota.";break;case t.CancellationErrorCode.BadRequestParameters:s="Invalid parameter or unsupported audio format in the request.";break;case t.CancellationErrorCode.TooManyRequests:s="The number of parallel requests exceeded the number of allowed concurrent transcriptions.";break}return s}};return Po.EnumTranslation=r,Po}var tP={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionStatus=t.SynthesisStatus=void 0,function(e){e[e.Success=0]="Success",e[e.SynthesisEnd=1]="SynthesisEnd",e[e.Error=2]="Error"}(t.SynthesisStatus||(t.SynthesisStatus={})),function(e){e[e.Success=0]="Success",e[e.NoMatch=1]="NoMatch",e[e.InitialSilenceTimeout=2]="InitialSilenceTimeout",e[e.BabbleTimeout=3]="BabbleTimeout",e[e.Error=4]="Error",e[e.EndOfDictation=5]="EndOfDictation",e[e.TooManyRequests=6]="TooManyRequests",e[e.BadRequest=7]="BadRequest",e[e.Forbidden=8]="Forbidden"}(t.RecognitionStatus||(t.RecognitionStatus={}))})(tP);var Ro={},wg;function X0(){if(wg)return Ro;wg=1,Object.defineProperty(Ro,"__esModule",{value:!0}),Ro.TranslationSynthesisEnd=void 0;const t=k();let e=class rP{constructor(n){this.privSynthesisEnd=JSON.parse(n),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=t.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=t.SynthesisStatus[this.privSynthesisEnd.Status])}static fromJSON(n){return new rP(n)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}};return Ro.TranslationSynthesisEnd=e,Ro}var pu={};Object.defineProperty(pu,"__esModule",{value:!0});pu.TranslationHypothesis=void 0;const Z0=N,Y0=Dc;class tc{constructor(e){this.privTranslationHypothesis=e,this.privTranslationHypothesis.Translation.TranslationStatus=Y0.TranslationStatus[this.privTranslationHypothesis.Translation.TranslationStatus]}static fromJSON(e){return new tc(JSON.parse(e))}static fromTranslationResponse(e){Z0.Contracts.throwIfNullOrUndefined(e,"translationHypothesis");const r=e.SpeechHypothesis;return e.SpeechHypothesis=void 0,r.Translation=e,new tc(r)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){var e;return(e=this.privTranslationHypothesis.PrimaryLanguage)==null?void 0:e.Language}}pu.TranslationHypothesis=tc;var Eo={},Ag;function e_(){if(Ag)return Eo;Ag=1,Object.defineProperty(Eo,"__esModule",{value:!0}),Eo.TranslationPhrase=void 0;const t=N,e=k(),r=Dc;let n=class kp{constructor(s){this.privTranslationPhrase=s,this.privTranslationPhrase.RecognitionStatus=e.RecognitionStatus[this.privTranslationPhrase.RecognitionStatus],this.privTranslationPhrase.Translation!==void 0&&(this.privTranslationPhrase.Translation.TranslationStatus=r.TranslationStatus[this.privTranslationPhrase.Translation.TranslationStatus])}static fromJSON(s){return new kp(JSON.parse(s))}static fromTranslationResponse(s){t.Contracts.throwIfNullOrUndefined(s,"translationResponse");const a=s.SpeechPhrase;return s.SpeechPhrase=void 0,a.Translation=s,a.Text=a.DisplayText,new kp(a)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){var s;return(s=this.privTranslationPhrase.PrimaryLanguage)==null?void 0:s.Language}get Confidence(){var s;return(s=this.privTranslationPhrase.PrimaryLanguage)==null?void 0:s.Confidence}get Translation(){return this.privTranslationPhrase.Translation}};return Eo.TranslationPhrase=n,Eo}var wo={},Ig;function t_(){if(Ig)return wo;Ig=1,Object.defineProperty(wo,"__esModule",{value:!0}),wo.TranslationServiceRecognizer=void 0;const t=D(),e=I(),r=k();let n=class extends r.ConversationServiceRecognizer{constructor(s,a,o,c,u){super(s,a,o,c,u),this.privTranslationRecognizer=u,this.connectionEvents.attach(l=>{l.name==="ConnectionEstablishedEvent"&&this.privTranslationRecognizer.onConnection()})}async processTypeSpecificMessages(s){const a=new e.PropertyCollection;let o=await this.processSpeechMessages(s);if(o)return!0;const c=async l=>{if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+l.Offset+l.Duration),l.RecognitionStatus===r.RecognitionStatus.Success){const p=this.fireEventForResult(l,a);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,p)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(p.result)}catch(d){this.privErrorCallback&&this.privErrorCallback(d)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{const p=r.EnumTranslation.implTranslateRecognitionResult(l.RecognitionStatus),d=new e.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,p,l.Text,l.Duration,this.privRequestSession.currentTurnAudioOffset+l.Offset,l.Language,l.Confidence,void 0,s.textBody,a);if(p===e.ResultReason.Canceled){const h=r.EnumTranslation.implTranslateCancelResult(l.RecognitionStatus),v=r.EnumTranslation.implTranslateCancelErrorCode(l.RecognitionStatus);await this.cancelRecognitionLocal(h,v,r.EnumTranslation.implTranslateErrorDetails(v))}else{if(!(this.privRequestSession.isSpeechEnded&&p===e.ResultReason.NoMatch&&l.RecognitionStatus!==r.RecognitionStatus.InitialSilenceTimeout)){const h=new e.TranslationRecognitionEventArgs(d,d.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,h)}catch{}}if(this.privSuccessCallback){try{this.privSuccessCallback(d)}catch(h){this.privErrorCallback&&this.privErrorCallback(h)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}o=!0}},u=(l,p)=>{const d=this.fireEventForResult(l,p);if(this.privRequestSession.onHypothesis(this.privRequestSession.currentTurnAudioOffset+d.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,d)}catch{}o=!0};switch(s.messageType===t.MessageType.Text&&a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,s.textBody),s.path.toLowerCase()){case"translation.hypothesis":u(r.TranslationHypothesis.fromJSON(s.textBody),a);break;case"translation.response":const l=JSON.parse(s.textBody);if(l.SpeechPhrase)await c(r.TranslationPhrase.fromTranslationResponse(l));else{const d=JSON.parse(s.textBody);d.SpeechHypothesis&&u(r.TranslationHypothesis.fromTranslationResponse(d),a)}break;case"translation.phrase":await c(r.TranslationPhrase.fromJSON(s.textBody));break;case"translation.synthesis":this.sendSynthesisAudio(s.binaryBody,this.privRequestSession.sessionId),o=!0;break;case"audio.end":case"translation.synthesis.end":const p=r.TranslationSynthesisEnd.fromJSON(s.textBody);switch(p.SynthesisStatus){case r.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){const d=new e.TranslationSynthesisResult(e.ResultReason.Canceled,void 0),h=new e.TranslationSynthesisEventArgs(d,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,h)}catch{}}if(this.privTranslationRecognizer.canceled){const d=new e.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,e.CancellationReason.Error,p.FailureReason,e.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,d)}catch{}}break;case r.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId);break}o=!0;break}return o}cancelRecognition(s,a,o,c,u){const l=new e.PropertyCollection;if(l.setProperty(r.CancellationErrorCodePropertyName,e.CancellationErrorCode[c]),this.privTranslationRecognizer.canceled){const p=new e.TranslationRecognitionCanceledEventArgs(s,o,u,c,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,p)}catch{}}if(this.privSuccessCallback){const p=new e.TranslationRecognitionResult(void 0,a,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,u,void 0,l);try{this.privSuccessCallback(p),this.privSuccessCallback=void 0}catch{}}}handleRecognizingCallback(s,a,o){try{const c=new e.TranslationRecognitionEventArgs(e.TranslationRecognitionResult.fromSpeechRecognitionResult(s),a,o);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,c)}catch{}}handleRecognizedCallback(s,a,o){try{const c=new e.TranslationRecognitionEventArgs(e.TranslationRecognitionResult.fromSpeechRecognitionResult(s),a,o);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,c)}catch{}}fireEventForResult(s,a){let o;if(s.Translation.Translations!==void 0){o=new e.Translations;for(const v of s.Translation.Translations)o.set(v.Language,v.Text||v.DisplayText)}let c,u;s instanceof r.TranslationPhrase?(s.Translation&&s.Translation.TranslationStatus===t.TranslationStatus.Success?c=e.ResultReason.TranslatedSpeech:c=e.ResultReason.RecognizedSpeech,u=s.Confidence):c=e.ResultReason.TranslatingSpeech;const l=s.Language,p=s.Offset+this.privRequestSession.currentTurnAudioOffset,d=new e.TranslationRecognitionResult(o,this.privRequestSession.requestId,c,s.Text,s.Duration,p,l,u,s.Translation.FailureReason,JSON.stringify(s),a);return new e.TranslationRecognitionEventArgs(d,p,this.privRequestSession.sessionId)}sendSynthesisAudio(s,a){const o=s===void 0?e.ResultReason.SynthesizingAudioCompleted:e.ResultReason.SynthesizingAudio,c=new e.TranslationSynthesisResult(o,s),u=new e.TranslationSynthesisEventArgs(c,a);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,u)}catch{}}};return wo.TranslationServiceRecognizer=n,wo}var du={};Object.defineProperty(du,"__esModule",{value:!0});du.SpeechDetected=void 0;class Jd{constructor(e){this.privSpeechStartDetected=JSON.parse(e)}static fromJSON(e){return new Jd(e)}get Offset(){return this.privSpeechStartDetected.Offset}}du.SpeechDetected=Jd;var hu={};Object.defineProperty(hu,"__esModule",{value:!0});hu.SpeechHypothesis=void 0;class Qd{constructor(e){this.privSpeechHypothesis=JSON.parse(e)}static fromJSON(e){return new Qd(e)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}}hu.SpeechHypothesis=Qd;var vu={};Object.defineProperty(vu,"__esModule",{value:!0});vu.SpeechKeyword=void 0;class Gd{constructor(e){this.privSpeechKeyword=JSON.parse(e)}static fromJSON(e){return new Gd(e)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}}vu.SpeechKeyword=Gd;var Ao={},Tg;function r_(){if(Tg)return Ao;Tg=1,Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.SpeechServiceRecognizer=void 0;const t=I(),e=k();let r=class extends e.ServiceRecognizerBase{constructor(i,s,a,o,c){super(i,s,a,o,c),this.privSpeechRecognizer=c}async processTypeSpecificMessages(i){let s;const a=new t.PropertyCollection;a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,i.textBody);let o=!1;switch(i.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const c=e.SpeechHypothesis.fromJSON(i.textBody),u=c.Offset+this.privRequestSession.currentTurnAudioOffset;s=new t.SpeechRecognitionResult(this.privRequestSession.requestId,t.ResultReason.RecognizingSpeech,c.Text,c.Duration,u,c.Language,c.LanguageDetectionConfidence,void 0,void 0,i.textBody,a),this.privRequestSession.onHypothesis(u);const l=new t.SpeechRecognitionEventArgs(s,c.Duration,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,l)}catch{}o=!0;break;case"speech.phrase":const p=e.SimpleSpeechPhrase.fromJSON(i.textBody),d=e.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+p.Offset+p.Duration),t.ResultReason.Canceled===d){const h=e.EnumTranslation.implTranslateCancelResult(p.RecognitionStatus),v=e.EnumTranslation.implTranslateCancelErrorCode(p.RecognitionStatus);await this.cancelRecognitionLocal(h,v,e.EnumTranslation.implTranslateErrorDetails(v))}else{if(!(this.privRequestSession.isSpeechEnded&&d===t.ResultReason.NoMatch&&p.RecognitionStatus!==e.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(e.OutputFormatPropertyName)===t.OutputFormat[t.OutputFormat.Simple])s=new t.SpeechRecognitionResult(this.privRequestSession.requestId,d,p.DisplayText,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,void 0,void 0,i.textBody,a);else{const v=e.DetailedSpeechPhrase.fromJSON(i.textBody),g=v.Offset+this.privRequestSession.currentTurnAudioOffset,y=v.getJsonWithCorrectedOffsets(g);s=new t.SpeechRecognitionResult(this.privRequestSession.requestId,d,v.RecognitionStatus===e.RecognitionStatus.Success?v.NBest[0].Display:void 0,v.Duration,g,v.Language,v.LanguageDetectionConfidence,void 0,void 0,y,a)}const h=new t.SpeechRecognitionEventArgs(s,s.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,h)}catch{}}if(this.privSuccessCallback){try{this.privSuccessCallback(s)}catch(h){this.privErrorCallback&&this.privErrorCallback(h)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}o=!0;break}return o}cancelRecognition(i,s,a,o,c){const u=new t.PropertyCollection;if(u.setProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[o]),this.privSpeechRecognizer.canceled){const l=new t.SpeechRecognitionCanceledEventArgs(a,c,o,void 0,i);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,l)}catch{}}if(this.privSuccessCallback){const l=new t.SpeechRecognitionResult(s,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,c,void 0,u);try{this.privSuccessCallback(l),this.privSuccessCallback=void 0}catch{}}}};return Ao.SpeechServiceRecognizer=r,Ao}var Io={},_g;function n_(){if(_g)return Io;_g=1,Object.defineProperty(Io,"__esModule",{value:!0}),Io.ConversationTranscriptionServiceRecognizer=void 0;const t=I(),e=k();let r=class extends e.ServiceRecognizerBase{constructor(i,s,a,o,c){super(i,s,a,o,c),this.privConversationTranscriber=c,this.setSpeakerDiarizationJson()}setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){const i=this.privSpeechContext.getSection("phraseDetection");i.mode="Conversation";const s={};s.mode="Anonymous",s.audioSessionId=this.privDiarizationSessionId,s.audioOffsetMs=0,i.speakerDiarization=s,this.privSpeechContext.setSection("phraseDetection",i)}}async processTypeSpecificMessages(i){let s;const a=new t.PropertyCollection;a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,i.textBody);let o=!1;switch(i.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const c=e.SpeechHypothesis.fromJSON(i.textBody),u=c.Offset+this.privRequestSession.currentTurnAudioOffset;s=new t.ConversationTranscriptionResult(this.privRequestSession.requestId,t.ResultReason.RecognizingSpeech,c.Text,c.Duration,u,c.Language,c.LanguageDetectionConfidence,void 0,void 0,i.textBody,a),this.privRequestSession.onHypothesis(u);const l=new t.ConversationTranscriptionEventArgs(s,c.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,l)}catch{}o=!0;break;case"speech.phrase":const p=e.SimpleSpeechPhrase.fromJSON(i.textBody),d=e.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+p.Offset+p.Duration),t.ResultReason.Canceled===d){const h=e.EnumTranslation.implTranslateCancelResult(p.RecognitionStatus),v=e.EnumTranslation.implTranslateCancelErrorCode(p.RecognitionStatus);await this.cancelRecognitionLocal(h,v,e.EnumTranslation.implTranslateErrorDetails(v))}else if(!(this.privRequestSession.isSpeechEnded&&d===t.ResultReason.NoMatch&&p.RecognitionStatus!==e.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(e.OutputFormatPropertyName)===t.OutputFormat[t.OutputFormat.Simple])s=new t.ConversationTranscriptionResult(this.privRequestSession.requestId,d,p.DisplayText,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,p.SpeakerId,void 0,i.textBody,a);else{const v=e.DetailedSpeechPhrase.fromJSON(i.textBody),g=v.Offset+this.privRequestSession.currentTurnAudioOffset,y=v.getJsonWithCorrectedOffsets(g);s=new t.ConversationTranscriptionResult(this.privRequestSession.requestId,d,v.RecognitionStatus===e.RecognitionStatus.Success?v.NBest[0].Display:void 0,v.Duration,g,v.Language,v.LanguageDetectionConfidence,p.SpeakerId,void 0,y,a)}const h=new t.ConversationTranscriptionEventArgs(s,s.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,h)}catch{}}o=!0;break}return o}cancelRecognition(i,s,a,o,c){if(new t.PropertyCollection().setProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[o]),this.privConversationTranscriber.canceled){const l=new t.ConversationTranscriptionCanceledEventArgs(a,c,o,void 0,i);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,l)}catch{}}}};return Io.ConversationTranscriptionServiceRecognizer=r,Io}var To={},Og;function i_(){if(Og)return To;Og=1,Object.defineProperty(To,"__esModule",{value:!0}),To.TranscriptionServiceRecognizer=void 0;const t=D(),e=I(),r=k(),n=Gt;let i=class extends r.ConversationServiceRecognizer{constructor(a,o,c,u,l){super(a,o,c,u,l),this.privTranscriberRecognizer=l,this.sendPrePayloadJSONOverride=p=>this.sendTranscriptionStartJSON(p),this.privRecognizerConfig.parameters.getProperty(e.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)==="true"&&this.privSpeechContext.setWordLevelTimings()}async sendSpeechEventAsync(a,o){if(this.privRequestSession.isRecognizing){const c=await this.fetchConnection();await this.sendSpeechEvent(c,this.createSpeechEventPayload(a,o))}}async sendMeetingSpeechEventAsync(a,o){if(this.privRequestSession.isRecognizing){const c=await this.fetchConnection();await this.sendSpeechEvent(c,this.createMeetingSpeechEventPayload(a,o))}}processTypeSpecificMessages(a){return this.processSpeechMessages(a)}handleRecognizedCallback(a,o,c){try{const u=new e.SpeechRecognitionEventArgs(a,o,c);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,u),this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(l){this.privErrorCallback&&this.privErrorCallback(l)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch{}}handleRecognizingCallback(a,o,c){try{const u=new e.SpeechRecognitionEventArgs(a,o,c);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,u)}catch{}}cancelRecognition(a,o,c,u,l){const p=new e.PropertyCollection;if(p.setProperty(r.CancellationErrorCodePropertyName,e.CancellationErrorCode[u]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){const d=new e.MeetingTranscriptionCanceledEventArgs(c,l,u,void 0,a);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,d)}catch{}}}else if(this.privTranscriberRecognizer.canceled){const d=new e.ConversationTranscriptionCanceledEventArgs(c,l,u,void 0,a);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,d)}catch{}}if(this.privSuccessCallback){const d=new e.SpeechRecognitionResult(o,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,l,void 0,p);try{this.privSuccessCallback(d),this.privSuccessCallback=void 0}catch{}}}async sendTranscriptionStartJSON(a){if(await this.sendSpeechContext(a,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){const o=this.privTranscriberRecognizer.getMeetingInfo(),c=this.createMeetingSpeechEventPayload(o,"start");await this.sendSpeechEvent(a,c)}else{const o=this.privTranscriberRecognizer.getConversationInfo(),c=this.createSpeechEventPayload(o,"start");await this.sendSpeechEvent(a,c)}await this.sendWaveHeader(a)}sendSpeechEvent(a,o){const c=JSON.stringify(o);if(c)return a.send(new n.SpeechConnectionMessage(t.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",c))}createSpeechEventPayload(a,o){const c={id:"meeting",name:o,meeting:a.conversationProperties};return c.meeting.id=a.id,c.meeting.attendees=a.participants,c}createMeetingSpeechEventPayload(a,o){const c={id:"meeting",name:o,meeting:a.meetingProperties};return c.meeting.id=a.id,c.meeting.attendees=a.participants,c}};return To.TranscriptionServiceRecognizer=i,To}var _o={},kg;function o_(){if(kg)return _o;kg=1,Object.defineProperty(_o,"__esModule",{value:!0}),_o.DetailedSpeechPhrase=void 0;const t=k();let e=class nP{constructor(n){this.privDetailedSpeechPhrase=JSON.parse(n),this.privDetailedSpeechPhrase.RecognitionStatus=t.RecognitionStatus[this.privDetailedSpeechPhrase.RecognitionStatus]}static fromJSON(n){return new nP(n)}getJsonWithCorrectedOffsets(n){if(this.privDetailedSpeechPhrase.NBest){let i;for(const s of this.privDetailedSpeechPhrase.NBest)if(s.Words&&s.Words[0]){i=s.Words[0].Offset;break}if(i&&i<n){const s=n-i;for(const a of this.privDetailedSpeechPhrase.NBest){if(a.Words)for(const o of a.Words)o.Offset+=s;if(a.DisplayWords)for(const o of a.DisplayWords)o.Offset+=s}}}return JSON.stringify(this.privDetailedSpeechPhrase)}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}};return _o.DetailedSpeechPhrase=e,_o}var Oo={},Mg;function s_(){if(Mg)return Oo;Mg=1,Object.defineProperty(Oo,"__esModule",{value:!0}),Oo.SimpleSpeechPhrase=void 0;const t=k();let e=class iP{constructor(n){this.privSimpleSpeechPhrase=JSON.parse(n),this.privSimpleSpeechPhrase.RecognitionStatus=t.RecognitionStatus[this.privSimpleSpeechPhrase.RecognitionStatus]}static fromJSON(n){return new iP(n)}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}};return Oo.SimpleSpeechPhrase=e,Oo}var fu={};Object.defineProperty(fu,"__esModule",{value:!0});fu.AddedLmIntent=void 0;class a_{constructor(e,r){this.modelImpl=e,this.intentName=r}}fu.AddedLmIntent=a_;var ko={},bg;function c_(){if(bg)return ko;bg=1,Object.defineProperty(ko,"__esModule",{value:!0}),ko.IntentServiceRecognizer=void 0;const t=D(),e=I(),r=k();let n=class extends r.ServiceRecognizerBase{constructor(s,a,o,c,u){super(s,a,o,c,u),this.privIntentRecognizer=u,this.privIntentDataSent=!1}setIntents(s,a){this.privAddedLmIntents=s,this.privUmbrellaIntent=a,this.privIntentDataSent=!0}processTypeSpecificMessages(s){let a,o,c=!1;const u=new e.PropertyCollection;switch(s.messageType===t.MessageType.Text&&u.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,s.textBody),s.path.toLowerCase()){case"speech.hypothesis":const p=r.SpeechHypothesis.fromJSON(s.textBody);if(a=new e.IntentRecognitionResult(void 0,this.privRequestSession.requestId,e.ResultReason.RecognizingIntent,p.Text,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,void 0,s.textBody,u),this.privRequestSession.onHypothesis(a.offset),o=new e.IntentRecognitionEventArgs(a,p.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,o)}catch{}c=!0;break;case"speech.phrase":const d=r.SimpleSpeechPhrase.fromJSON(s.textBody);a=new e.IntentRecognitionResult(void 0,this.privRequestSession.requestId,r.EnumTranslation.implTranslateRecognitionResult(d.RecognitionStatus),d.DisplayText,d.Duration,d.Offset+this.privRequestSession.currentTurnAudioOffset,d.Language,d.LanguageDetectionConfidence,void 0,s.textBody,u),o=new e.IntentRecognitionEventArgs(a,a.offset,this.privRequestSession.sessionId);const h=()=>{if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,o)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(g){this.privErrorCallback&&this.privErrorCallback(g)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}};this.privIntentDataSent===!1||e.ResultReason.NoMatch===o.result.reason?(this.privRequestSession.onPhraseRecognized(o.offset+o.result.duration),h()):this.privPendingIntentArgs=o,c=!0;break;case"response":if(o=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,o===void 0){if(s.textBody==="")return;o=new e.IntentRecognitionEventArgs(new e.IntentRecognitionResult,0,this.privRequestSession.sessionId)}const v=r.IntentResponse.fromJSON(s.textBody);if(v!==null&&v.topScoringIntent&&v.topScoringIntent.intent){let g=this.privAddedLmIntents[v.topScoringIntent.intent];if(this.privUmbrellaIntent!==void 0&&(g=this.privUmbrellaIntent),g){const y=g===void 0||g.intentName===void 0?v.topScoringIntent.intent:g.intentName;let f=o.result.reason;y!==void 0&&(f=e.ResultReason.RecognizedIntent);const m=o.result.properties!==void 0?o.result.properties:new e.PropertyCollection;m.setProperty(e.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,s.textBody),o=new e.IntentRecognitionEventArgs(new e.IntentRecognitionResult(y,o.result.resultId,f,o.result.text,o.result.duration,o.result.offset,void 0,void 0,o.result.errorDetails,o.result.json,m),o.offset,o.sessionId)}}if(this.privRequestSession.onPhraseRecognized(o.offset+o.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,o)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(o.result)}catch(g){this.privErrorCallback&&this.privErrorCallback(g)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}c=!0;break}const l=new t.Deferred;return l.resolve(c),l.promise}cancelRecognition(s,a,o,c,u){const l=new e.PropertyCollection;if(l.setProperty(r.CancellationErrorCodePropertyName,e.CancellationErrorCode[c]),this.privIntentRecognizer.canceled){const p=new e.IntentRecognitionCanceledEventArgs(o,u,c,void 0,void 0,s);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,p)}catch{}}if(this.privSuccessCallback){const p=new e.IntentRecognitionResult(void 0,a,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,u,void 0,l);try{this.privSuccessCallback(p),this.privSuccessCallback=void 0}catch{}}}};return ko.IntentServiceRecognizer=n,ko}var gu={};Object.defineProperty(gu,"__esModule",{value:!0});gu.IntentResponse=void 0;class Xd{constructor(e){e===""?this.privIntentResponse={}:this.privIntentResponse=JSON.parse(e)}static fromJSON(e){return new Xd(e)}get query(){return this.privIntentResponse.query}get topScoringIntent(){return this.privIntentResponse.topScoringIntent}get entities(){return this.privIntentResponse.entities}}gu.IntentResponse=Xd;var oP={};Object.defineProperty(oP,"__esModule",{value:!0});var mu={},yu={};Object.defineProperty(yu,"__esModule",{value:!0});yu.ServiceTelemetryListener=void 0;const jt=D(),Dg=uu;class u_{constructor(e,r,n){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=e,this.privAudioSourceId=r,this.privAudioNodeId=n,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(e){e>0&&this.privPhraseLatencies.push(Date.now()-e)}hypothesisReceived(e){e>0&&this.privHypothesisLatencies.push(Date.now()-e)}onEvent(e){this.privIsDisposed||(e instanceof Dg.RecognitionTriggeredEvent&&e.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:e.eventTime,Name:"ListeningTrigger",Start:e.eventTime}),e instanceof jt.AudioStreamNodeAttachingEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof jt.AudioStreamNodeAttachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof jt.AudioSourceErrorEvent&&e.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof jt.AudioStreamNodeErrorEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof jt.AudioStreamNodeDetachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Name:"Microphone",Start:this.privMicStartTime})),e instanceof Dg.ConnectingToServiceEvent&&e.requestId===this.privRequestId&&(this.privConnectionId=e.sessionId),e instanceof jt.ConnectionStartEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionStartTime=e.eventTime),e instanceof jt.ConnectionEstablishedEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof jt.ConnectionEstablishErrorEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Error:this.getConnectionError(e.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof jt.ConnectionMessageReceivedEvent&&e.connectionId===this.privConnectionId&&e.message&&e.message.headers&&e.message.headers.path&&(this.privReceivedMessages[e.message.headers.path]||(this.privReceivedMessages[e.message.headers.path]=new Array),this.privReceivedMessages[e.message.headers.path].length<50&&this.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime)))}getTelemetry(){const e=new Array;this.privListeningTriggerMetric&&e.push(this.privListeningTriggerMetric),this.privMicMetric&&e.push(this.privMicMetric),this.privConnectionEstablishMetric&&e.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&e.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&e.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const r={Metrics:e,ReceivedMessages:this.privReceivedMessages},n=JSON.stringify(r);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],n}get hasTelemetry(){return Object.keys(this.privReceivedMessages).length!==0||this.privListeningTriggerMetric!==null||this.privMicMetric!==null||this.privConnectionEstablishMetric!==null||this.privPhraseLatencies.length!==0||this.privHypothesisLatencies.length!==0}dispose(){this.privIsDisposed=!0}getConnectionError(e){switch(e){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+e.toString()}}}yu.ServiceTelemetryListener=u_;Object.defineProperty(mu,"__esModule",{value:!0});mu.RequestSession=void 0;const cn=D(),pa=uu,l_=yu;class p_{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=e,this.privRequestId=cn.createNoDashGuid(),this.privAudioNodeId=cn.createNoDashGuid(),this.privTurnDeferral=new cn.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(e){this.privServiceTelemetryListener&&this.privDetachables.push(e.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new l_.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new pa.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}async onAudioSourceAttachCompleted(e,r){this.privAudioNode=e,this.privIsAudioNodeDetached=!1,r?await this.onComplete():this.onEvent(new pa.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onPreConnectionStart(e,r){this.privAuthFetchEventId=e,this.privSessionId=r,this.onEvent(new pa.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}async onAuthCompleted(e){e&&await this.onComplete()}async onConnectionEstablishCompleted(e,r){if(e===200){this.onEvent(new pa.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privBytesSent=0;return}else e===403&&await this.onComplete()}async onServiceTurnEndResponse(e){this.privTurnDeferral.resolve(),!e||this.isSpeechEnded?(await this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())}onSpeechContext(){this.privRequestId=cn.createNoDashGuid()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new cn.Deferred}onHypothesis(e){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(e)))}onPhraseRecognized(e){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(e)),this.onServiceRecognized(e)}onServiceRecognized(e){this.privLastRecoOffset=e,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(e),this.privConnectionAttempts=0}onAudioSent(e){this.privBytesSent+=e,this.privRecognitionBytesSent+=e}onRetryConnection(){this.privConnectionAttempts++}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)await e.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}async onStopRecognizing(){await this.onComplete()}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(e){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(e),cn.Events.instance.onEvent(e)}async onComplete(){this.privIsRecognizing&&(this.privIsRecognizing=!1,await this.detachAudioNode())}async detachAudioNode(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&await this.privAudioNode.detach())}}mu.RequestSession=p_;var Su={};Object.defineProperty(Su,"__esModule",{value:!0});Su.SpeechContext=void 0;class d_{constructor(e){this.privContext={},this.privDynamicGrammar=e}getSection(e){return this.privContext[e]||{}}setSection(e,r){this.privContext[e]=r}setPronunciationAssessmentParams(e,r,n=!1){this.privContext.phraseDetection===void 0&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment===void 0&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(e),n&&(this.privContext.phraseDetection.mode="Conversation"),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment"),this.privContext.phraseOutput.detailed.options.indexOf("SNR")===-1&&this.privContext.phraseOutput.detailed.options.push("SNR"),r&&(this.privContext.phraseDetection.enrichment.contentAssessment={topic:r},this.privContext.phraseOutput.detailed.options.push("ContentAssessment"))}setDetailedOutputFormat(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed"}setWordLevelTimings(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed",this.privContext.phraseOutput.detailed.options.indexOf("WordTimings")===-1&&this.privContext.phraseOutput.detailed.options.push("WordTimings")}setSpeakerDiarizationAudioOffsetMs(e){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=e}toJSON(){const e=this.privDynamicGrammar.generateGrammarObject();return this.setSection("dgi",e),JSON.stringify(this.privContext)}}Su.SpeechContext=d_;var Cu={};Object.defineProperty(Cu,"__esModule",{value:!0});Cu.DynamicGrammarBuilder=void 0;class h_{addPhrase(e){this.privPhrases||(this.privPhrases=[]),e instanceof Array?this.privPhrases=this.privPhrases.concat(e):this.privPhrases.push(e)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(e){this.privGrammars||(this.privGrammars=[]),e instanceof Array?this.privGrammars=this.privGrammars.concat(e):this.privGrammars.push(e)}clearGrammars(){this.privGrammars=void 0}generateGrammarObject(){if(this.privGrammars===void 0&&this.privPhrases===void 0)return;const e={};if(e.ReferenceGrammars=this.privGrammars,this.privPhrases!==void 0&&this.privPhrases.length!==0){const r=[];this.privPhrases.forEach(n=>{r.push({Text:n})}),e.Groups=[{Type:"Generic",Items:r}]}return e}}Cu.DynamicGrammarBuilder=h_;var sP={};Object.defineProperty(sP,"__esModule",{value:!0});var Mo={},Pu={},Ru={},Zd={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MessageDataStreamType=t.ActivityPayloadResponse=void 0;class e{constructor(n){this.privActivityResponse=JSON.parse(n)}static fromJSON(n){return new e(n)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}}t.ActivityPayloadResponse=e,function(r){r[r.None=0]="None",r[r.TextToSpeechAudio=1]="TextToSpeechAudio"}(t.MessageDataStreamType||(t.MessageDataStreamType={}))})(Zd);Object.defineProperty(Ru,"__esModule",{value:!0});Ru.DialogServiceTurnState=void 0;const v_=wr,f_=Pe,g_=Zd;class m_{constructor(e,r){this.privRequestId=r,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=e,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(e,r){return e.messageDataStreamType===g_.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=f_.AudioOutputStream.createPullStream(),this.privAudioStream.format=r!==void 0?r:v_.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){this.privAudioStream!==null&&!this.privAudioStream.isClosed&&this.privAudioStream.close()}complete(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout(()=>{this.privTurnManager.CompleteTurn(this.privRequestId)},2e3)}}Ru.DialogServiceTurnState=m_;Object.defineProperty(Pu,"__esModule",{value:!0});Pu.DialogServiceTurnStateManager=void 0;const Ng=Ee,y_=Ru;class S_{constructor(){this.privTurnMap=new Map}StartTurn(e){if(this.privTurnMap.has(e))throw new Ng.InvalidOperationError("Service error: There is already a turn with id:"+e);const r=new y_.DialogServiceTurnState(this,e);return this.privTurnMap.set(e,r),this.privTurnMap.get(e)}GetTurn(e){return this.privTurnMap.get(e)}CompleteTurn(e){if(!this.privTurnMap.has(e))throw new Ng.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+e);const r=this.privTurnMap.get(e);return r.complete(),this.privTurnMap.delete(e),r}}Pu.DialogServiceTurnStateManager=S_;var zg;function C_(){if(zg)return Mo;zg=1,Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.DialogServiceAdapter=void 0;const t=ye(),e=Yr,r=D(),n=wr,i=I(),s=Pu,a=k(),o=Zd,c=Gt;let u=class extends a.ServiceRecognizerBase{constructor(p,d,h,v,g){super(p,d,h,v,g),this.privEvents=new r.EventSource,this.privDialogServiceConnector=g,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new s.DialogServiceTurnStateManager,this.recognizeOverride=(y,f,m)=>this.listenOnce(y,f,m),this.postConnectImplOverride=y=>this.dialogConnectImpl(y),this.configConnectionOverride=y=>this.configConnection(y),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=h,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach(y=>{y.name==="ConnectionClosedEvent"&&(this.terminateMessageLoop=!0)})}async sendMessage(p){const d=r.createGuid(),h=r.createNoDashGuid(),v={context:{interactionId:d},messagePayload:JSON.parse(p),version:.5},g=JSON.stringify(v);await(await this.fetchConnection()).send(new c.SpeechConnectionMessage(r.MessageType.Text,"agent",h,"application/json",g))}async privDisconnect(){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1}processTypeSpecificMessages(p){const d=new i.PropertyCollection;p.messageType===r.MessageType.Text&&d.setProperty(i.PropertyId.SpeechServiceResponse_JsonResult,p.textBody);let h,v;switch(p.path.toLowerCase()){case"speech.phrase":const y=a.SimpleSpeechPhrase.fromJSON(p.textBody);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+y.Offset+y.Duration),y.RecognitionStatus!==a.RecognitionStatus.TooManyRequests&&y.RecognitionStatus!==a.RecognitionStatus.Error){const R=this.fireEventForResult(y,d);if(this.privLastResult=R.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,R)}catch{}}v=!0;break;case"speech.hypothesis":const f=a.SpeechHypothesis.fromJSON(p.textBody),m=f.Offset+this.privRequestSession.currentTurnAudioOffset;h=new i.SpeechRecognitionResult(this.privRequestSession.requestId,i.ResultReason.RecognizingSpeech,f.Text,f.Duration,m,f.Language,f.LanguageDetectionConfidence,void 0,void 0,p.textBody,d),this.privRequestSession.onHypothesis(m);const S=new i.SpeechRecognitionEventArgs(h,f.Duration,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,S)}catch{}v=!0;break;case"speech.keyword":const C=a.SpeechKeyword.fromJSON(p.textBody);h=new i.SpeechRecognitionResult(this.privRequestSession.requestId,C.Status==="Accepted"?i.ResultReason.RecognizedKeyword:i.ResultReason.NoMatch,C.Text,C.Duration,C.Offset,void 0,void 0,void 0,void 0,p.textBody,d),C.Status!=="Accepted"&&(this.privLastResult=h);const P=new i.SpeechRecognitionEventArgs(h,h.duration,h.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,P)}catch{}v=!0;break;case"audio":{const R=p.requestId.toUpperCase(),A=this.privTurnStateManager.GetTurn(R);try{p.binaryBody?A.audioStream.write(p.binaryBody):A.endAudioStream()}catch{}}v=!0;break;case"response":this.handleResponseMessage(p),v=!0;break}const g=new r.Deferred;return g.resolve(v),g.promise}async cancelRecognition(p,d,h,v,g){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&await this.privRequestSession.onStopRecognizing(),this.privDialogServiceConnector.canceled){const y=new i.PropertyCollection;y.setProperty(a.CancellationErrorCodePropertyName,i.CancellationErrorCode[v]);const f=new i.SpeechRecognitionCanceledEventArgs(h,g,v,void 0,p);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,f)}catch{}if(this.privSuccessCallback){const m=new i.SpeechRecognitionResult(void 0,i.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,g,void 0,y);try{this.privSuccessCallback(m),this.privSuccessCallback=void 0}catch{}}}}async listenOnce(p,d,h){this.privRecognizerConfig.recognitionMode=p,this.privSuccessCallback=d,this.privErrorCallback=h,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(i.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const v=this.connectImpl(),g=this.sendPreAudioMessages(),y=await this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),f=await this.privDialogAudioSource.format,m=await this.privDialogAudioSource.deviceInfo,S=new t.ReplayableAudioNode(y,f.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(S,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:m};try{await v,await g}catch(R){return await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.ConnectionFailure,R),Promise.resolve()}const C=new i.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,C),this.sendAudio(S).then(()=>{},async R=>{await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.RuntimeError,R)})}dialogConnectImpl(p){return this.privConnectionLoop=this.startMessageLoop(),p}receiveDialogMessageOverride(){const p=new r.Deferred,d=async()=>{try{const h=this.isDisposed(),v=!this.isDisposed()&&this.terminateMessageLoop;if(h||v){p.resolve(void 0);return}const y=await(await this.fetchConnection()).read();if(!y)return d();const f=c.SpeechConnectionMessage.fromConnectionMessage(y);switch(f.path.toLowerCase()){case"turn.start":{const w=f.requestId.toUpperCase(),M=this.privRequestSession.requestId.toUpperCase();w!==M?this.privTurnStateManager.StartTurn(w):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":const S=a.SpeechDetected.fromJSON(f.textBody),C=new i.RecognitionEventArgs(S.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,C);break;case"speech.enddetected":let P;f.textBody.length>0?P=f.textBody:P="{ Offset: 0 }";const R=a.SpeechDetected.fromJSON(P);this.privRequestSession.onServiceRecognized(R.Offset+this.privRequestSession.currentTurnAudioOffset);const A=new i.RecognitionEventArgs(R.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,A);break;case"turn.end":{const w=f.requestId.toUpperCase(),M=this.privRequestSession.requestId.toUpperCase();if(w!==M)this.privTurnStateManager.CompleteTurn(w);else{const b=new i.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(!1),(!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)&&this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,b),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(J){this.privErrorCallback&&this.privErrorCallback(J)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{await this.processTypeSpecificMessages(f)||this.serviceEvents&&this.serviceEvents.onEvent(new r.ServiceEvent(f.path.toLowerCase(),f.textBody))}catch{}}return d()}catch{this.terminateMessageLoop=!0,p.resolve()}};return d().catch(h=>{r.Events.instance.onEvent(new r.BackgroundEvent(h))}),p.promise}async startMessageLoop(){this.terminateMessageLoop=!1;try{await this.receiveDialogMessageOverride()}catch(p){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.RuntimeError,p)}return Promise.resolve()}async configConnection(p){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(await this.sendSpeechServiceConfig(p,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendAgentConfig(p),p)}async sendPreAudioMessages(){const p=await this.fetchConnection();this.addKeywordContextData(),await this.sendSpeechContext(p,!0),await this.sendAgentContext(p),await this.sendWaveHeader(p)}sendAgentConfig(p){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(i.PropertyId.Conversation_DialogType)===i.DialogServiceConfig.DialogTypes.CustomCommands){const h=this.agentConfig.get();h.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(h)}this.onEvent(new e.SendingAgentContextMessageEvent(this.agentConfig));const d=this.agentConfig.toJsonString();return this.agentConfigSent=!0,p.send(new c.SpeechConnectionMessage(r.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",d))}}sendAgentContext(p){const d=r.createGuid(),h=this.privDialogServiceConnector.properties.getProperty(i.PropertyId.Conversation_Speech_Activity_Template),g=JSON.stringify({channelData:"",context:{interactionId:d},messagePayload:typeof h===void 0?void 0:h,version:.5});return p.send(new c.SpeechConnectionMessage(r.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",g))}fireEventForResult(p,d){const h=a.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus),v=p.Offset+this.privRequestSession.currentTurnAudioOffset,g=new i.SpeechRecognitionResult(this.privRequestSession.requestId,h,p.DisplayText,p.Duration,v,p.Language,p.LanguageDetectionConfidence,void 0,void 0,JSON.stringify(p),d);return new i.SpeechRecognitionEventArgs(g,v,this.privRequestSession.sessionId)}handleResponseMessage(p){const d=JSON.parse(p.textBody);switch(d.messageType.toLowerCase()){case"message":const h=p.requestId.toUpperCase(),v=o.ActivityPayloadResponse.fromJSON(p.textBody),g=this.privTurnStateManager.GetTurn(h);if(v.conversationId){const m=this.agentConfig.get();m.botInfo.conversationId=v.conversationId,this.agentConfig.set(m)}const y=g.processActivityPayload(v,n.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(i.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),f=new i.ActivityReceivedEventArgs(v.messagePayload,y);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,f)}catch{}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new i.TurnStatusReceivedEventArgs(p.textBody))}catch{}break;default:r.Events.instance.onEvent(new r.BackgroundEvent(`Unexpected response of type ${d.messageType}. Ignoring.`));break}}onEvent(p){this.privEvents.onEvent(p),r.Events.instance.onEvent(p)}addKeywordContextData(){const p=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(p===void 0)return;const d=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),h=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),v=p.split(";"),g=d===void 0?[]:d.split(";"),y=h===void 0?[]:h.split(";"),f=[];for(let m=0;m<v.length;m++){const S={};S.text=v[m],m<g.length&&(S.offset=Number(g[m])),m<y.length&&(S.duration=Number(y[m])),f.push(S)}this.speechContext.setSection("invocationSource","VoiceActivationWithKeyword"),this.speechContext.setSection("keywordDetection",[{clientDetectedKeywords:f,onReject:{action:"EndOfTurn"},type:"startTrigger"}])}};return Mo.DialogServiceAdapter=u,Mo}var Eu={};Object.defineProperty(Eu,"__esModule",{value:!0});Eu.AgentConfig=void 0;class P_{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(e){this.iPrivConfig=e}}Eu.AgentConfig=P_;var wl={},bo={},Kn={};Object.defineProperty(Kn,"__esModule",{value:!0});Kn.ConversationConnectionConfig=void 0;const R_=Hs;class Ne extends R_.RestConfigBase{static get host(){return Ne.privHost}static get apiVersion(){return Ne.privApiVersion}static get clientAppId(){return Ne.privClientAppId}static get defaultLanguageCode(){return Ne.privDefaultLanguageCode}static get restPath(){return Ne.privRestPath}static get webSocketPath(){return Ne.privWebSocketPath}static get transcriptionEventKeys(){return Ne.privTranscriptionEventKeys}}Kn.ConversationConnectionConfig=Ne;Ne.privHost="dev.microsofttranslator.com";Ne.privRestPath="/capito/room";Ne.privApiVersion="2.0";Ne.privDefaultLanguageCode="en-US";Ne.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15";Ne.privWebSocketPath="/capito/translate";Ne.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"];var jg;function E_(){if(jg)return bo;jg=1,Object.defineProperty(bo,"__esModule",{value:!0}),bo.ConversationManager=void 0;const t=ye(),e=N,r=I(),n=Kn;let i=class{constructor(){this.privRequestParams=n.ConversationConnectionConfig.configParams,this.privErrors=n.ConversationConnectionConfig.restErrors,this.privHost=n.ConversationConnectionConfig.host,this.privApiVersion=n.ConversationConnectionConfig.apiVersion,this.privRestPath=n.ConversationConnectionConfig.restPath,this.privRestAdapter=new t.RestMessageAdapter({})}createOrJoin(a,o,c,u){try{e.Contracts.throwIfNullOrUndefined(a,"args");const l=a.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,n.ConversationConnectionConfig.defaultLanguageCode),p=a.getProperty(r.PropertyId.ConversationTranslator_Name,"conversation_host"),d=a.getProperty(r.PropertyId.ConversationTranslator_Host,this.privHost),h=a.getProperty(r.PropertyId.ConversationTranslator_CorrelationId),v=a.getProperty(r.PropertyId.SpeechServiceConnection_Key),g=a.getProperty(r.PropertyId.SpeechServiceConnection_Region),y=a.getProperty(r.PropertyId.SpeechServiceAuthorization_Token);e.Contracts.throwIfNullOrWhitespace(l,"languageCode"),e.Contracts.throwIfNullOrWhitespace(p,"nickname"),e.Contracts.throwIfNullOrWhitespace(d,"endpointHost");const f={};f[this.privRequestParams.apiVersion]=this.privApiVersion,f[this.privRequestParams.languageCode]=l,f[this.privRequestParams.nickname]=p;const m={};h&&(m[this.privRequestParams.correlationId]=h),m[this.privRequestParams.clientAppId]=n.ConversationConnectionConfig.clientAppId,o!==void 0?f[this.privRequestParams.roomId]=o:(e.Contracts.throwIfNullOrUndefined(g,this.privErrors.authInvalidSubscriptionRegion),m[this.privRequestParams.subscriptionRegion]=g,v?m[this.privRequestParams.subscriptionKey]=v:y?m[this.privRequestParams.authorization]=`Bearer ${y}`:e.Contracts.throwIfNullOrUndefined(v,this.privErrors.authInvalidSubscriptionKey));const S={};S.headers=m,this.privRestAdapter.options=S;const C=`https://${d}${this.privRestPath}`;this.privRestAdapter.request(t.RestRequestType.Post,C,f,null).then(P=>{const R=t.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,P.headers);if(!P.ok){if(u){let w=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",P.status.toString()),M;try{M=JSON.parse(P.data),w+=` [${M.error.code}: ${M.error.message}]`}catch{w+=` [${P.data}]`}R&&(w+=` ${R}`),u(w)}return}const A=JSON.parse(P.data);if(A&&(A.requestId=R),c){try{c(A)}catch(w){u&&u(w)}c=void 0}}).catch(()=>{})}catch(l){if(u)if(l instanceof Error){const p=l;u(p.name+": "+p.message)}else u(l)}}leave(a,o){return new Promise((c,u)=>{try{e.Contracts.throwIfNullOrUndefined(a,this.privErrors.invalidArgs.replace("{arg}","config")),e.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","token"));const l=a.getProperty(r.PropertyId.ConversationTranslator_Host,this.privHost),p=a.getProperty(r.PropertyId.ConversationTranslator_CorrelationId),d={};d[this.privRequestParams.apiVersion]=this.privApiVersion,d[this.privRequestParams.sessionToken]=o;const h={};p&&(h[this.privRequestParams.correlationId]=p);const v={};v.headers=h,this.privRestAdapter.options=v;const g=`https://${l}${this.privRestPath}`;this.privRestAdapter.request(t.RestRequestType.Delete,g,d,null).then(y=>{y.ok,c()}).catch(()=>{})}catch(l){if(l instanceof Error){const p=l;u(p.name+": "+p.message)}else u(l)}})}};return bo.ConversationManager=i,bo}var xr={},Do={},wu={},Vs={};Object.defineProperty(Vs,"__esModule",{value:!0});Vs.ConversationConnectionMessage=void 0;const w_=D();class A_ extends w_.ConnectionMessage{constructor(e,r,n,i){super(e,r,n,i);const s=JSON.parse(this.textBody);s.type!==void 0&&(this.privConversationMessageType=s.type)}get conversationMessageType(){return this.privConversationMessageType}}Vs.ConversationConnectionMessage=A_;Object.defineProperty(wu,"__esModule",{value:!0});wu.ConversationWebsocketMessageFormatter=void 0;const Br=D(),Lg=Vs;class I_{toConnectionMessage(e){const r=new Br.Deferred;try{if(e.messageType===Br.MessageType.Text){const n=new Lg.ConversationConnectionMessage(e.messageType,e.textContent,{},e.id);r.resolve(n)}else e.messageType===Br.MessageType.Binary&&r.resolve(new Lg.ConversationConnectionMessage(e.messageType,e.binaryContent,void 0,e.id))}catch(n){r.reject(`Error formatting the message. Error: ${n}`)}return r.promise}fromConnectionMessage(e){const r=new Br.Deferred;try{if(e.messageType===Br.MessageType.Text){const n=`${e.textBody?e.textBody:""}`;r.resolve(new Br.RawWebsocketMessage(Br.MessageType.Text,n,e.id))}}catch(n){r.reject(`Error formatting the message. ${n}`)}return r.promise}}wu.ConversationWebsocketMessageFormatter=I_;var xg;function T_(){if(xg)return Do;xg=1,Object.defineProperty(Do,"__esModule",{value:!0}),Do.ConversationConnectionFactory=void 0;const t=ye(),e=D(),r=N,n=I(),i=Pt(),s=Kn,a=wu;let o=class extends i.ConnectionFactoryBase{create(u,l,p){const d=u.parameters.getProperty(n.PropertyId.ConversationTranslator_Host,s.ConversationConnectionConfig.host),h=u.parameters.getProperty(n.PropertyId.ConversationTranslator_CorrelationId,e.createGuid()),v=`wss://${d}${s.ConversationConnectionConfig.webSocketPath}`,g=u.parameters.getProperty(n.PropertyId.ConversationTranslator_Token,void 0);r.Contracts.throwIfNullOrUndefined(g,"token");const y={};y[s.ConversationConnectionConfig.configParams.apiVersion]=s.ConversationConnectionConfig.apiVersion,y[s.ConversationConnectionConfig.configParams.token]=g,y[s.ConversationConnectionConfig.configParams.correlationId]=h;const f=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(v,y,{},new a.ConversationWebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(u),f,p)}};return Do.ConversationConnectionFactory=o,Do}var No={},Au={};Object.defineProperty(Au,"__esModule",{value:!0});Au.ConversationRequestSession=void 0;const Al=D();class __{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privSessionId=e,this.privRequestId=Al.createNoDashGuid(),this.privRequestCompletionDeferral=new Al.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(e,r){this.privSessionId=r}onAuthCompleted(e){e&&this.onComplete()}onConnectionEstablishCompleted(e){e!==200&&e===403&&this.onComplete()}onServiceTurnEndResponse(e){e?this.privRequestId=Al.createNoDashGuid():this.onComplete()}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)await e.detach()}}onComplete(){}}Au.ConversationRequestSession=__;var Le={},Bg;function aP(){if(Bg)return Le;Bg=1,Object.defineProperty(Le,"__esModule",{value:!0}),Le.ConversationReceivedTranslationEventArgs=Le.ParticipantsListEventArgs=Le.ParticipantAttributeEventArgs=Le.ParticipantEventArgs=Le.LockRoomEventArgs=Le.MuteAllEventArgs=void 0;const t=I();class e extends t.SessionEventArgs{constructor(c,u){super(u),this.privIsMuted=c}get isMuted(){return this.privIsMuted}}Le.MuteAllEventArgs=e;class r extends t.SessionEventArgs{constructor(c,u){super(u),this.privIsLocked=c}get isMuted(){return this.privIsLocked}}Le.LockRoomEventArgs=r;class n extends t.SessionEventArgs{constructor(c,u){super(u),this.privParticipant=c}get participant(){return this.privParticipant}}Le.ParticipantEventArgs=n;class i extends t.SessionEventArgs{constructor(c,u,l,p){super(p),this.privKey=u,this.privValue=l,this.privParticipantId=c}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}}Le.ParticipantAttributeEventArgs=i;class s extends t.SessionEventArgs{constructor(c,u,l,p,d,h,v,g,y){super(y),this.privRoomId=c,this.privSessionToken=u,this.privTranslateTo=l,this.privProfanityFilter=p,this.privRoomProfanityFilter=d,this.privIsRoomLocked=h,this.privIsRoomLocked=v,this.privParticipants=g}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}}Le.ParticipantsListEventArgs=s;class a{constructor(c,u,l){this.privPayload=u,this.privCommand=c,this.privSessionId=l}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}}return Le.ConversationReceivedTranslationEventArgs=a,Le}var Ht={};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.ConversationTranslatorCommandTypes=Ht.ConversationTranslatorMessageTypes=Ht.InternalParticipants=void 0;class O_{constructor(e=[],r){this.participants=e,this.meId=r}addOrUpdateParticipant(e){if(e===void 0)return;const r=this.getParticipantIndex(e.id);return r>-1?this.participants.splice(r,1,e):this.participants.push(e),this.getParticipant(e.id)}getParticipantIndex(e){return this.participants.findIndex(r=>r.id===e)}getParticipant(e){return this.participants.find(r=>r.id===e)}deleteParticipant(e){this.participants=this.participants.filter(r=>r.id!==e)}get host(){return this.participants.find(e=>e.isHost===!0)}get me(){return this.getParticipant(this.meId)}}Ht.InternalParticipants=O_;Ht.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"};Ht.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"};var cP={},Iu={};Object.defineProperty(Iu,"__esModule",{value:!0});Iu.CommandResponsePayload=void 0;const k_=t=>JSON.parse(t);class Yd{constructor(e){this.privCommandResponse=k_(e)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(e){return new Yd(e)}}Iu.CommandResponsePayload=Yd;var Ln={};Object.defineProperty(Ln,"__esModule",{value:!0});Ln.ParticipantPayloadResponse=Ln.ParticipantsListPayloadResponse=void 0;const M_=t=>JSON.parse(t),b_=t=>JSON.parse(t);class eh{constructor(e){this.privParticipantsPayloadResponse=M_(e)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(e){return new eh(e)}}Ln.ParticipantsListPayloadResponse=eh;class th{constructor(e){this.privParticipantPayloadResponse=b_(e)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(e){return new th(e)}}Ln.ParticipantPayloadResponse=th;var xn={};Object.defineProperty(xn,"__esModule",{value:!0});xn.TextResponsePayload=xn.SpeechResponsePayload=void 0;const D_=t=>JSON.parse(t),N_=t=>JSON.parse(t);class rh{constructor(e){this.privSpeechResponse=D_(e)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return this.privSpeechResponse.type==="final"}static fromJSON(e){return new rh(e)}}xn.SpeechResponsePayload=rh;class nh{constructor(e){this.privTextResponse=N_(e)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(e){return new nh(e)}}xn.TextResponsePayload=nh;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Iu;Object.defineProperty(t,"CommandResponsePayload",{enumerable:!0,get:function(){return e.CommandResponsePayload}});var r=Ln;Object.defineProperty(t,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return r.ParticipantsListPayloadResponse}}),Object.defineProperty(t,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return r.ParticipantPayloadResponse}});var n=xn;Object.defineProperty(t,"SpeechResponsePayload",{enumerable:!0,get:function(){return n.SpeechResponsePayload}}),Object.defineProperty(t,"TextResponsePayload",{enumerable:!0,get:function(){return n.TextResponsePayload}})})(cP);var Fg;function z_(){if(Fg)return No;Fg=1,Object.defineProperty(No,"__esModule",{value:!0}),No.ConversationServiceAdapter=void 0;const t=D(),e=I(),r=k(),n=Vs,i=Au,s=aP(),a=Ht,o=cP;let c=class extends r.ServiceRecognizerBase{constructor(l,p,d,h,v){super(l,p,d,h,v),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=v,this.privConversationAuthentication=l,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=g=>this.conversationConnectImpl(g),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new i.ConversationRequestSession(t.createNoDashGuid()),this.privConversationConnectionFactory=p,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}async dispose(l){this.privConversationIsDisposed=!0,this.privConnectionConfigPromise!==void 0&&await(await this.privConnectionConfigPromise).dispose(l),await super.dispose(l)}async sendMessage(l){return(await this.fetchConnection()).send(new n.ConversationConnectionMessage(t.MessageType.Text,l))}async sendMessageAsync(l){await(await this.fetchConnection()).send(new n.ConversationConnectionMessage(t.MessageType.Text,l))}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,e.CancellationReason.Error,e.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}async processTypeSpecificMessages(){return!0}cancelRecognition(l,p,d,h,v){this.terminateMessageLoop=!0;const g=new e.ConversationTranslationCanceledEventArgs(d,v,h,void 0,l);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,g)}catch{}}async conversationConnectImpl(l){return this.privConnectionLoop=this.startMessageLoop(),l}async receiveConversationMessageOverride(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();const l=new t.Deferred;try{const d=await(await this.fetchConnection()).read();if(this.isDisposed()||this.terminateMessageLoop)return l.resolve(),Promise.resolve();if(!d)return this.receiveConversationMessageOverride();const h=this.privConversationRequestSession.sessionId,v=d.conversationMessageType.toLowerCase();let g=!1;try{switch(v){case"info":case"participant_command":case"command":const y=o.CommandResponsePayload.fromJSON(d.textBody);switch(y.command.toLowerCase()){case"participantlist":const R=o.ParticipantsListPayloadResponse.fromJSON(d.textBody),A=R.participants.map(pe=>({avatar:pe.avatar,displayName:pe.nickname,id:pe.participantId,isHost:pe.ishost,isMuted:pe.ismuted,isUsingTts:pe.usetts,preferredLanguage:pe.locale}));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new s.ParticipantsListEventArgs(R.roomid,R.token,R.translateTo,R.profanityFilter,R.roomProfanityFilter,R.roomLocked,R.muteAll,A,h));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(y.participantId,a.ConversationTranslatorCommandTypes.setTranslateToLanguages,y.value,h));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(y.participantId,a.ConversationTranslatorCommandTypes.setProfanityFiltering,y.value,h));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(y.participantId,a.ConversationTranslatorCommandTypes.setMute,y.value,h));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new s.MuteAllEventArgs(y.value,h));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new e.ConversationExpirationEventArgs(y.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(y.participantId,a.ConversationTranslatorCommandTypes.setUseTTS,y.value,h));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new s.LockRoomEventArgs(y.value,h));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(y.participantId,a.ConversationTranslatorCommandTypes.changeNickname,y.value,h));break;case"joinsession":const w=o.ParticipantPayloadResponse.fromJSON(d.textBody),M={avatar:w.avatar,displayName:w.nickname,id:w.participantId,isHost:w.ishost,isMuted:w.ismuted,isUsingTts:w.usetts,preferredLanguage:w.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new s.ParticipantEventArgs(M,h));break;case"leavesession":const b={id:y.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new s.ParticipantEventArgs(b,h));break;case"disconnectsession":const J={id:y.participantId};break;case"token":const Rt=new r.CognitiveTokenAuthentication(()=>{const pe=y.token;return Promise.resolve(pe)},()=>{const pe=y.token;return Promise.resolve(pe)});this.authentication=Rt,this.privConversationServiceConnector.onToken(Rt);break;default:break}break;case"partial":case"final":const f=o.SpeechResponsePayload.fromJSON(d.textBody),m=v==="final"?e.ResultReason.TranslatedParticipantSpeech:e.ResultReason.TranslatingParticipantSpeech,S=new e.ConversationTranslationResult(f.participantId,this.getTranslations(f.translations),f.language,f.id,m,f.recognition,void 0,void 0,d.textBody,void 0);f.isFinal?((S.text!==void 0&&S.text.length>0||f.id===this.privLastPartialUtteranceId)&&(g=!0),g&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new s.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.final,S,h))):S.text!==void 0&&(this.privLastPartialUtteranceId=f.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new s.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.partial,S,h)));break;case"translated_message":const C=o.TextResponsePayload.fromJSON(d.textBody),P=new e.ConversationTranslationResult(C.participantId,this.getTranslations(C.translations),C.language,void 0,void 0,C.originalText,void 0,void 0,void 0,d.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new s.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.instantMessage,P,h));break;default:break}}catch{}return this.receiveConversationMessageOverride()}catch{this.terminateMessageLoop=!0}return l.promise}async startMessageLoop(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;const l=this.receiveConversationMessageOverride();try{return await l}catch(p){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",e.CancellationReason.Error,e.CancellationErrorCode.RuntimeError,p),null}}configConnection(){return this.isDisposed()?Promise.resolve(void 0):this.privConnectionConfigPromise!==void 0?this.privConnectionConfigPromise.then(l=>l.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise,()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection())):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then(l=>l),this.privConnectionConfigPromise)}getTranslations(l){let p;if(l!==void 0){p=new e.Translations;for(const d of l)p.set(d.lang,d.translation)}return p}};return No.ConversationServiceAdapter=c,No}var qg;function j_(){if(qg)return xr;qg=1,Object.defineProperty(xr,"__esModule",{value:!0}),xr.ConversationTranslatorRecognizer=xr.ConversationRecognizerFactory=void 0;const t=k(),e=D(),r=N,n=I(),i=T_(),s=z_();class a{static fromConfig(u,l,p){return new o(u,l,p)}}xr.ConversationRecognizerFactory=a;let o=class extends n.Recognizer{constructor(u,l,p){const d=l;r.Contracts.throwIfNull(d,"speechConfig");const h=u;r.Contracts.throwIfNull(h,"conversationImpl"),super(p,d.properties,new i.ConversationConnectionFactory),this.privConversation=h,this.privIsDisposed=!1,this.privProperties=d.properties.clone(),this.privConnection=n.Connection.fromRecognizer(this),this.privProperties.getProperty(n.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?(this.privSetTimeout=e.Timeout.setTimeout,this.privClearTimeout=e.Timeout.clearTimeout):typeof window<"u"?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}set connected(u){this.privConnection.connected=u}set disconnected(u){this.privConnection.disconnected=u}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(u,l,p){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfNullOrWhitespace(u,"token"),this.privReco.conversationTranslatorToken=u,this.resetConversationTimeout(),this.privReco.connectAsync(l,p)}catch(d){if(p)if(d instanceof Error){const h=d;p(h.name+": "+h.message)}else p(d)}}disconnect(u,l){try{r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then(()=>{u&&u()},p=>{l&&l(p)})}catch(p){if(l)if(p instanceof Error){const d=p;l(d.name+": "+d.message)}else l(p);this.dispose(!0).catch(d=>{e.Events.instance.onEvent(new e.BackgroundEvent(d))})}}sendRequest(u,l,p){try{r.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(u,l,p)}catch(d){if(p)if(d instanceof Error){const h=d;p(h.name+": "+h.message)}else p(d);this.dispose(!0).catch(h=>{e.Events.instance.onEvent(new e.BackgroundEvent(h))})}}onToken(u){this.privConversation.onToken(u)}async close(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,await this.dispose(!0))}async dispose(u){this.privIsDisposed||u&&(this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),await super.dispose(u))}createRecognizerConfig(u){return new t.RecognizerConfig(u,this.privProperties)}createServiceRecognizer(u,l,p,d){const h=p;return new s.ConversationServiceAdapter(u,l,h,d,this)}sendMessage(u,l,p){const d=this.privReco;((v,g,y)=>{v!==void 0?v.then(()=>{try{g&&g()}catch(f){y&&y(`'Unhandled error on promise callback: ${f}'`)}},f=>{try{y&&y(f)}catch{}}):y&&y("Null promise")})(d.sendMessageAsync(u),l,p),this.resetConversationTimeout()}resetConversationTimeout(){this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout(()=>{this.sendRequest(this.privConversation.getKeepAlive())},6e4)}};return xr.ConversationTranslatorRecognizer=o,xr}var zo={},Ug;function L_(){if(Ug)return zo;Ug=1,Object.defineProperty(zo,"__esModule",{value:!0}),zo.TranscriberRecognizer=void 0;const t=D(),e=N,r=I(),n=k();let i=class extends r.Recognizer{constructor(a,o){const c=a;e.Contracts.throwIfNull(c,"speechTranslationConfig");const u=o;e.Contracts.throwIfNull(u,"audioConfigImpl"),e.Contracts.throwIfNullOrWhitespace(c.speechRecognitionLanguage,r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),super(o,c.properties,new n.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}get speechRecognitionLanguage(){return e.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){e.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}set conversation(a){e.Contracts.throwIfNullOrUndefined(a,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=a}getConversationInfo(){return e.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(a){e.Contracts.throwIfNullOrUndefined(a,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=a}getMeetingInfo(){return e.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(a,o){t.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(n.RecognitionMode.Conversation),a,o)}stopContinuousRecognitionAsync(a,o){t.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,o)}async close(){this.privDisposedRecognizer||await this.dispose(!0)}async pushConversationEvent(a,o){const c=this.privReco;e.Contracts.throwIfNullOrUndefined(c,"serviceRecognizer"),await c.sendSpeechEventAsync(a,o)}async pushMeetingEvent(a,o){const c=this.privReco;e.Contracts.throwIfNullOrUndefined(c,"serviceRecognizer"),await c.sendMeetingSpeechEventAsync(a,o)}async enforceAudioGating(){const c=(await this.audioConfig.format).channels;if(c===1){if(this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()!=="true")throw new Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(c!==8)throw new Error(`Unsupported audio configuration: Detected ${c}-channel audio`)}connectMeetingCallbacks(a){this.isMeetingRecognizer=!0,this.canceled=(o,c)=>{a.canceled&&a.canceled(a,c)},this.recognizing=(o,c)=>{a.transcribing&&a.transcribing(a,c)},this.recognized=(o,c)=>{a.transcribed&&a.transcribed(a,c)},this.sessionStarted=(o,c)=>{a.sessionStarted&&a.sessionStarted(a,c)},this.sessionStopped=(o,c)=>{a.sessionStopped&&a.sessionStopped(a,c)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}async dispose(a){this.privDisposedRecognizer||(a&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(a))}createRecognizerConfig(a){return new n.RecognizerConfig(a,this.properties)}createServiceRecognizer(a,o,c,u){const l=c;return new n.TranscriptionServiceRecognizer(a,o,l,u,this)}};return zo.TranscriberRecognizer=i,zo}var Wg;function x_(){return Wg||(Wg=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=E_();Object.defineProperty(t,"ConversationManager",{enumerable:!0,get:function(){return e.ConversationManager}});var r=Kn;Object.defineProperty(t,"ConversationConnectionConfig",{enumerable:!0,get:function(){return r.ConversationConnectionConfig}});var n=j_();Object.defineProperty(t,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return n.ConversationRecognizerFactory}});var i=L_();Object.defineProperty(t,"TranscriberRecognizer",{enumerable:!0,get:function(){return i.TranscriberRecognizer}});var s=aP();Object.defineProperty(t,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return s.ConversationReceivedTranslationEventArgs}}),Object.defineProperty(t,"LockRoomEventArgs",{enumerable:!0,get:function(){return s.LockRoomEventArgs}}),Object.defineProperty(t,"MuteAllEventArgs",{enumerable:!0,get:function(){return s.MuteAllEventArgs}}),Object.defineProperty(t,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return s.ParticipantAttributeEventArgs}}),Object.defineProperty(t,"ParticipantEventArgs",{enumerable:!0,get:function(){return s.ParticipantEventArgs}}),Object.defineProperty(t,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return s.ParticipantsListEventArgs}});var a=Ht;Object.defineProperty(t,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return a.ConversationTranslatorCommandTypes}}),Object.defineProperty(t,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return a.ConversationTranslatorMessageTypes}}),Object.defineProperty(t,"InternalParticipants",{enumerable:!0,get:function(){return a.InternalParticipants}})}(wl)),wl}var ih={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisAudioMetadata=t.MetadataType=void 0,function(r){r.WordBoundary="WordBoundary",r.Bookmark="Bookmark",r.Viseme="Viseme",r.SentenceBoundary="SentenceBoundary",r.SessionEnd="SessionEnd",r.AvatarSignal="TalkingAvatarSignal"}(t.MetadataType||(t.MetadataType={}));class e{constructor(n){this.privSynthesisAudioMetadata=JSON.parse(n)}static fromJSON(n){return new e(n)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}t.SynthesisAudioMetadata=e})(ih);var jo={},Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});Tt.SynthesisStartedEvent=Tt.ConnectingToSynthesisServiceEvent=Tt.SynthesisTriggeredEvent=Tt.SpeechSynthesisEvent=void 0;const Hg=D();class Tu extends Hg.PlatformEvent{constructor(e,r,n=Hg.EventType.Info){super(e,n),this.privRequestId=r}get requestId(){return this.privRequestId}}Tt.SpeechSynthesisEvent=Tu;class B_ extends Tu{constructor(e,r,n){super("SynthesisTriggeredEvent",e),this.privSessionAudioDestinationId=r,this.privTurnAudioDestinationId=n}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}}Tt.SynthesisTriggeredEvent=B_;class F_ extends Tu{constructor(e,r){super("ConnectingToSynthesisServiceEvent",e),this.privAuthFetchEventId=r}get authFetchEventId(){return this.privAuthFetchEventId}}Tt.ConnectingToSynthesisServiceEvent=F_;class q_ extends Tu{constructor(e,r){super("SynthesisStartedEvent",e),this.privAuthFetchEventId=r}get authFetchEventId(){return this.privAuthFetchEventId}}Tt.SynthesisStartedEvent=q_;var Vg;function U_(){if(Vg)return jo;Vg=1,Object.defineProperty(jo,"__esModule",{value:!0}),jo.SynthesisTurn=void 0;const t=D(),e=Pe,r=I(),n=ih,i=Tt;let s=class Mp{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=t.createNoDashGuid(),this.privTurnDeferral=new t.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(o){this.privStreamId=o}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(o){this.privAudioOutputFormat=o}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){const o=new r.PropertyCollection;return o.setProperty(r.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),o}}async getAllReceivedAudio(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(await this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null}async getAllReceivedAudioWithHeader(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const o=await this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(o),this.privReceivedAudioWithHeader}else return this.getAllReceivedAudio()}startNewSynthesis(o,c,u,l){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=o,this.privRawText=c,this.privIsSSML=u,this.privAudioOutputStream=new e.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",l!==void 0&&(this.privTurnAudioDestination=l,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new i.SynthesisTriggeredEvent(this.requestId,void 0,l===void 0?void 0:l.id()))}onPreConnectionStart(o){this.privAuthFetchEventId=o,this.onEvent(new i.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(o){o&&this.onComplete()}onConnectionEstablishCompleted(o){if(o===200){this.onEvent(new i.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),this.privBytesReceived=0;return}else o===403&&this.onComplete()}onServiceResponseMessage(o){const c=JSON.parse(o);this.streamId=c.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(o){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new t.Deferred;const c=JSON.parse(o);c.webrtc&&(this.privWebRTCSDP=c.webrtc.connectionString)}onAudioChunkReceived(o){this.isSynthesizing&&(this.privAudioOutputStream.write(o),this.privBytesReceived+=o.byteLength,this.privTurnAudioDestination!==void 0&&this.privTurnAudioDestination.write(o))}onTextBoundaryEvent(o){this.updateTextOffset(o.Data.text.Text,o.Type)}onVisemeMetadataReceived(o){o.Data.AnimationChunk!==void 0&&(this.privPartialVisemeAnimation+=o.Data.AnimationChunk)}onSessionEnd(o){this.privAudioDuration=o.Data.Offset}async constructSynthesisResult(){const o=await this.getAllReceivedAudioWithHeader();return new r.SpeechSynthesisResult(this.requestId,r.ResultReason.SynthesizingAudioCompleted,o,void 0,this.extraProperties,this.audioDuration)}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const o=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",o}onEvent(o){t.Events.instance.onEvent(o)}static isXmlTag(o){return o.length>=2&&o[0]==="<"&&o[o.length-1]===">"}updateTextOffset(o,c){c===n.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(o,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+o.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!Mp.isXmlTag(o)&&this.updateTextOffset(o,c))):(this.privSentenceOffset=this.privRawText.indexOf(o,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+o.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!Mp.isXmlTag(o)&&this.updateTextOffset(o,c)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,this.privTurnAudioDestination!==void 0&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}async readAllAudioFromStream(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{await this.privAudioOutputStream.read(this.privReceivedAudio)}catch{this.privReceivedAudio=new ArrayBuffer(0)}}}withinXmlTag(o){return this.privRawText.indexOf("<",o+1)>this.privRawText.indexOf(">",o+1)}};return jo.SynthesisTurn=s,jo}var Lo={},Kg;function W_(){if(Kg)return Lo;Kg=1,Object.defineProperty(Lo,"__esModule",{value:!0}),Lo.SynthesisAdapterBase=void 0;const t=D(),e=I(),r=k(),n=Gt;let i=class{constructor(a,o,c,u){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!a)throw new t.ArgumentNullError("authentication");if(!o)throw new t.ArgumentNullError("connectionFactory");if(!c)throw new t.ArgumentNullError("synthesizerConfig");this.privAuthentication=a,this.privConnectionFactory=o,this.privSynthesizerConfig=c,this.privIsDisposed=!1,this.privSessionAudioDestination=u,this.privSynthesisTurn=new r.SynthesisTurn,this.privConnectionEvents=new t.EventSource,this.privServiceEvents=new t.EventSource,this.privSynthesisContext=new r.SynthesisContext,this.privAgentConfig=new r.AgentConfig,this.connectionEvents.attach(l=>{if(l.name==="ConnectionClosedEvent"){const p=l;p.statusCode!==1e3&&this.cancelSynthesisLocal(e.CancellationReason.Error,p.statusCode===1007?e.CancellationErrorCode.BadRequestParameters:e.CancellationErrorCode.ConnectionFailure,`${p.reason} websocket error code: ${p.statusCode}`)}})}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(a){this.privActivityTemplate=a}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(a){this.privAudioOutputFormat=a,this.privSynthesisTurn.audioOutputFormat=a,this.privSessionAudioDestination!==void 0&&(this.privSessionAudioDestination.format=a),this.synthesisContext!==void 0&&(this.synthesisContext.audioOutputFormat=a)}isDisposed(){return this.privIsDisposed}async dispose(a){this.privIsDisposed=!0,this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.close(),this.privConnectionConfigurationPromise!==void 0&&await(await this.privConnectionConfigurationPromise).dispose(a)}async connect(){await this.connectImpl()}async sendNetworkMessage(a,o){const c=typeof o=="string"?t.MessageType.Text:t.MessageType.Binary,u=typeof o=="string"?"application/json":"";return(await this.fetchConnection()).send(new n.SpeechConnectionMessage(c,a,this.privSynthesisTurn.requestId,u,o))}async Speak(a,o,c,u,l,p){let d;if(o?d=a:d=this.privSynthesizer.buildSsml(a),this.speakOverride!==void 0)return this.speakOverride(d,c,u,l);this.privSuccessCallback=u,this.privErrorCallback=l,this.privSynthesisTurn.startNewSynthesis(c,a,o,p);try{await this.connectImpl();const h=await this.fetchConnection();await this.sendSynthesisContext(h),await this.sendSsmlMessage(h,d,c),this.onSynthesisStarted(c),this.receiveMessage()}catch(h){return this.cancelSynthesisLocal(e.CancellationReason.Error,e.CancellationErrorCode.ConnectionFailure,h),Promise.reject(h)}}async stopSpeaking(){return await this.connectImpl(),(await this.fetchConnection()).send(new n.SpeechConnectionMessage(t.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))}cancelSynthesis(a,o,c,u){const l=new e.PropertyCollection;l.setProperty(r.CancellationErrorCodePropertyName,e.CancellationErrorCode[c]);const p=new e.SpeechSynthesisResult(a,e.ResultReason.Canceled,void 0,u,l);if(this.onSynthesisCancelled(p),this.privSuccessCallback)try{this.privSuccessCallback(p)}catch{}}cancelSynthesisLocal(a,o,c){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,a,o,c))}processTypeSpecificMessages(a){return!0}async receiveMessage(){try{const o=await(await this.fetchConnection()).read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!o)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;const c=n.SpeechConnectionMessage.fromConnectionMessage(o);if(c.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(c.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(c.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(c.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===c.streamId.toLowerCase()&&c.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(c.binaryBody),this.onSynthesizing(c.binaryBody),this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.write(c.binaryBody));break;case"audio.metadata":const u=r.SynthesisAudioMetadata.fromJSON(c.textBody).Metadata;for(const p of u)switch(p.Type){case r.MetadataType.WordBoundary:case r.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(p);const d=new e.SpeechSynthesisWordBoundaryEventArgs(p.Data.Offset,p.Data.Duration,p.Data.text.Text,p.Data.text.Length,p.Type===r.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,p.Data.text.BoundaryType);this.onWordBoundary(d);break;case r.MetadataType.Bookmark:const h=new e.SpeechSynthesisBookmarkEventArgs(p.Data.Offset,p.Data.Bookmark);this.onBookmarkReached(h);break;case r.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(p),p.Data.IsLastAnimation){const v=new e.SpeechSynthesisVisemeEventArgs(p.Data.Offset,p.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(v)}break;case r.MetadataType.AvatarSignal:this.onAvatarEvent(p);break;case r.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(p);break}break;case"turn.end":this.privSynthesisTurn.onServiceTurnEndResponse();let l;try{l=await this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(l)}catch(p){this.privErrorCallback&&this.privErrorCallback(p)}this.onSynthesisCompleted(l);break;default:this.processTypeSpecificMessages(c)||this.privServiceEvents&&this.serviceEvents.onEvent(new t.ServiceEvent(c.path.toLowerCase(),c.textBody))}return this.receiveMessage()}catch{}}sendSynthesisContext(a){this.setSynthesisContextSynthesisSection();const o=this.synthesisContext.toJSON();if(o)return a.send(new n.SpeechConnectionMessage(t.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",o))}setSpeechConfigSynthesisSection(){}connectImpl(a=!1){if(this.privConnectionPromise!=null)return this.privConnectionPromise.then(c=>c.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()));this.privAuthFetchEventId=t.createNoDashGuid(),this.privConnectionId=t.createNoDashGuid(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);const o=a?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=o.then(async c=>{this.privSynthesisTurn.onAuthCompleted(!1);const u=this.privConnectionFactory.create(this.privSynthesizerConfig,c,this.privConnectionId);u.events.attach(p=>{this.connectionEvents.onEvent(p)});const l=await u.open();return l.statusCode===200?(this.privSynthesisTurn.onConnectionEstablishCompleted(l.statusCode),Promise.resolve(u)):l.statusCode===403&&!a?this.connectImpl(!0):(this.privSynthesisTurn.onConnectionEstablishCompleted(l.statusCode),Promise.reject(`Unable to contact server. StatusCode: ${l.statusCode},
                    ${this.privSynthesizerConfig.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Url)} Reason: ${l.reason}`))},c=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(c)}),this.privConnectionPromise.catch(()=>{}),this.privConnectionPromise}sendSpeechServiceConfig(a,o){if(o)return a.send(new n.SpeechConnectionMessage(t.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",o))}sendSsmlMessage(a,o,c){return a.send(new n.SpeechConnectionMessage(t.MessageType.Text,"ssml",c,"application/ssml+xml",o))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(a=>a.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async configureConnection(){const a=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(a):(this.setSpeechConfigSynthesisSection(),await this.sendSpeechServiceConfig(a,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),a)}onAvatarEvent(a){}onSynthesisStarted(a){}onSynthesizing(a){}onSynthesisCancelled(a){}onSynthesisCompleted(a){}onWordBoundary(a){}onVisemeReceived(a){}onBookmarkReached(a){}};return Lo.SynthesisAdapterBase=i,i.telemetryDataEnabled=!0,Lo}var xo={},$g;function H_(){if($g)return xo;$g=1,Object.defineProperty(xo,"__esModule",{value:!0}),xo.AvatarSynthesisAdapter=void 0;const t=I(),e=k();let r=class extends e.SynthesisAdapterBase{constructor(i,s,a,o,c){super(i,s,a,void 0),this.privAvatarSynthesizer=o,this.privSynthesizer=o,this.privAvatarConfig=c}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){var i,s,a,o,c,u,l,p,d,h,v,g,y,f,m,S;this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:(i=this.privAvatarConfig.videoFormat)==null?void 0:i.bitrate,codec:(s=this.privAvatarConfig.videoFormat)==null?void 0:s.codec,crop:{bottomRight:{x:(c=(o=(a=this.privAvatarConfig.videoFormat)==null?void 0:a.cropRange)==null?void 0:o.bottomRight)==null?void 0:c.x,y:(p=(l=(u=this.privAvatarConfig.videoFormat)==null?void 0:u.cropRange)==null?void 0:l.bottomRight)==null?void 0:p.y},topLeft:{x:(v=(h=(d=this.privAvatarConfig.videoFormat)==null?void 0:d.cropRange)==null?void 0:h.topLeft)==null?void 0:v.x,y:(f=(y=(g=this.privAvatarConfig.videoFormat)==null?void 0:g.cropRange)==null?void 0:y.topLeft)==null?void 0:f.y}},resolution:{height:(m=this.privAvatarConfig.videoFormat)==null?void 0:m.height,width:(S=this.privAvatarConfig.videoFormat)==null?void 0:S.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(t.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,style:this.privAvatarConfig.style}}}onAvatarEvent(i){if(this.privAvatarSynthesizer.avatarEventReceived){const s=new t.AvatarEventArgs(i.Data.Offset,i.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,s)}catch{}}}};return xo.AvatarSynthesisAdapter=r,xo}var Bo={},Jg;function V_(){if(Jg)return Bo;Jg=1,Object.defineProperty(Bo,"__esModule",{value:!0}),Bo.SpeechSynthesisAdapter=void 0;const t=I(),e=k();let r=class extends e.SynthesisAdapterBase{constructor(i,s,a,o,c){super(i,s,a,c),this.privSpeechSynthesizer=o,this.privSynthesizer=o}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(i){const s=new t.SpeechSynthesisEventArgs(new t.SpeechSynthesisResult(i,t.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,s)}onSynthesizing(i){if(this.privSpeechSynthesizer.synthesizing)try{const s=this.privSynthesisTurn.audioOutputFormat.addHeader(i),a=new t.SpeechSynthesisEventArgs(new t.SpeechSynthesisResult(this.privSynthesisTurn.requestId,t.ResultReason.SynthesizingAudio,s));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,a)}catch{}}onSynthesisCancelled(i){if(this.privSpeechSynthesizer.SynthesisCanceled){const s=new t.SpeechSynthesisEventArgs(i);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,s)}catch{}}}onSynthesisCompleted(i){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new t.SpeechSynthesisEventArgs(i))}catch{}}onWordBoundary(i){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,i)}catch{}}onVisemeReceived(i){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,i)}catch{}}onBookmarkReached(i){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,i)}catch{}}};return Bo.SpeechSynthesisAdapter=r,Bo}var Fo={},Qg;function K_(){if(Qg)return Fo;Qg=1,Object.defineProperty(Fo,"__esModule",{value:!0}),Fo.SynthesisRestAdapter=void 0;const t=ye(),e=I(),r=Pt(),n=me;let i=class{constructor(a,o){let c=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!c){const l=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,"westus"),p=r.ConnectionFactoryBase.getHostSuffix(l);c=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,`https://${l}.tts.speech${p}`)}this.privUri=`${c}/cognitiveservices/voices/list`;const u=t.RestConfigBase.requestOptions;this.privRestAdapter=new t.RestMessageAdapter(u),this.privAuthentication=o}getVoicesList(a){return this.privRestAdapter.setHeaders(n.HeaderNames.ConnectionId,a),this.privAuthentication.fetch(a).then(o=>(this.privRestAdapter.setHeaders(o.headerName,o.token),this.privRestAdapter.request(t.RestRequestType.Get,this.privUri)))}};return Fo.SynthesisRestAdapter=i,Fo}var Il={},Gg;function $_(){return Gg||(Gg=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesizerConfig=t.SynthesisServiceType=void 0;const e=k();var r;(function(i){i[i.Standard=0]="Standard",i[i.Custom=1]="Custom"})(r=t.SynthesisServiceType||(t.SynthesisServiceType={}));class n{constructor(s,a){this.privSynthesisServiceType=r.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=s||new e.SpeechServiceConfig(new e.Context(null)),this.privParameters=a}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(s){this.privSynthesisServiceType=s}set synthesisVideoSection(s){this.privSpeechServiceConfig.Context.synthesis={video:s}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}}t.SynthesizerConfig=n}(Il)),Il}var qo={},Xg;function J_(){if(Xg)return qo;Xg=1,Object.defineProperty(qo,"__esModule",{value:!0}),qo.SynthesisContext=void 0;const t=I();let e=class{constructor(){this.privContext={}}setSection(n,i){this.privContext[n]=i}set audioOutputFormat(n){this.privAudioOutputFormat=n}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(n){const i=this.buildSynthesisContext(n);this.setSection("synthesis",i)}buildSynthesisContext(n){return{audio:{metadataOptions:{bookmarkEnabled:!!(n!=null&&n.bookmarkReached),punctuationBoundaryEnabled:n==null?void 0:n.properties.getProperty(t.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!(n!=null&&n.wordBoundary)),sentenceBoundaryEnabled:n==null?void 0:n.properties.getProperty(t.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!(n!=null&&n.visemeReceived),wordBoundaryEnabled:n==null?void 0:n.properties.getProperty(t.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!(n!=null&&n.wordBoundary))},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:n==null?void 0:n.autoDetectSourceLanguage}}}};return qo.SynthesisContext=e,qo}var Uo={},Zg;function Q_(){if(Zg)return Uo;Zg=1,Object.defineProperty(Uo,"__esModule",{value:!0}),Uo.SpeakerRecognitionConfig=void 0;const t=k();let e=class{constructor(n,i){this.privContext=n||new t.Context(null),this.privParameters=i}get parameters(){return this.privParameters}get Context(){return this.privContext}};return Uo.SpeakerRecognitionConfig=e,Uo}var Wo={},Yg;function G_(){if(Yg)return Wo;Yg=1,Object.defineProperty(Wo,"__esModule",{value:!0}),Wo.SpeakerServiceRecognizer=void 0;const t=ye(),e=D(),r=I(),n=k(),i=Gt;let s=class extends n.ServiceRecognizerBase{constructor(o,c,u,l,p){super(o,c,u,l,p),this.privSpeakerRecognizer=p,this.privSpeakerAudioSource=u,this.recognizeSpeaker=d=>this.recognizeSpeakerOnce(d),this.sendPrePayloadJSONOverride=()=>this.noOp()}processTypeSpecificMessages(o){let c=!1;const u=new r.PropertyCollection;switch(o.messageType===e.MessageType.Text&&u.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,o.textBody),o.path.toLowerCase()){case"speaker.response":const p=JSON.parse(o.textBody);let d;p.status.statusCode.toLowerCase()!=="success"?d=new r.SpeakerRecognitionResult(p,r.ResultReason.Canceled,r.CancellationErrorCode.ServiceError,p.status.reason):d=new r.SpeakerRecognitionResult(p,r.ResultReason.RecognizedSpeaker),this.privResultDeferral&&this.privResultDeferral.resolve(d),c=!0;break}const l=new e.Deferred;return l.resolve(c),l.promise}cancelRecognition(o,c,u,l,p){if(new r.PropertyCollection().setProperty(n.CancellationErrorCodePropertyName,r.CancellationErrorCode[l]),this.privResultDeferral){const h=new r.SpeakerRecognitionResult({scenario:this.privSpeakerModel.scenario,status:{statusCode:p,reason:p}},r.ResultReason.Canceled,l,p);try{this.privResultDeferral.resolve(h)}catch(v){this.privResultDeferral.reject(v)}}}async recognizeSpeakerOnce(o){this.privSpeakerModel=o,this.voiceProfileType=o.scenario,this.privResultDeferral||(this.privResultDeferral=new e.Deferred),this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(r.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const c=this.connectImpl(),u=this.sendPreAudioMessages(this.extractSpeakerContext(o)),l=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),p=await this.privSpeakerAudioSource.format,d=await this.privSpeakerAudioSource.deviceInfo,h=new t.ReplayableAudioNode(l,p.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(h,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:d};try{await c,await u}catch(y){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,y)}const v=new r.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,v),this.receiveMessage(),this.sendAudio(h).then(()=>{},y=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,y)}),this.privResultDeferral.promise}async sendPreAudioMessages(o){const c=await this.fetchConnection();await this.sendSpeakerRecognition(c,o)}async sendSpeakerRecognition(o,c){const u=JSON.stringify(c);return o.send(new i.SpeechConnectionMessage(e.MessageType.Text,"speaker.context",this.privRequestSession.requestId,"application/json; charset=utf-8",u))}extractSpeakerContext(o){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:o.profileIds,scenario:o.scenario}}};return Wo.SpeakerServiceRecognizer=s,Wo}var Ho={},em;function X_(){if(em)return Ho;em=1,Object.defineProperty(Ho,"__esModule",{value:!0}),Ho.VoiceServiceRecognizer=void 0;const t=ye(),e=D(),r=I(),n=k(),i=Gt;let s=class extends n.ServiceRecognizerBase{constructor(o,c,u,l,p){super(o,c,u,l,p),this.privDeferralMap=new e.DeferralMap,this.privSpeakerAudioSource=u,this.sendPrePayloadJSONOverride=()=>this.noOp()}set SpeakerAudioSource(o){this.privSpeakerAudioSource=o}processTypeSpecificMessages(o){let c=!1;const u=new r.PropertyCollection;switch(o.messageType===e.MessageType.Text&&u.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,o.textBody),o.path.toLowerCase()){case"speaker.profiles":const p=JSON.parse(o.textBody);switch(p.operation.toLowerCase()){case"create":this.handleCreateResponse(p,o.requestId);break;case"delete":case"reset":this.handleResultResponse(p,o.requestId);break;case"fetch":const g=JSON.parse(o.textBody);this.handleFetchResponse(g,o.requestId);break}c=!0;break;case"speaker.phrases":const d=JSON.parse(o.textBody);this.handlePhrasesResponse(d,o.requestId),c=!0;break;case"speaker.profile.enrollment":const h=JSON.parse(o.textBody),v=new r.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(h.enrollment?h.enrollment.enrollmentStatus:h.status.statusCode),h.enrollment?JSON.stringify(h.enrollment):void 0,h.status.reason);this.privDeferralMap.getId(o.requestId)&&this.privDeferralMap.complete(o.requestId,v),this.privRequestSession.onSpeechEnded(),c=!0;break}const l=new e.Deferred;return l.resolve(c),l.promise}cancelRecognition(o,c,u,l,p){new r.PropertyCollection().setProperty(n.CancellationErrorCodePropertyName,r.CancellationErrorCode[l]);const h=new r.VoiceProfileEnrollmentResult(r.ResultReason.Canceled,p,p);this.privDeferralMap.getId(c)&&this.privDeferralMap.complete(c,h)}async createProfile(o,c){this.voiceProfileType=o.toString();const u=this.connectImpl();try{const l=new e.Deferred;return await u,await this.sendCreateProfile(l,o,c),this.receiveMessage(),l.promise}catch(l){throw l}}async resetProfile(o){return this.voiceProfileType=o.profileType.toString(),this.sendCommonRequest("reset",o.profileType,o)}async deleteProfile(o){return this.voiceProfileType=o.profileType.toString(),this.sendCommonRequest("delete",o.profileType,o)}async retrieveEnrollmentResult(o){return this.voiceProfileType=o.profileType.toString(),this.privExpectedProfileId=o.profileId,this.sendCommonRequest("fetch",o.profileType,o)}async getAllProfiles(o){return this.voiceProfileType=o.toString(),this.sendCommonRequest("fetch",o)}async getActivationPhrases(o,c){this.voiceProfileType=o.toString();const u=this.connectImpl();try{const l=new e.Deferred;return await u,await this.sendPhrasesRequest(l,o,c),this.receiveMessage(),l.promise}catch(l){throw l}}async enrollProfile(o){this.voiceProfileType=o.profileType.toString();const c=new e.Deferred;this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(r.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const u=this.connectImpl(),l=this.sendPreAudioMessages(o,c),p=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),d=await this.privSpeakerAudioSource.format,h=await this.privSpeakerAudioSource.deviceInfo,v=new t.ReplayableAudioNode(p,d.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(v,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:h};try{await u,await l}catch(f){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,f)}const g=new r.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,g),this.receiveMessage(),this.sendAudio(v).then(()=>{},f=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,f)}),c.promise}async sendPreAudioMessages(o,c){const u=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,c),await this.sendBaseRequest(u,"enroll",this.scenarioFrom(o.profileType),o)}async sendPhrasesRequest(o,c,u){const l=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,o);const p=this.scenarioFrom(c),d={locale:u,scenario:p};return l.send(new i.SpeechConnectionMessage(e.MessageType.Text,"speaker.profile.phrases",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(d)))}async sendCreateProfile(o,c,u){const l=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,o);const p=c===r.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":c===r.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification",d={locale:u,number:"1",scenario:p};return l.send(new i.SpeechConnectionMessage(e.MessageType.Text,"speaker.profile.create",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(d)))}async sendCommonRequest(o,c,u=void 0){const l=this.connectImpl();try{const p=new e.Deferred;this.privRequestSession.onSpeechContext(),await l;const d=await this.fetchConnection();return this.privDeferralMap.add(this.privRequestSession.requestId,p),await this.sendBaseRequest(d,o,this.scenarioFrom(c),u),this.receiveMessage(),p.promise}catch(p){throw p}}async sendBaseRequest(o,c,u,l){const p={scenario:u};return l?p.profileIds=[l.profileId]:p.maxPageSize=-1,o.send(new i.SpeechConnectionMessage(e.MessageType.Text,`speaker.profile.${c}`,this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(p)))}extractSpeakerContext(o){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:o.profileIds,scenario:o.scenario}}handlePhrasesResponse(o,c){if(this.privDeferralMap.getId(c))if(o.status.statusCode.toLowerCase()!=="success"){const u=r.ResultReason.Canceled,l=new r.VoiceProfilePhraseResult(u,o.status.statusCode,o.passPhraseType,[]);this.privDeferralMap.complete(c,l)}else if(o.phrases&&o.phrases.length>0){const u=r.ResultReason.EnrollingVoiceProfile,l=new r.VoiceProfilePhraseResult(u,o.status.statusCode,o.passPhraseType,o.phrases);this.privDeferralMap.complete(c,l)}else throw new Error("Voice Profile get activation phrases failed, no phrases received");else throw new Error(`Voice Profile get activation phrases request for requestID ${c} not found`)}handleCreateResponse(o,c){if(o.profiles&&o.profiles.length>0)if(this.privDeferralMap.getId(c)){const u=o.profiles.map(l=>l.profileId);this.privDeferralMap.complete(c,u)}else throw new Error(`Voice Profile create request for requestID ${c} not found`);else throw new Error("Voice Profile create failed, no profile id received")}handleResultResponse(o,c){if(this.privDeferralMap.getId(c)){const u=o.operation.toLowerCase()==="delete"?r.ResultReason.DeletedVoiceProfile:r.ResultReason.ResetVoiceProfile,l=o.status.statusCode.toLowerCase()==="success"?u:r.ResultReason.Canceled,p=new r.VoiceProfileResult(l,`statusCode: ${o.status.statusCode}, errorDetails: ${o.status.reason}`);this.privDeferralMap.complete(c,p)}else throw new Error(`Voice Profile create request for requestID ${c} not found`)}handleFetchResponse(o,c){if(this.privDeferralMap.getId(c)&&o.profiles[0]){if(this.privExpectedProfileId&&o.profiles.length===1&&o.profiles[0].profileId===this.privExpectedProfileId){this.privExpectedProfileId=void 0;const u=o.profiles[0],l=new r.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(u.enrollmentStatus),JSON.stringify(u),o.status.reason);this.privDeferralMap.complete(c,l)}else if(o.profiles.length>0){const u=o.profiles,l=[];for(const p of u)l.push(new r.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(p.enrollmentStatus),JSON.stringify(p),o.status.reason));this.privDeferralMap.complete(c,l)}}else throw new Error(`Voice Profile fetch request for requestID ${c} not found`)}enrollmentReasonFrom(o){switch(o.toLowerCase()){case"enrolled":return r.ResultReason.EnrolledVoiceProfile;case"invalidlocale":case"invalidphrase":case"invalidaudioformat":case"invalidscenario":case"invalidprofilecount":case"invalidoperation":case"audiotooshort":case"audiotoolong":case"toomanyenrollments":case"storageconflict":case"profilenotfound":case"incompatibleprofiles":case"incompleteenrollment":return r.ResultReason.Canceled;default:return r.ResultReason.EnrollingVoiceProfile}}scenarioFrom(o){return o===r.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":o===r.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"}};return Ho.VoiceServiceRecognizer=s,Ho}var uP={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.type=t.connectivity=t.Device=t.OS=t.System=t.Context=t.SpeechServiceConfig=void 0;class e{constructor(o){this.context=o}serialize(){return JSON.stringify(this,(o,c)=>{if(c&&typeof c=="object"&&!Array.isArray(c)){const u={};for(const l in c)Object.hasOwnProperty.call(c,l)&&(u[l&&l.charAt(0).toLowerCase()+l.substring(1)]=c[l]);return u}return c})}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(o){this.recognition=o.toLowerCase()}}t.SpeechServiceConfig=e;class r{constructor(o){this.system=new n,this.os=o}}t.Context=r;class n{constructor(){const o="1.35.0";this.name="SpeechSDK",this.version=o,this.build="JavaScript",this.lang="JavaScript"}}t.System=n;class i{constructor(o,c,u){this.platform=o,this.name=c,this.version=u}}t.OS=i;class s{constructor(o,c,u){this.manufacturer=o,this.model=c,this.version=u}}t.Device=s,function(a){a.Bluetooth="Bluetooth",a.Wired="Wired",a.WiFi="WiFi",a.Cellular="Cellular",a.InBuilt="InBuilt",a.Unknown="Unknown"}(t.connectivity||(t.connectivity={})),function(a){a.Phone="Phone",a.Speaker="Speaker",a.Car="Car",a.Headset="Headset",a.Thermostat="Thermostat",a.Microphones="Microphones",a.Deskphone="Deskphone",a.RemoteControl="RemoteControl",a.Unknown="Unknown",a.File="File",a.Stream="Stream"}(t.type||(t.type={}))})(uP);var tm;function k(){return tm||(tm=1,function(t){var e=q&&q.__createBinding||(Object.create?function(s,a,o,c){c===void 0&&(c=o),Object.defineProperty(s,c,{enumerable:!0,get:function(){return a[o]}})}:function(s,a,o,c){c===void 0&&(c=o),s[c]=a[o]}),r=q&&q.__exportStar||function(s,a){for(var o in s)o!=="default"&&!a.hasOwnProperty(o)&&e(a,s,o)};Object.defineProperty(t,"__esModule",{value:!0}),t.AutoDetectSourceLanguagesOpenRangeOptionName=t.ForceDictationPropertyName=t.ServicePropertiesPropertyName=t.CancellationErrorCodePropertyName=t.OutputFormatPropertyName=void 0,r(Ic,t),r(zc,t),r(Vn,t),r(sC,t),r(aC,t),r(F0(),t),r(q0(),t),r(uu,t),r(U0(),t),r(W0(),t),r(H0(),t),r(eP,t),r(lu,t),r(K0(),t),r($0(),t),r(J0(),t),r(Q0(),t),r(XC(),t),r(G0(),t),r(tP,t),r(X0(),t),r(pu,t),r(e_(),t),r(t_(),t),r(du,t),r(hu,t),r(vu,t),r(r_(),t),r(n_(),t),r(i_(),t),r(o_(),t),r(s_(),t),r(fu,t),r(c_(),t),r(gu,t),r(oP,t),r(mu,t),r(Su,t),r(Cu,t),r(sP,t),r(C_(),t),r(Eu,t),r(x_(),t),r(ih,t),r(U_(),t),r(W_(),t);var n=H_();Object.defineProperty(t,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return n.AvatarSynthesisAdapter}});var i=V_();Object.defineProperty(t,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return i.SpeechSynthesisAdapter}}),r(K_(),t),r($_(),t),r(J_(),t),r(Q_(),t),r(G_(),t),r(X_(),t),r(uP,t),t.OutputFormatPropertyName="OutputFormat",t.CancellationErrorCodePropertyName="CancellationErrorCode",t.ServicePropertiesPropertyName="ServiceProperties",t.ForceDictationPropertyName="ForceDictation",t.AutoDetectSourceLanguagesOpenRangeOptionName="OpenRange"}(ll)),ll}(function(t){var e=q&&q.__createBinding||(Object.create?function(i,s,a,o){o===void 0&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return s[a]}})}:function(i,s,a,o){o===void 0&&(o=a),i[o]=s[a]}),r=q&&q.__exportStar||function(i,s){for(var a in i)a!=="default"&&!s.hasOwnProperty(a)&&e(s,i,a)};Object.defineProperty(t,"__esModule",{value:!0});const n=k();new n.AgentConfig,r(I(),t)})(Qe);const Z_="94f6ccf27eae4c3fa2055f6f97a8b0a2",Y_="southeastasia",eO="stun:relay.communication.microsoft.com:3478",tO="turn:relay.communication.microsoft.com:3478",Vo=[{id:"1",question:"What is HTML?"},{id:"2",question:"What is the difference between CSS and JavaScript?"},{id:"3",question:"How do I use images in my website?"},{id:"4",question:"How do I make my website responsive?"},{id:"5",question:"What is SEO and how do I improve it on my website?"},{id:"6",question:"How do I use Git for version control?"},{id:"7",question:"What are the best practices for web development?"}];class rO{constructor(e,r){this.speechConfig=Qe.SpeechConfig.fromSubscription(Z_,Y_),this.speechConfig.speechSynthesisLanguage="en-IN",this.speechConfig.speechSynthesisVoiceName="en-IN-NeerjaNeural",this.avatarConfig=new Qe.AvatarConfig("lisa","casual-sitting"),this.avatarSynthesizer=new Qe.AvatarSynthesizer(this.speechConfig,this.avatarConfig),this.peerConnection=new RTCPeerConnection({iceServers:[{urls:[tO,eO],username:r,credential:e}]}),this.peerConnection.ontrack=function(n){if(n.track.kind==="video"){const i=document.getElementById("videoPlayer");i.srcObject=n.streams[0]}if(n.track.kind==="audio"){const i=document.getElementById("audioPlayer");i.srcObject=n.streams[0]}},this.peerConnection.addTransceiver("video",{direction:"sendrecv"}),this.peerConnection.addTransceiver("audio",{direction:"sendrecv"}),this.audioConfig=Qe.AudioConfig.fromDefaultMicrophoneInput(),this.speechRecognizer=new Qe.SpeechRecognizer(this.speechConfig,this.audioConfig),this.speechSynthesizer=new Qe.SpeechSynthesizer(this.speechConfig),this.videoElement=document.getElementById("videoPlayer")}startAvatar(){return new Promise((e,r)=>{this.avatarSynthesizer.startAvatarAsync(this.peerConnection).then(()=>{console.log("Avatar started."),e(!0)}).catch(n=>{console.log("Avatar failed to start. Error: "+n),r(!1)})})}startSpeechRecognition(e){this.speechRecognizer.recognizing=()=>{},this.speechRecognizer.recognized=(r,n)=>{n.result.reason===Qe.ResultReason.RecognizedSpeech&&e(n.result.text)},this.speechRecognizer.startContinuousRecognitionAsync()}async avatarVideo(e){return new Promise((n,i)=>{this.avatarSynthesizer.speakTextAsync(e).then(s=>{if(s.reason===Qe.ResultReason.SynthesizingAudioCompleted)n(!0);else if(i(!1),console.log("Unable to speak. Result ID: "+s.resultId),s.reason===Qe.ResultReason.Canceled){let a=Qe.CancellationDetails.fromResult(s);console.log(a.reason),a.reason===Qe.CancellationReason.Error&&console.log(a.privErrorDetails)}}).catch(s=>{i(!1),console.log(s),this.avatarSynthesizer.close()})})}speak(e){return new Promise(n=>{this.speechSynthesizer.speakTextAsync(e,i=>{i.reason===Qe.ResultReason.SynthesizingAudioCompleted&&n(i.privAudioDuration/1e4)})})}stopSpeechRecognition(){this.speechRecognizer.stopContinuousRecognitionAsync()}close(){this.speechRecognizer.close(),this.avatarSynthesizer.close()}}const nO="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAXCSURBVHic7ZpdiFRlGMd/zzmze86suq6bpimFpm5WfoCZGKu77YUhiSFJXkQSEVaQSkEGSYWFQprp+nGTqUXdCdFFkn0y7uxiRhKRGllERRdJFmqRO7O7c54uZnec3Z3Zec/MOWf68A/DcM77fPyf5/zP1/seuIqr+F9DqpFUFaErvhDPW4BIGpFTsqT7s2pwibwB2lE7B5E3QOYPGfocS9fI4vTZKPlE2gBN1M7Clk9BGoqYXMDW26U5/X1UnKyoEqkiWNbrIxQPMI6MvKUa3YGJrAF0uWsQFhlY3kGX+0DofPoRSac1wWhs9yww2dDlHLWpm2QRf4TJC6JSgO0+g3nxAJNIu0+HRScfoStAO9xpCF8Drk/XFMot0pr6IQxeAwhfAaIv4794ABfR7UHTGYpQFaCd7p0oiYqCCG2yJHUsGEbDEZoC9DA2Ku2VB5J2PYwdAKWCCO8UmOSsBZ1XeSCdx3Xuw5XHKYxQTgE9QT1p91uEiQGFPE8m1SRtXAwoXg7hKKDH2Rxg8QATsJ3nAoyXQ+AK0IQzA1vOALUBh+7F0jlBvywFrwBL9hB88QA1eNYrQQcNVAF6zFmKJR8GGXMYLL1bFqePBhUusAZoghi2+yVwa1AxC0L4hnhqriygN4hwwZ0Cdnw9YRcPoMzicvzxoMIFogA9Xt9IX893QGMQ8QwyXiRTO1Pa/vyt0kjBKKCvZytmxb+GahPC9IK/7NjB0mGkAbvvxUppQwAK0GTtXLC+AIPH1Yw3R9p6To8YL1E7G9s6ZZA6A958aen5ypBqQVSuALF2YFI8QCzmlLSpiZm+OdqIVfG7RkUN0GR8FcpSY4eMVx+ITY4AbdoRv9fYvgDKboC+hwP6kr9sBsWJZd4AANEdmihrviFLqVxHxrhPATN8+ZgUJz4UkMU0bPdJnz45lNUA/XjURBT/c3aeli5ODWyGY5N21fmZc8yhPAXUZLYD/omKGPiY2AzDaDxvaxl+/hugnXW3IZQ7bz+mpIUY2BTGg5qML/Tr5KsBqgjq7fbrl4OJAryyFAAgqO72u6rkr5Dsik2zL598mJzfUtY1oN+XRSTd+/24GDdAT1KHssU/q3yEdg3Ixzb9gFGmxuYK+MvdBNxQDqMcjI5uBQoAEKYQN19VMmqAdsSvRyj7XnslkMmdo8IGZLFRE+5UE0MzBYi3E6irgNAAojgFAOLE2GZiWLIBmow3g6yqnBOGCijj+aJwrtWadFtLmY3YgOzqjrePoKbOhLGqxXP2j40NJFc24s6R8mUpjeSedNcC+4MjBKhsJGa/iWcPntOzMjV4mYdQny9YpbFWWlIHig0WbYCeoJ4e9ywwKWBCUeNX0qkmWcqlQoPF5dHrPE/oxcul7C9UXIvjPFtssGADtNNpQmV9SIQyoO0I06Wlu0FauhuwdQYqewAvnJSyQTucmQVHCu3UZPwI6PIQmGQQuU+WdL9TJO8q0MOEsWKl8q60dt8zdPewRNrpLAupeED3FCseQFq630ZlXyipRVdoh3PX0N2DGqAJYqjsCIUAgMrekjae7gotv0i7nqQmf9dgBdjxdYS3uvO7yQdP0pb6EbgQEoebuew8lr8j1wA9Xt8IWvRqGQB8PExpiN8uyQuaGDN+YOuKAvp6twDXhJeYRpMXFO10byzxOW2lGEesb/PAhgX9X3Cjj4SYNIuYritpoxrW7Tc/x6OaqJ0NAwrIrrCE9iXWlcTyhHY4w25FueFk3UoI7fkjHzFsaxeAaNJZDnIkgqQDyCDajiV7pTn1E4Am3KnYugFkA1EciAGoLhdNukeBZZElHYzz/f8TqpT/fdGkex4YX9L0Pwm9aBHMTM+/FFJjAWeqTaOKOG2BHqo2iyrioEUmfQD4pNpMIofwEedShyxpo49YagXKfiBTbV4RoBfhVeKplbKazKBnbj0en0IvrcBkrAjvx1HAow/4GZFOabn8S7XpXMVV/EPwN5iJlBD8HICSAAAAAElFTkSuQmCC",iO=()=>j.jsx("div",{className:"absolute top-0 right-0 bg-[#00000060] w-full h-full flex justify-center items-center",children:j.jsxs("div",{className:"px-10 py-5 border bg-white flex justify-center items-center flex-col gap-4 rounded-lg",children:[j.jsxs("div",{className:"text-center",children:[j.jsx("div",{className:"flex justify-center",children:j.jsx("img",{src:nO,alt:""})}),j.jsx("p",{className:"text-xl",children:"Internal server error"}),j.jsx("p",{className:"text-xl",children:"Please try again"})]}),j.jsx("button",{onClick:()=>window.location.reload(),className:"border-2 px-4 py-2 rounded-lg hover:bg-blue-100 bg-white font-medium",children:"Reload"})]})});var lP={exports:{}};(function(t,e){(function(n,i){t.exports=i(ve)})(q,function(r){return function(n){var i={};function s(a){if(i[a])return i[a].exports;var o=i[a]={i:a,l:!1,exports:{}};return n[a].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=n,s.c=i,s.d=function(a,o,c){s.o(a,o)||Object.defineProperty(a,o,{enumerable:!0,get:c})},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},s.t=function(a,o){if(o&1&&(a=s(a)),o&8||o&4&&typeof a=="object"&&a&&a.__esModule)return a;var c=Object.create(null);if(s.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:a}),o&2&&typeof a!="string")for(var u in a)s.d(c,u,(function(l){return a[l]}).bind(null,u));return c},s.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(o,"a",o),o},s.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},s.p="",s(s.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(n,i,s){s.r(i);var a=s("react"),o=function(){var d=function(h,v){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var f in y)y.hasOwnProperty(f)&&(g[f]=y[f])},d(h,v)};return function(h,v){d(h,v);function g(){this.constructor=h}h.prototype=v===null?Object.create(v):(g.prototype=v.prototype,new g)}}(),c=function(){return c=Object.assign||function(d){for(var h,v=1,g=arguments.length;v<g;v++){h=arguments[v];for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(d[y]=h[y])}return d},c.apply(this,arguments)},u=function(d,h){var v={};for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&h.indexOf(g)<0&&(v[g]=d[g]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,g=Object.getOwnPropertySymbols(d);y<g.length;y++)h.indexOf(g[y])<0&&Object.prototype.propertyIsEnumerable.call(d,g[y])&&(v[g[y]]=d[g[y]]);return v};(function(){typeof window>"u"||(navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(h){var v=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return v?new Promise(function(g,y){v.call(navigator,h,g,y)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}))})();function l(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}var p=function(d){o(h,d);function h(v){var g=d.call(this,v)||this;return g.canvas=null,g.ctx=null,g.requestUserMediaId=0,g.unmounted=!1,g.state={hasUserMedia:!1},g}return h.prototype.componentDidMount=function(){var v=this,g=v.state,y=v.props;if(this.unmounted=!1,!l()){y.onUserMediaError("getUserMedia not supported");return}g.hasUserMedia||this.requestUserMedia(),y.children&&typeof y.children!="function"&&console.warn("children must be a function")},h.prototype.componentDidUpdate=function(v){var g=this.props;if(!l()){g.onUserMediaError("getUserMedia not supported");return}var y=JSON.stringify(v.audioConstraints)!==JSON.stringify(g.audioConstraints),f=JSON.stringify(v.videoConstraints)!==JSON.stringify(g.videoConstraints),m=v.minScreenshotWidth!==g.minScreenshotWidth,S=v.minScreenshotHeight!==g.minScreenshotHeight;(f||m||S)&&(this.canvas=null,this.ctx=null),(y||f)&&(this.stopAndCleanup(),this.requestUserMedia())},h.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},h.stopMediaStream=function(v){v&&(v.getVideoTracks&&v.getAudioTracks?(v.getVideoTracks().map(function(g){v.removeTrack(g),g.stop()}),v.getAudioTracks().map(function(g){v.removeTrack(g),g.stop()})):v.stop())},h.prototype.stopAndCleanup=function(){var v=this.state;v.hasUserMedia&&(h.stopMediaStream(this.stream),v.src&&window.URL.revokeObjectURL(v.src))},h.prototype.getScreenshot=function(v){var g=this,y=g.state,f=g.props;if(!y.hasUserMedia)return null;var m=this.getCanvas(v);return m&&m.toDataURL(f.screenshotFormat,f.screenshotQuality)},h.prototype.getCanvas=function(v){var g=this,y=g.state,f=g.props;if(!this.video||!y.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var m=this.video.videoWidth,S=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var C=m/S;m=f.minScreenshotWidth||this.video.clientWidth,S=m/C,f.minScreenshotHeight&&S<f.minScreenshotHeight&&(S=f.minScreenshotHeight,m=S*C)}this.canvas=document.createElement("canvas"),this.canvas.width=(v==null?void 0:v.width)||m,this.canvas.height=(v==null?void 0:v.height)||S,this.ctx=this.canvas.getContext("2d")}var P=this,R=P.ctx,A=P.canvas;return R&&A&&(A.width=(v==null?void 0:v.width)||A.width,A.height=(v==null?void 0:v.height)||A.height,f.mirrored&&(R.translate(A.width,0),R.scale(-1,1)),R.imageSmoothingEnabled=f.imageSmoothing,R.drawImage(this.video,0,0,(v==null?void 0:v.width)||A.width,(v==null?void 0:v.height)||A.height),f.mirrored&&(R.scale(-1,1),R.translate(-A.width,0))),A},h.prototype.requestUserMedia=function(){var v=this,g=this.props,y=function(S,C){var P={video:typeof C<"u"?C:!0};g.audio&&(P.audio=typeof S<"u"?S:!0),v.requestUserMediaId++;var R=v.requestUserMediaId;navigator.mediaDevices.getUserMedia(P).then(function(A){v.unmounted||R!==v.requestUserMediaId?h.stopMediaStream(A):v.handleUserMedia(null,A)}).catch(function(A){v.handleUserMedia(A)})};if("mediaDevices"in navigator)y(g.audioConstraints,g.videoConstraints);else{var f=function(S){return{optional:[{sourceId:S}]}},m=function(S){var C=S.deviceId;return typeof C=="string"?C:Array.isArray(C)&&C.length>0?C[0]:typeof C=="object"&&C.ideal?C.ideal:null};MediaStreamTrack.getSources(function(S){var C=null,P=null;S.forEach(function(w){w.kind==="audio"?C=w.id:w.kind==="video"&&(P=w.id)});var R=m(g.audioConstraints);R&&(C=R);var A=m(g.videoConstraints);A&&(P=A),y(f(C),f(P))})}},h.prototype.handleUserMedia=function(v,g){var y=this.props;if(v||!g){this.setState({hasUserMedia:!1}),y.onUserMediaError(v);return}this.stream=g;try{this.video&&(this.video.srcObject=g),this.setState({hasUserMedia:!0})}catch{this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(g)})}y.onUserMedia(g)},h.prototype.render=function(){var v=this,g=this,y=g.state,f=g.props,m=f.audio;f.forceScreenshotSourceSize;var S=f.disablePictureInPicture;f.onUserMedia,f.onUserMediaError,f.screenshotFormat,f.screenshotQuality,f.minScreenshotWidth,f.minScreenshotHeight,f.audioConstraints,f.videoConstraints,f.imageSmoothing;var C=f.mirrored,P=f.style,R=P===void 0?{}:P,A=f.children,w=u(f,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),M=C?c(c({},R),{transform:(R.transform||"")+" scaleX(-1)"}):R,b={getScreenshot:this.getScreenshot.bind(this)};return a.createElement(a.Fragment,null,a.createElement("video",c({autoPlay:!0,disablePictureInPicture:S,src:y.src,muted:!m,playsInline:!0,ref:function(J){v.video=J},style:M},w)),A&&A(b))},h.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},h}(a.Component);i.default=p},react:function(n,i){n.exports=r}}).default})})(lP);var oO=lP.exports;const sO=rm(oO);function pP({secondsRemaining:t}){return j.jsx("div",{className:"flex justify-center items-center ml-2 text-red-600 absolute bottom-0 right-2 ",children:j.jsx("p",{className:"font-bold text-xl",children:t<10?"0"+t:t})})}pP.propTypes={secondsRemaining:Bt.number};const aO=()=>{const t=ve.useRef(null),e=ve.useRef(null),r=ve.useRef(null),[n,i]=ve.useState([]),[s,a]=ve.useState(!0),[o,c]=ve.useState(),[u,l]=ve.useState(!1),[p,d]=ve.useState(!0),[h,v]=ve.useState(0),[g,y]=ve.useState(!1),[f,m]=ve.useState(30),S=()=>{m(30)},C=async w=>{if(y(!1),w>=Vo.length-1){const M="Thank You for response we will back to you soon",b={id:Cp(),botMessage:M};i(J=>[...J,b]),await o.avatarVideo(M)}else{const M=Vo[w].question,b={id:Vo[w].id,botMessage:M};i(J=>[...J,b]),P(M,w)}S()},P=async(w,M)=>{await o.avatarVideo(w),R(M)},R=w=>{y(!0),o.startSpeechRecognition(M=>{const b={id:Cp(),userMessage:M};i(J=>[...J,b]),setTimeout(()=>{o.stopSpeechRecognition()},3e4),v(J=>J+1),C(w+1)})},A=async()=>{a(!1),t.current.play(),e.current.play();const w=Vo[h].question,M={id:Vo[h].id,botMessage:w};i([M]),await o.avatarVideo(w),R(h),S()};return ve.useEffect(()=>{o||(async()=>{try{const M=await RI(),b=new rO(M.credential,M.username);await b.startAvatar()?d(!1):l(!0),c(b)}catch(M){console.log(M),l(!0)}})()},[o]),ve.useEffect(()=>{const w=setInterval(()=>{f>0?m(f-1):clearInterval(w)},1e3);return()=>clearInterval(w)},[f]),j.jsxs(j.Fragment,{children:[j.jsx("div",{className:"flex justify-center mb-2",children:j.jsx("div",{className:"w-44 bg-white p-2.5 rounded-lg",children:j.jsx("img",{src:oA,alt:"mlai_logo"})})}),j.jsxs("div",{className:"rounded-lg h-[90vh] lg:h-fit lg:w-[800px] m-0 lg:mx-auto mx-2 border-white overflow-hidden border",children:[j.jsxs("div",{className:"flex flex-col-reverse lg:flex-row  relative border-b-2  border-white",children:[j.jsxs("div",{className:"overflow-hidden h-1/2 lg:w-1/2 lg:h-56 border-b-2 border-white lg:border-none relative",children:[j.jsx(sO,{height:200,audio:!1,ref:r,screenshotFormat:"image/jpeg"}),g&&j.jsx(pP,{secondsRemaining:f})]}),j.jsxs("div",{className:"overflow-hidden h-1/2 lg:w-1/2 lg:h-full border-b-2 border-white lg:border-none",children:[j.jsx("video",{ref:t,id:"videoPlayer",preload:"none",playsInline:!0}),j.jsx("audio",{ref:e,id:"audioPlayer"})]}),s?j.jsx("div",{className:"absolute top-0 right-0 bg-[#00000060] w-full h-full flex justify-center items-center",children:j.jsx("button",{disabled:p,onClick:A,className:"border-2 px-4 py-2 rounded-lg hover:bg-blue-100 bg-white font-medium disabled:bg-gray-400",children:p?"Connecting...":"Start"})}):null,u?j.jsx(iO,{}):null]}),j.jsx("div",{className:"overflow-y-scroll h-40",children:j.jsx(AS,{chats:n})})]})]})};function cO(){return j.jsx("section",{className:"py-2 lg:py-20",children:j.jsx(aO,{})})}Tl.createRoot(document.getElementById("root")).render(j.jsx(cO,{}));
